function G_(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Q_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tg={exports:{}},Tl={},ng={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bo=Symbol.for("react.element"),K_=Symbol.for("react.portal"),Y_=Symbol.for("react.fragment"),X_=Symbol.for("react.strict_mode"),J_=Symbol.for("react.profiler"),Z_=Symbol.for("react.provider"),e1=Symbol.for("react.context"),t1=Symbol.for("react.forward_ref"),n1=Symbol.for("react.suspense"),r1=Symbol.for("react.memo"),s1=Symbol.for("react.lazy"),cf=Symbol.iterator;function i1(t){return t===null||typeof t!="object"?null:(t=cf&&t[cf]||t["@@iterator"],typeof t=="function"?t:null)}var rg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sg=Object.assign,ig={};function Js(t,e,n){this.props=t,this.context=e,this.refs=ig,this.updater=n||rg}Js.prototype.isReactComponent={};Js.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Js.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function og(){}og.prototype=Js.prototype;function wd(t,e,n){this.props=t,this.context=e,this.refs=ig,this.updater=n||rg}var Sd=wd.prototype=new og;Sd.constructor=wd;sg(Sd,Js.prototype);Sd.isPureReactComponent=!0;var df=Array.isArray,ag=Object.prototype.hasOwnProperty,kd={current:null},lg={key:!0,ref:!0,__self:!0,__source:!0};function ug(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ag.call(e,r)&&!lg.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:bo,type:t,key:i,ref:o,props:s,_owner:kd.current}}function o1(t,e){return{$$typeof:bo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cd(t){return typeof t=="object"&&t!==null&&t.$$typeof===bo}function a1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var hf=/\/+/g;function lu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?a1(""+t.key):e.toString(36)}function pa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bo:case K_:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+lu(o,0):r,df(s)?(n="",t!=null&&(n=t.replace(hf,"$&/")+"/"),pa(s,e,n,"",function(u){return u})):s!=null&&(Cd(s)&&(s=o1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(hf,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",df(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+lu(i,a);o+=pa(i,e,n,l,s)}else if(l=i1(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+lu(i,a++),o+=pa(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Wo(t,e,n){if(t==null)return t;var r=[],s=0;return pa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function l1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gt={current:null},ma={transition:null},u1={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:ma,ReactCurrentOwner:kd};me.Children={map:Wo,forEach:function(t,e,n){Wo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wo(t,function(){e++}),e},toArray:function(t){return Wo(t,function(e){return e})||[]},only:function(t){if(!Cd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Js;me.Fragment=Y_;me.Profiler=J_;me.PureComponent=wd;me.StrictMode=X_;me.Suspense=n1;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u1;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=sg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=kd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ag.call(e,l)&&!lg.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:bo,type:t.type,key:s,ref:i,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:e1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Z_,_context:t},t.Consumer=t};me.createElement=ug;me.createFactory=function(t){var e=ug.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:t1,render:t}};me.isValidElement=Cd;me.lazy=function(t){return{$$typeof:s1,_payload:{_status:-1,_result:t},_init:l1}};me.memo=function(t,e){return{$$typeof:r1,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=ma.transition;ma.transition={};try{t()}finally{ma.transition=e}};me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};me.useCallback=function(t,e){return gt.current.useCallback(t,e)};me.useContext=function(t){return gt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return gt.current.useDeferredValue(t)};me.useEffect=function(t,e){return gt.current.useEffect(t,e)};me.useId=function(){return gt.current.useId()};me.useImperativeHandle=function(t,e,n){return gt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return gt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return gt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return gt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return gt.current.useReducer(t,e,n)};me.useRef=function(t){return gt.current.useRef(t)};me.useState=function(t){return gt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return gt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return gt.current.useTransition()};me.version="18.2.0";ng.exports=me;var b=ng.exports;const c1=Q_(b),d1=G_({__proto__:null,default:c1},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h1=b,f1=Symbol.for("react.element"),p1=Symbol.for("react.fragment"),m1=Object.prototype.hasOwnProperty,g1=h1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y1={key:!0,ref:!0,__self:!0,__source:!0};function cg(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)m1.call(e,r)&&!y1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:f1,type:t,key:i,ref:o,props:s,_owner:g1.current}}Tl.Fragment=p1;Tl.jsx=cg;Tl.jsxs=cg;tg.exports=Tl;var m=tg.exports,rc={},dg={exports:{}},jt={},hg={exports:{}},fg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,V){var L=F.length;F.push(V);e:for(;0<L;){var J=L-1>>>1,K=F[J];if(0<s(K,V))F[J]=V,F[L]=K,L=J;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var V=F[0],L=F.pop();if(L!==V){F[0]=L;e:for(var J=0,K=F.length,ue=K>>>1;J<ue;){var ge=2*(J+1)-1,be=F[ge],Ee=ge+1,Ke=F[Ee];if(0>s(be,L))Ee<K&&0>s(Ke,be)?(F[J]=Ke,F[Ee]=L,J=Ee):(F[J]=be,F[ge]=L,J=ge);else if(Ee<K&&0>s(Ke,L))F[J]=Ke,F[Ee]=L,J=Ee;else break e}}return V}function s(F,V){var L=F.sortIndex-V.sortIndex;return L!==0?L:F.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,c=null,h=3,w=!1,_=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(F){for(var V=n(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=F)r(u),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(u)}}function C(F){if(v=!1,y(F),!_)if(n(l)!==null)_=!0,q(T);else{var V=n(u);V!==null&&ee(C,V.startTime-F)}}function T(F,V){_=!1,v&&(v=!1,p(B),B=-1),w=!0;var L=h;try{for(y(V),c=n(l);c!==null&&(!(c.expirationTime>V)||F&&!P());){var J=c.callback;if(typeof J=="function"){c.callback=null,h=c.priorityLevel;var K=J(c.expirationTime<=V);V=t.unstable_now(),typeof K=="function"?c.callback=K:c===n(l)&&r(l),y(V)}else r(l);c=n(l)}if(c!==null)var ue=!0;else{var ge=n(u);ge!==null&&ee(C,ge.startTime-V),ue=!1}return ue}finally{c=null,h=L,w=!1}}var N=!1,D=null,B=-1,te=5,R=-1;function P(){return!(t.unstable_now()-R<te)}function x(){if(D!==null){var F=t.unstable_now();R=F;var V=!0;try{V=D(!0,F)}finally{V?M():(N=!1,D=null)}}else N=!1}var M;if(typeof f=="function")M=function(){f(x)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,G=U.port2;U.port1.onmessage=x,M=function(){G.postMessage(null)}}else M=function(){E(x,0)};function q(F){D=F,N||(N=!0,M())}function ee(F,V){B=E(function(){F(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){_||w||(_=!0,q(T))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var L=h;h=V;try{return F()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,V){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var L=h;h=F;try{return V()}finally{h=L}},t.unstable_scheduleCallback=function(F,V,L){var J=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?J+L:J):L=J,F){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=L+K,F={id:d++,callback:V,priorityLevel:F,startTime:L,expirationTime:K,sortIndex:-1},L>J?(F.sortIndex=L,e(u,F),n(l)===null&&F===n(u)&&(v?(p(B),B=-1):v=!0,ee(C,L-J))):(F.sortIndex=K,e(l,F),_||w||(_=!0,q(T))),F},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(F){var V=h;return function(){var L=h;h=V;try{return F.apply(this,arguments)}finally{h=L}}}})(fg);hg.exports=fg;var v1=hg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg=b,Ft=v1;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mg=new Set,Yi={};function as(t,e){$s(t,e),$s(t+"Capture",e)}function $s(t,e){for(Yi[t]=e,t=0;t<e.length;t++)mg.add(e[t])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sc=Object.prototype.hasOwnProperty,_1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ff={},pf={};function w1(t){return sc.call(pf,t)?!0:sc.call(ff,t)?!1:_1.test(t)?pf[t]=!0:(ff[t]=!0,!1)}function S1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function k1(t,e,n,r){if(e===null||typeof e>"u"||S1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ed=/[\-:]([a-z])/g;function Id(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ed,Id);ot[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ed,Id);ot[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ed,Id);ot[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Td(t,e,n,r){var s=ot.hasOwnProperty(e)?ot[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(k1(e,n,s,r)&&(n=null),r||s===null?w1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var zn=pg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ho=Symbol.for("react.element"),ms=Symbol.for("react.portal"),gs=Symbol.for("react.fragment"),xd=Symbol.for("react.strict_mode"),ic=Symbol.for("react.profiler"),gg=Symbol.for("react.provider"),yg=Symbol.for("react.context"),bd=Symbol.for("react.forward_ref"),oc=Symbol.for("react.suspense"),ac=Symbol.for("react.suspense_list"),Pd=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),vg=Symbol.for("react.offscreen"),mf=Symbol.iterator;function gi(t){return t===null||typeof t!="object"?null:(t=mf&&t[mf]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,uu;function Ni(t){if(uu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uu=e&&e[1]||""}return`
`+uu+t}var cu=!1;function du(t,e){if(!t||cu)return"";cu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{cu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ni(t):""}function C1(t){switch(t.tag){case 5:return Ni(t.type);case 16:return Ni("Lazy");case 13:return Ni("Suspense");case 19:return Ni("SuspenseList");case 0:case 2:case 15:return t=du(t.type,!1),t;case 11:return t=du(t.type.render,!1),t;case 1:return t=du(t.type,!0),t;default:return""}}function lc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gs:return"Fragment";case ms:return"Portal";case ic:return"Profiler";case xd:return"StrictMode";case oc:return"Suspense";case ac:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yg:return(t.displayName||"Context")+".Consumer";case gg:return(t._context.displayName||"Context")+".Provider";case bd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pd:return e=t.displayName||null,e!==null?e:lc(t.type)||"Memo";case Jn:e=t._payload,t=t._init;try{return lc(t(e))}catch{}}return null}function E1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lc(e);case 8:return e===xd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Er(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _g(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function I1(t){var e=_g(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vo(t){t._valueTracker||(t._valueTracker=I1(t))}function wg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_g(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ra(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function uc(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Er(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sg(t,e){e=e.checked,e!=null&&Td(t,"checked",e,!1)}function cc(t,e){Sg(t,e);var n=Er(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dc(t,e.type,n):e.hasOwnProperty("defaultValue")&&dc(t,e.type,Er(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dc(t,e,n){(e!=="number"||Ra(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ri=Array.isArray;function Ps(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Er(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function hc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Ri(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Er(n)}}function kg(t,e){var n=Er(e.value),r=Er(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _f(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Cg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Cg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qo,Eg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qo=qo||document.createElement("div"),qo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},T1=["Webkit","ms","Moz","O"];Object.keys(Li).forEach(function(t){T1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Li[e]=Li[t]})});function Ig(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Li.hasOwnProperty(t)&&Li[t]?(""+e).trim():e+"px"}function Tg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ig(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var x1=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pc(t,e){if(e){if(x1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function mc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gc=null;function Nd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yc=null,Ns=null,Rs=null;function wf(t){if(t=Ro(t)){if(typeof yc!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Rl(e),yc(t.stateNode,t.type,e))}}function xg(t){Ns?Rs?Rs.push(t):Rs=[t]:Ns=t}function bg(){if(Ns){var t=Ns,e=Rs;if(Rs=Ns=null,wf(t),e)for(t=0;t<e.length;t++)wf(e[t])}}function Pg(t,e){return t(e)}function Ng(){}var hu=!1;function Rg(t,e,n){if(hu)return t(e,n);hu=!0;try{return Pg(t,e,n)}finally{hu=!1,(Ns!==null||Rs!==null)&&(Ng(),bg())}}function Ji(t,e){var n=t.stateNode;if(n===null)return null;var r=Rl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var vc=!1;if(Mn)try{var yi={};Object.defineProperty(yi,"passive",{get:function(){vc=!0}}),window.addEventListener("test",yi,yi),window.removeEventListener("test",yi,yi)}catch{vc=!1}function b1(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Di=!1,Aa=null,Oa=!1,_c=null,P1={onError:function(t){Di=!0,Aa=t}};function N1(t,e,n,r,s,i,o,a,l){Di=!1,Aa=null,b1.apply(P1,arguments)}function R1(t,e,n,r,s,i,o,a,l){if(N1.apply(this,arguments),Di){if(Di){var u=Aa;Di=!1,Aa=null}else throw Error(z(198));Oa||(Oa=!0,_c=u)}}function ls(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ag(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sf(t){if(ls(t)!==t)throw Error(z(188))}function A1(t){var e=t.alternate;if(!e){if(e=ls(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Sf(s),t;if(i===r)return Sf(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Og(t){return t=A1(t),t!==null?Mg(t):null}function Mg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mg(t);if(e!==null)return e;t=t.sibling}return null}var Lg=Ft.unstable_scheduleCallback,kf=Ft.unstable_cancelCallback,O1=Ft.unstable_shouldYield,M1=Ft.unstable_requestPaint,$e=Ft.unstable_now,L1=Ft.unstable_getCurrentPriorityLevel,Rd=Ft.unstable_ImmediatePriority,Dg=Ft.unstable_UserBlockingPriority,Ma=Ft.unstable_NormalPriority,D1=Ft.unstable_LowPriority,Fg=Ft.unstable_IdlePriority,xl=null,gn=null;function F1(t){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(xl,t,void 0,(t.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:$1,j1=Math.log,U1=Math.LN2;function $1(t){return t>>>=0,t===0?32:31-(j1(t)/U1|0)|0}var Go=64,Qo=4194304;function Ai(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function La(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ai(a):(i&=o,i!==0&&(r=Ai(i)))}else o=n&~s,o!==0?r=Ai(o):i!==0&&(r=Ai(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-sn(e),s=1<<n,r|=t[n],e&=~s;return r}function B1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-sn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=B1(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function wc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jg(){var t=Go;return Go<<=1,!(Go&4194240)&&(Go=64),t}function fu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Po(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sn(e),t[e]=n}function W1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-sn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ad(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-sn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _e=0;function Ug(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $g,Od,Bg,zg,Wg,Sc=!1,Ko=[],cr=null,dr=null,hr=null,Zi=new Map,eo=new Map,er=[],H1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cf(t,e){switch(t){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Zi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":eo.delete(e.pointerId)}}function vi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ro(e),e!==null&&Od(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function V1(t,e,n,r,s){switch(e){case"focusin":return cr=vi(cr,t,e,n,r,s),!0;case"dragenter":return dr=vi(dr,t,e,n,r,s),!0;case"mouseover":return hr=vi(hr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Zi.set(i,vi(Zi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,eo.set(i,vi(eo.get(i)||null,t,e,n,r,s)),!0}return!1}function Hg(t){var e=Br(t.target);if(e!==null){var n=ls(e);if(n!==null){if(e=n.tag,e===13){if(e=Ag(n),e!==null){t.blockedOn=e,Wg(t.priority,function(){Bg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ga(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);gc=r,n.target.dispatchEvent(r),gc=null}else return e=Ro(n),e!==null&&Od(e),t.blockedOn=n,!1;e.shift()}return!0}function Ef(t,e,n){ga(t)&&n.delete(e)}function q1(){Sc=!1,cr!==null&&ga(cr)&&(cr=null),dr!==null&&ga(dr)&&(dr=null),hr!==null&&ga(hr)&&(hr=null),Zi.forEach(Ef),eo.forEach(Ef)}function _i(t,e){t.blockedOn===e&&(t.blockedOn=null,Sc||(Sc=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,q1)))}function to(t){function e(s){return _i(s,t)}if(0<Ko.length){_i(Ko[0],t);for(var n=1;n<Ko.length;n++){var r=Ko[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cr!==null&&_i(cr,t),dr!==null&&_i(dr,t),hr!==null&&_i(hr,t),Zi.forEach(e),eo.forEach(e),n=0;n<er.length;n++)r=er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<er.length&&(n=er[0],n.blockedOn===null);)Hg(n),n.blockedOn===null&&er.shift()}var As=zn.ReactCurrentBatchConfig,Da=!0;function G1(t,e,n,r){var s=_e,i=As.transition;As.transition=null;try{_e=1,Md(t,e,n,r)}finally{_e=s,As.transition=i}}function Q1(t,e,n,r){var s=_e,i=As.transition;As.transition=null;try{_e=4,Md(t,e,n,r)}finally{_e=s,As.transition=i}}function Md(t,e,n,r){if(Da){var s=kc(t,e,n,r);if(s===null)Cu(t,e,r,Fa,n),Cf(t,r);else if(V1(s,t,e,n,r))r.stopPropagation();else if(Cf(t,r),e&4&&-1<H1.indexOf(t)){for(;s!==null;){var i=Ro(s);if(i!==null&&$g(i),i=kc(t,e,n,r),i===null&&Cu(t,e,r,Fa,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Cu(t,e,r,null,n)}}var Fa=null;function kc(t,e,n,r){if(Fa=null,t=Nd(r),t=Br(t),t!==null)if(e=ls(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ag(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fa=t,null}function Vg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(L1()){case Rd:return 1;case Dg:return 4;case Ma:case D1:return 16;case Fg:return 536870912;default:return 16}default:return 16}}var or=null,Ld=null,ya=null;function qg(){if(ya)return ya;var t,e=Ld,n=e.length,r,s="value"in or?or.value:or.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ya=s.slice(t,1<r?1-r:void 0)}function va(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yo(){return!0}function If(){return!1}function Ut(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Yo:If,this.isPropagationStopped=If,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yo)},persist:function(){},isPersistent:Yo}),e}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dd=Ut(Zs),No=De({},Zs,{view:0,detail:0}),K1=Ut(No),pu,mu,wi,bl=De({},No,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wi&&(wi&&t.type==="mousemove"?(pu=t.screenX-wi.screenX,mu=t.screenY-wi.screenY):mu=pu=0,wi=t),pu)},movementY:function(t){return"movementY"in t?t.movementY:mu}}),Tf=Ut(bl),Y1=De({},bl,{dataTransfer:0}),X1=Ut(Y1),J1=De({},No,{relatedTarget:0}),gu=Ut(J1),Z1=De({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),ew=Ut(Z1),tw=De({},Zs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nw=Ut(tw),rw=De({},Zs,{data:0}),xf=Ut(rw),sw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ow={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ow[t])?!!e[t]:!1}function Fd(){return aw}var lw=De({},No,{key:function(t){if(t.key){var e=sw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=va(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fd,charCode:function(t){return t.type==="keypress"?va(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?va(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uw=Ut(lw),cw=De({},bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bf=Ut(cw),dw=De({},No,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fd}),hw=Ut(dw),fw=De({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),pw=Ut(fw),mw=De({},bl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gw=Ut(mw),yw=[9,13,27,32],jd=Mn&&"CompositionEvent"in window,Fi=null;Mn&&"documentMode"in document&&(Fi=document.documentMode);var vw=Mn&&"TextEvent"in window&&!Fi,Gg=Mn&&(!jd||Fi&&8<Fi&&11>=Fi),Pf=" ",Nf=!1;function Qg(t,e){switch(t){case"keyup":return yw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ys=!1;function _w(t,e){switch(t){case"compositionend":return Kg(e);case"keypress":return e.which!==32?null:(Nf=!0,Pf);case"textInput":return t=e.data,t===Pf&&Nf?null:t;default:return null}}function ww(t,e){if(ys)return t==="compositionend"||!jd&&Qg(t,e)?(t=qg(),ya=Ld=or=null,ys=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gg&&e.locale!=="ko"?null:e.data;default:return null}}var Sw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Sw[t.type]:e==="textarea"}function Yg(t,e,n,r){xg(r),e=ja(e,"onChange"),0<e.length&&(n=new Dd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ji=null,no=null;function kw(t){a0(t,0)}function Pl(t){var e=ws(t);if(wg(e))return t}function Cw(t,e){if(t==="change")return e}var Xg=!1;if(Mn){var yu;if(Mn){var vu="oninput"in document;if(!vu){var Af=document.createElement("div");Af.setAttribute("oninput","return;"),vu=typeof Af.oninput=="function"}yu=vu}else yu=!1;Xg=yu&&(!document.documentMode||9<document.documentMode)}function Of(){ji&&(ji.detachEvent("onpropertychange",Jg),no=ji=null)}function Jg(t){if(t.propertyName==="value"&&Pl(no)){var e=[];Yg(e,no,t,Nd(t)),Rg(kw,e)}}function Ew(t,e,n){t==="focusin"?(Of(),ji=e,no=n,ji.attachEvent("onpropertychange",Jg)):t==="focusout"&&Of()}function Iw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pl(no)}function Tw(t,e){if(t==="click")return Pl(e)}function xw(t,e){if(t==="input"||t==="change")return Pl(e)}function bw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ln=typeof Object.is=="function"?Object.is:bw;function ro(t,e){if(ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!sc.call(e,s)||!ln(t[s],e[s]))return!1}return!0}function Mf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Lf(t,e){var n=Mf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Mf(n)}}function Zg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function e0(){for(var t=window,e=Ra();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ra(t.document)}return e}function Ud(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Pw(t){var e=e0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Zg(n.ownerDocument.documentElement,n)){if(r!==null&&Ud(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Lf(n,i);var o=Lf(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Nw=Mn&&"documentMode"in document&&11>=document.documentMode,vs=null,Cc=null,Ui=null,Ec=!1;function Df(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ec||vs==null||vs!==Ra(r)||(r=vs,"selectionStart"in r&&Ud(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ui&&ro(Ui,r)||(Ui=r,r=ja(Cc,"onSelect"),0<r.length&&(e=new Dd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=vs)))}function Xo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _s={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionend:Xo("Transition","TransitionEnd")},_u={},t0={};Mn&&(t0=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function Nl(t){if(_u[t])return _u[t];if(!_s[t])return t;var e=_s[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in t0)return _u[t]=e[n];return t}var n0=Nl("animationend"),r0=Nl("animationiteration"),s0=Nl("animationstart"),i0=Nl("transitionend"),o0=new Map,Ff="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(t,e){o0.set(t,e),as(e,[t])}for(var wu=0;wu<Ff.length;wu++){var Su=Ff[wu],Rw=Su.toLowerCase(),Aw=Su[0].toUpperCase()+Su.slice(1);Rr(Rw,"on"+Aw)}Rr(n0,"onAnimationEnd");Rr(r0,"onAnimationIteration");Rr(s0,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(i0,"onTransitionEnd");$s("onMouseEnter",["mouseout","mouseover"]);$s("onMouseLeave",["mouseout","mouseover"]);$s("onPointerEnter",["pointerout","pointerover"]);$s("onPointerLeave",["pointerout","pointerover"]);as("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));as("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));as("onBeforeInput",["compositionend","keypress","textInput","paste"]);as("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));as("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));as("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ow=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oi));function jf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,R1(r,e,void 0,t),t.currentTarget=null}function a0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;jf(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;jf(s,a,u),i=l}}}if(Oa)throw t=_c,Oa=!1,_c=null,t}function Ne(t,e){var n=e[Pc];n===void 0&&(n=e[Pc]=new Set);var r=t+"__bubble";n.has(r)||(l0(e,t,2,!1),n.add(r))}function ku(t,e,n){var r=0;e&&(r|=4),l0(n,t,r,e)}var Jo="_reactListening"+Math.random().toString(36).slice(2);function so(t){if(!t[Jo]){t[Jo]=!0,mg.forEach(function(n){n!=="selectionchange"&&(Ow.has(n)||ku(n,!1,t),ku(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jo]||(e[Jo]=!0,ku("selectionchange",!1,e))}}function l0(t,e,n,r){switch(Vg(e)){case 1:var s=G1;break;case 4:s=Q1;break;default:s=Md}n=s.bind(null,e,n,t),s=void 0,!vc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Cu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Br(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Rg(function(){var u=i,d=Nd(n),c=[];e:{var h=o0.get(t);if(h!==void 0){var w=Dd,_=t;switch(t){case"keypress":if(va(n)===0)break e;case"keydown":case"keyup":w=uw;break;case"focusin":_="focus",w=gu;break;case"focusout":_="blur",w=gu;break;case"beforeblur":case"afterblur":w=gu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Tf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=X1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=hw;break;case n0:case r0:case s0:w=ew;break;case i0:w=pw;break;case"scroll":w=K1;break;case"wheel":w=gw;break;case"copy":case"cut":case"paste":w=nw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=bf}var v=(e&4)!==0,E=!v&&t==="scroll",p=v?h!==null?h+"Capture":null:h;v=[];for(var f=u,y;f!==null;){y=f;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,p!==null&&(C=Ji(f,p),C!=null&&v.push(io(f,C,y)))),E)break;f=f.return}0<v.length&&(h=new w(h,_,null,n,d),c.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",h&&n!==gc&&(_=n.relatedTarget||n.fromElement)&&(Br(_)||_[Ln]))break e;if((w||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,w?(_=n.relatedTarget||n.toElement,w=u,_=_?Br(_):null,_!==null&&(E=ls(_),_!==E||_.tag!==5&&_.tag!==6)&&(_=null)):(w=null,_=u),w!==_)){if(v=Tf,C="onMouseLeave",p="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(v=bf,C="onPointerLeave",p="onPointerEnter",f="pointer"),E=w==null?h:ws(w),y=_==null?h:ws(_),h=new v(C,f+"leave",w,n,d),h.target=E,h.relatedTarget=y,C=null,Br(d)===u&&(v=new v(p,f+"enter",_,n,d),v.target=y,v.relatedTarget=E,C=v),E=C,w&&_)t:{for(v=w,p=_,f=0,y=v;y;y=ds(y))f++;for(y=0,C=p;C;C=ds(C))y++;for(;0<f-y;)v=ds(v),f--;for(;0<y-f;)p=ds(p),y--;for(;f--;){if(v===p||p!==null&&v===p.alternate)break t;v=ds(v),p=ds(p)}v=null}else v=null;w!==null&&Uf(c,h,w,v,!1),_!==null&&E!==null&&Uf(c,E,_,v,!0)}}e:{if(h=u?ws(u):window,w=h.nodeName&&h.nodeName.toLowerCase(),w==="select"||w==="input"&&h.type==="file")var T=Cw;else if(Rf(h))if(Xg)T=xw;else{T=Iw;var N=Ew}else(w=h.nodeName)&&w.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=Tw);if(T&&(T=T(t,u))){Yg(c,T,n,d);break e}N&&N(t,h,u),t==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&dc(h,"number",h.value)}switch(N=u?ws(u):window,t){case"focusin":(Rf(N)||N.contentEditable==="true")&&(vs=N,Cc=u,Ui=null);break;case"focusout":Ui=Cc=vs=null;break;case"mousedown":Ec=!0;break;case"contextmenu":case"mouseup":case"dragend":Ec=!1,Df(c,n,d);break;case"selectionchange":if(Nw)break;case"keydown":case"keyup":Df(c,n,d)}var D;if(jd)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else ys?Qg(t,n)&&(B="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(Gg&&n.locale!=="ko"&&(ys||B!=="onCompositionStart"?B==="onCompositionEnd"&&ys&&(D=qg()):(or=d,Ld="value"in or?or.value:or.textContent,ys=!0)),N=ja(u,B),0<N.length&&(B=new xf(B,t,null,n,d),c.push({event:B,listeners:N}),D?B.data=D:(D=Kg(n),D!==null&&(B.data=D)))),(D=vw?_w(t,n):ww(t,n))&&(u=ja(u,"onBeforeInput"),0<u.length&&(d=new xf("onBeforeInput","beforeinput",null,n,d),c.push({event:d,listeners:u}),d.data=D))}a0(c,e)})}function io(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ja(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ji(t,n),i!=null&&r.unshift(io(t,i,s)),i=Ji(t,e),i!=null&&r.push(io(t,i,s))),t=t.return}return r}function ds(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Uf(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Ji(n,i),l!=null&&o.unshift(io(n,l,a))):s||(l=Ji(n,i),l!=null&&o.push(io(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Mw=/\r\n?/g,Lw=/\u0000|\uFFFD/g;function $f(t){return(typeof t=="string"?t:""+t).replace(Mw,`
`).replace(Lw,"")}function Zo(t,e,n){if(e=$f(e),$f(t)!==e&&n)throw Error(z(425))}function Ua(){}var Ic=null,Tc=null;function xc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bc=typeof setTimeout=="function"?setTimeout:void 0,Dw=typeof clearTimeout=="function"?clearTimeout:void 0,Bf=typeof Promise=="function"?Promise:void 0,Fw=typeof queueMicrotask=="function"?queueMicrotask:typeof Bf<"u"?function(t){return Bf.resolve(null).then(t).catch(jw)}:bc;function jw(t){setTimeout(function(){throw t})}function Eu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),to(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);to(e)}function fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ei=Math.random().toString(36).slice(2),pn="__reactFiber$"+ei,oo="__reactProps$"+ei,Ln="__reactContainer$"+ei,Pc="__reactEvents$"+ei,Uw="__reactListeners$"+ei,$w="__reactHandles$"+ei;function Br(t){var e=t[pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ln]||n[pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zf(t);t!==null;){if(n=t[pn])return n;t=zf(t)}return e}t=n,n=t.parentNode}return null}function Ro(t){return t=t[pn]||t[Ln],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Rl(t){return t[oo]||null}var Nc=[],Ss=-1;function Ar(t){return{current:t}}function Ae(t){0>Ss||(t.current=Nc[Ss],Nc[Ss]=null,Ss--)}function xe(t,e){Ss++,Nc[Ss]=t.current,t.current=e}var Ir={},dt=Ar(Ir),Ct=Ar(!1),Xr=Ir;function Bs(t,e){var n=t.type.contextTypes;if(!n)return Ir;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Et(t){return t=t.childContextTypes,t!=null}function $a(){Ae(Ct),Ae(dt)}function Wf(t,e,n){if(dt.current!==Ir)throw Error(z(168));xe(dt,e),xe(Ct,n)}function u0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,E1(t)||"Unknown",s));return De({},n,r)}function Ba(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ir,Xr=dt.current,xe(dt,t),xe(Ct,Ct.current),!0}function Hf(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=u0(t,e,Xr),r.__reactInternalMemoizedMergedChildContext=t,Ae(Ct),Ae(dt),xe(dt,t)):Ae(Ct),xe(Ct,n)}var Cn=null,Al=!1,Iu=!1;function c0(t){Cn===null?Cn=[t]:Cn.push(t)}function Bw(t){Al=!0,c0(t)}function Or(){if(!Iu&&Cn!==null){Iu=!0;var t=0,e=_e;try{var n=Cn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Cn=null,Al=!1}catch(s){throw Cn!==null&&(Cn=Cn.slice(t+1)),Lg(Rd,Or),s}finally{_e=e,Iu=!1}}return null}var ks=[],Cs=0,za=null,Wa=0,Wt=[],Ht=0,Jr=null,In=1,Tn="";function Fr(t,e){ks[Cs++]=Wa,ks[Cs++]=za,za=t,Wa=e}function d0(t,e,n){Wt[Ht++]=In,Wt[Ht++]=Tn,Wt[Ht++]=Jr,Jr=t;var r=In;t=Tn;var s=32-sn(r)-1;r&=~(1<<s),n+=1;var i=32-sn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,In=1<<32-sn(e)+s|n<<s|r,Tn=i+t}else In=1<<i|n<<s|r,Tn=t}function $d(t){t.return!==null&&(Fr(t,1),d0(t,1,0))}function Bd(t){for(;t===za;)za=ks[--Cs],ks[Cs]=null,Wa=ks[--Cs],ks[Cs]=null;for(;t===Jr;)Jr=Wt[--Ht],Wt[Ht]=null,Tn=Wt[--Ht],Wt[Ht]=null,In=Wt[--Ht],Wt[Ht]=null}var Dt=null,Lt=null,Oe=!1,Zt=null;function h0(t,e){var n=Vt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Vf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,Lt=fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Jr!==null?{id:In,overflow:Tn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,Lt=null,!0):!1;default:return!1}}function Rc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ac(t){if(Oe){var e=Lt;if(e){var n=e;if(!Vf(t,e)){if(Rc(t))throw Error(z(418));e=fr(n.nextSibling);var r=Dt;e&&Vf(t,e)?h0(r,n):(t.flags=t.flags&-4097|2,Oe=!1,Dt=t)}}else{if(Rc(t))throw Error(z(418));t.flags=t.flags&-4097|2,Oe=!1,Dt=t}}}function qf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function ea(t){if(t!==Dt)return!1;if(!Oe)return qf(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xc(t.type,t.memoizedProps)),e&&(e=Lt)){if(Rc(t))throw f0(),Error(z(418));for(;e;)h0(t,e),e=fr(e.nextSibling)}if(qf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Dt?fr(t.stateNode.nextSibling):null;return!0}function f0(){for(var t=Lt;t;)t=fr(t.nextSibling)}function zs(){Lt=Dt=null,Oe=!1}function zd(t){Zt===null?Zt=[t]:Zt.push(t)}var zw=zn.ReactCurrentBatchConfig;function Xt(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Ha=Ar(null),Va=null,Es=null,Wd=null;function Hd(){Wd=Es=Va=null}function Vd(t){var e=Ha.current;Ae(Ha),t._currentValue=e}function Oc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Os(t,e){Va=t,Wd=Es=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(St=!0),t.firstContext=null)}function Gt(t){var e=t._currentValue;if(Wd!==t)if(t={context:t,memoizedValue:e,next:null},Es===null){if(Va===null)throw Error(z(308));Es=t,Va.dependencies={lanes:0,firstContext:t}}else Es=Es.next=t;return e}var zr=null;function qd(t){zr===null?zr=[t]:zr.push(t)}function p0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,qd(e)):(n.next=s.next,s.next=n),e.interleaved=n,Dn(t,r)}function Dn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zn=!1;function Gd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function An(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Dn(t,n)}return s=r.interleaved,s===null?(e.next=e,qd(r)):(e.next=s.next,s.next=e),r.interleaved=e,Dn(t,n)}function _a(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ad(t,n)}}function Gf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qa(t,e,n,r){var s=t.updateQueue;Zn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var c=s.baseState;o=0,d=u=l=null,a=i;do{var h=a.lane,w=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,v=a;switch(h=e,w=n,v.tag){case 1:if(_=v.payload,typeof _=="function"){c=_.call(w,c,h);break e}c=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,h=typeof _=="function"?_.call(w,c,h):_,h==null)break e;c=De({},c,h);break e;case 2:Zn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else w={eventTime:w,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=w,l=c):d=d.next=w,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(l=c),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);es|=o,t.lanes=o,t.memoizedState=c}}function Qf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var g0=new pg.Component().refs;function Mc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ol={isMounted:function(t){return(t=t._reactInternals)?ls(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),s=gr(t),i=An(r,s);i.payload=e,n!=null&&(i.callback=n),e=pr(t,i,s),e!==null&&(on(e,t,s,r),_a(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),s=gr(t),i=An(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=pr(t,i,s),e!==null&&(on(e,t,s,r),_a(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=gr(t),s=An(n,r);s.tag=2,e!=null&&(s.callback=e),e=pr(t,s,r),e!==null&&(on(e,t,r,n),_a(e,t,r))}};function Kf(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ro(n,r)||!ro(s,i):!0}function y0(t,e,n){var r=!1,s=Ir,i=e.contextType;return typeof i=="object"&&i!==null?i=Gt(i):(s=Et(e)?Xr:dt.current,r=e.contextTypes,i=(r=r!=null)?Bs(t,s):Ir),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ol,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Yf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ol.enqueueReplaceState(e,e.state,null)}function Lc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=g0,Gd(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Gt(i):(i=Et(e)?Xr:dt.current,s.context=Bs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Mc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ol.enqueueReplaceState(s,s.state,null),qa(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Si(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===g0&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function ta(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xf(t){var e=t._init;return e(t._payload)}function v0(t){function e(p,f){if(t){var y=p.deletions;y===null?(p.deletions=[f],p.flags|=16):y.push(f)}}function n(p,f){if(!t)return null;for(;f!==null;)e(p,f),f=f.sibling;return null}function r(p,f){for(p=new Map;f!==null;)f.key!==null?p.set(f.key,f):p.set(f.index,f),f=f.sibling;return p}function s(p,f){return p=yr(p,f),p.index=0,p.sibling=null,p}function i(p,f,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<f?(p.flags|=2,f):y):(p.flags|=2,f)):(p.flags|=1048576,f)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,f,y,C){return f===null||f.tag!==6?(f=Au(y,p.mode,C),f.return=p,f):(f=s(f,y),f.return=p,f)}function l(p,f,y,C){var T=y.type;return T===gs?d(p,f,y.props.children,C,y.key):f!==null&&(f.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Jn&&Xf(T)===f.type)?(C=s(f,y.props),C.ref=Si(p,f,y),C.return=p,C):(C=Ia(y.type,y.key,y.props,null,p.mode,C),C.ref=Si(p,f,y),C.return=p,C)}function u(p,f,y,C){return f===null||f.tag!==4||f.stateNode.containerInfo!==y.containerInfo||f.stateNode.implementation!==y.implementation?(f=Ou(y,p.mode,C),f.return=p,f):(f=s(f,y.children||[]),f.return=p,f)}function d(p,f,y,C,T){return f===null||f.tag!==7?(f=Kr(y,p.mode,C,T),f.return=p,f):(f=s(f,y),f.return=p,f)}function c(p,f,y){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Au(""+f,p.mode,y),f.return=p,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ho:return y=Ia(f.type,f.key,f.props,null,p.mode,y),y.ref=Si(p,null,f),y.return=p,y;case ms:return f=Ou(f,p.mode,y),f.return=p,f;case Jn:var C=f._init;return c(p,C(f._payload),y)}if(Ri(f)||gi(f))return f=Kr(f,p.mode,y,null),f.return=p,f;ta(p,f)}return null}function h(p,f,y,C){var T=f!==null?f.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:a(p,f,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ho:return y.key===T?l(p,f,y,C):null;case ms:return y.key===T?u(p,f,y,C):null;case Jn:return T=y._init,h(p,f,T(y._payload),C)}if(Ri(y)||gi(y))return T!==null?null:d(p,f,y,C,null);ta(p,y)}return null}function w(p,f,y,C,T){if(typeof C=="string"&&C!==""||typeof C=="number")return p=p.get(y)||null,a(f,p,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ho:return p=p.get(C.key===null?y:C.key)||null,l(f,p,C,T);case ms:return p=p.get(C.key===null?y:C.key)||null,u(f,p,C,T);case Jn:var N=C._init;return w(p,f,y,N(C._payload),T)}if(Ri(C)||gi(C))return p=p.get(y)||null,d(f,p,C,T,null);ta(f,C)}return null}function _(p,f,y,C){for(var T=null,N=null,D=f,B=f=0,te=null;D!==null&&B<y.length;B++){D.index>B?(te=D,D=null):te=D.sibling;var R=h(p,D,y[B],C);if(R===null){D===null&&(D=te);break}t&&D&&R.alternate===null&&e(p,D),f=i(R,f,B),N===null?T=R:N.sibling=R,N=R,D=te}if(B===y.length)return n(p,D),Oe&&Fr(p,B),T;if(D===null){for(;B<y.length;B++)D=c(p,y[B],C),D!==null&&(f=i(D,f,B),N===null?T=D:N.sibling=D,N=D);return Oe&&Fr(p,B),T}for(D=r(p,D);B<y.length;B++)te=w(D,p,B,y[B],C),te!==null&&(t&&te.alternate!==null&&D.delete(te.key===null?B:te.key),f=i(te,f,B),N===null?T=te:N.sibling=te,N=te);return t&&D.forEach(function(P){return e(p,P)}),Oe&&Fr(p,B),T}function v(p,f,y,C){var T=gi(y);if(typeof T!="function")throw Error(z(150));if(y=T.call(y),y==null)throw Error(z(151));for(var N=T=null,D=f,B=f=0,te=null,R=y.next();D!==null&&!R.done;B++,R=y.next()){D.index>B?(te=D,D=null):te=D.sibling;var P=h(p,D,R.value,C);if(P===null){D===null&&(D=te);break}t&&D&&P.alternate===null&&e(p,D),f=i(P,f,B),N===null?T=P:N.sibling=P,N=P,D=te}if(R.done)return n(p,D),Oe&&Fr(p,B),T;if(D===null){for(;!R.done;B++,R=y.next())R=c(p,R.value,C),R!==null&&(f=i(R,f,B),N===null?T=R:N.sibling=R,N=R);return Oe&&Fr(p,B),T}for(D=r(p,D);!R.done;B++,R=y.next())R=w(D,p,B,R.value,C),R!==null&&(t&&R.alternate!==null&&D.delete(R.key===null?B:R.key),f=i(R,f,B),N===null?T=R:N.sibling=R,N=R);return t&&D.forEach(function(x){return e(p,x)}),Oe&&Fr(p,B),T}function E(p,f,y,C){if(typeof y=="object"&&y!==null&&y.type===gs&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ho:e:{for(var T=y.key,N=f;N!==null;){if(N.key===T){if(T=y.type,T===gs){if(N.tag===7){n(p,N.sibling),f=s(N,y.props.children),f.return=p,p=f;break e}}else if(N.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Jn&&Xf(T)===N.type){n(p,N.sibling),f=s(N,y.props),f.ref=Si(p,N,y),f.return=p,p=f;break e}n(p,N);break}else e(p,N);N=N.sibling}y.type===gs?(f=Kr(y.props.children,p.mode,C,y.key),f.return=p,p=f):(C=Ia(y.type,y.key,y.props,null,p.mode,C),C.ref=Si(p,f,y),C.return=p,p=C)}return o(p);case ms:e:{for(N=y.key;f!==null;){if(f.key===N)if(f.tag===4&&f.stateNode.containerInfo===y.containerInfo&&f.stateNode.implementation===y.implementation){n(p,f.sibling),f=s(f,y.children||[]),f.return=p,p=f;break e}else{n(p,f);break}else e(p,f);f=f.sibling}f=Ou(y,p.mode,C),f.return=p,p=f}return o(p);case Jn:return N=y._init,E(p,f,N(y._payload),C)}if(Ri(y))return _(p,f,y,C);if(gi(y))return v(p,f,y,C);ta(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,f!==null&&f.tag===6?(n(p,f.sibling),f=s(f,y),f.return=p,p=f):(n(p,f),f=Au(y,p.mode,C),f.return=p,p=f),o(p)):n(p,f)}return E}var Ws=v0(!0),_0=v0(!1),Ao={},yn=Ar(Ao),ao=Ar(Ao),lo=Ar(Ao);function Wr(t){if(t===Ao)throw Error(z(174));return t}function Qd(t,e){switch(xe(lo,e),xe(ao,t),xe(yn,Ao),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fc(e,t)}Ae(yn),xe(yn,e)}function Hs(){Ae(yn),Ae(ao),Ae(lo)}function w0(t){Wr(lo.current);var e=Wr(yn.current),n=fc(e,t.type);e!==n&&(xe(ao,t),xe(yn,n))}function Kd(t){ao.current===t&&(Ae(yn),Ae(ao))}var Me=Ar(0);function Ga(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Tu=[];function Yd(){for(var t=0;t<Tu.length;t++)Tu[t]._workInProgressVersionPrimary=null;Tu.length=0}var wa=zn.ReactCurrentDispatcher,xu=zn.ReactCurrentBatchConfig,Zr=0,Le=null,We=null,Je=null,Qa=!1,$i=!1,uo=0,Ww=0;function at(){throw Error(z(321))}function Xd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ln(t[n],e[n]))return!1;return!0}function Jd(t,e,n,r,s,i){if(Zr=i,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wa.current=t===null||t.memoizedState===null?Gw:Qw,t=n(r,s),$i){i=0;do{if($i=!1,uo=0,25<=i)throw Error(z(301));i+=1,Je=We=null,e.updateQueue=null,wa.current=Kw,t=n(r,s)}while($i)}if(wa.current=Ka,e=We!==null&&We.next!==null,Zr=0,Je=We=Le=null,Qa=!1,e)throw Error(z(300));return t}function Zd(){var t=uo!==0;return uo=0,t}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Le.memoizedState=Je=t:Je=Je.next=t,Je}function Qt(){if(We===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Je===null?Le.memoizedState:Je.next;if(e!==null)Je=e,We=t;else{if(t===null)throw Error(z(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Je===null?Le.memoizedState=Je=t:Je=Je.next=t}return Je}function co(t,e){return typeof e=="function"?e(t):e}function bu(t){var e=Qt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=We,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((Zr&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,o=r):l=l.next=c,Le.lanes|=d,es|=d}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,ln(r,e.memoizedState)||(St=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Le.lanes|=i,es|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pu(t){var e=Qt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ln(i,e.memoizedState)||(St=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function S0(){}function k0(t,e){var n=Le,r=Qt(),s=e(),i=!ln(r.memoizedState,s);if(i&&(r.memoizedState=s,St=!0),r=r.queue,eh(I0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,ho(9,E0.bind(null,n,r,s,e),void 0,null),tt===null)throw Error(z(349));Zr&30||C0(n,e,s)}return s}function C0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function E0(t,e,n,r){e.value=n,e.getSnapshot=r,T0(e)&&x0(t)}function I0(t,e,n){return n(function(){T0(e)&&x0(t)})}function T0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ln(t,n)}catch{return!0}}function x0(t){var e=Dn(t,1);e!==null&&on(e,t,1,-1)}function Jf(t){var e=fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:t},e.queue=t,t=t.dispatch=qw.bind(null,Le,t),[e.memoizedState,t]}function ho(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function b0(){return Qt().memoizedState}function Sa(t,e,n,r){var s=fn();Le.flags|=t,s.memoizedState=ho(1|e,n,void 0,r===void 0?null:r)}function Ml(t,e,n,r){var s=Qt();r=r===void 0?null:r;var i=void 0;if(We!==null){var o=We.memoizedState;if(i=o.destroy,r!==null&&Xd(r,o.deps)){s.memoizedState=ho(e,n,i,r);return}}Le.flags|=t,s.memoizedState=ho(1|e,n,i,r)}function Zf(t,e){return Sa(8390656,8,t,e)}function eh(t,e){return Ml(2048,8,t,e)}function P0(t,e){return Ml(4,2,t,e)}function N0(t,e){return Ml(4,4,t,e)}function R0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function A0(t,e,n){return n=n!=null?n.concat([t]):null,Ml(4,4,R0.bind(null,e,t),n)}function th(){}function O0(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function M0(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function L0(t,e,n){return Zr&21?(ln(n,e)||(n=jg(),Le.lanes|=n,es|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,St=!0),t.memoizedState=n)}function Hw(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=xu.transition;xu.transition={};try{t(!1),e()}finally{_e=n,xu.transition=r}}function D0(){return Qt().memoizedState}function Vw(t,e,n){var r=gr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},F0(t))j0(e,n);else if(n=p0(t,e,n,r),n!==null){var s=pt();on(n,t,r,s),U0(n,e,r)}}function qw(t,e,n){var r=gr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(F0(t))j0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ln(a,o)){var l=e.interleaved;l===null?(s.next=s,qd(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=p0(t,e,s,r),n!==null&&(s=pt(),on(n,t,r,s),U0(n,e,r))}}function F0(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function j0(t,e){$i=Qa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function U0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ad(t,n)}}var Ka={readContext:Gt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},Gw={readContext:Gt,useCallback:function(t,e){return fn().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:Zf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sa(4194308,4,R0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sa(4,2,t,e)},useMemo:function(t,e){var n=fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Vw.bind(null,Le,t),[r.memoizedState,t]},useRef:function(t){var e=fn();return t={current:t},e.memoizedState=t},useState:Jf,useDebugValue:th,useDeferredValue:function(t){return fn().memoizedState=t},useTransition:function(){var t=Jf(!1),e=t[0];return t=Hw.bind(null,t[1]),fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Le,s=fn();if(Oe){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),tt===null)throw Error(z(349));Zr&30||C0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Zf(I0.bind(null,r,i,t),[t]),r.flags|=2048,ho(9,E0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=fn(),e=tt.identifierPrefix;if(Oe){var n=Tn,r=In;n=(r&~(1<<32-sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=uo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ww++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Qw={readContext:Gt,useCallback:O0,useContext:Gt,useEffect:eh,useImperativeHandle:A0,useInsertionEffect:P0,useLayoutEffect:N0,useMemo:M0,useReducer:bu,useRef:b0,useState:function(){return bu(co)},useDebugValue:th,useDeferredValue:function(t){var e=Qt();return L0(e,We.memoizedState,t)},useTransition:function(){var t=bu(co)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:S0,useSyncExternalStore:k0,useId:D0,unstable_isNewReconciler:!1},Kw={readContext:Gt,useCallback:O0,useContext:Gt,useEffect:eh,useImperativeHandle:A0,useInsertionEffect:P0,useLayoutEffect:N0,useMemo:M0,useReducer:Pu,useRef:b0,useState:function(){return Pu(co)},useDebugValue:th,useDeferredValue:function(t){var e=Qt();return We===null?e.memoizedState=t:L0(e,We.memoizedState,t)},useTransition:function(){var t=Pu(co)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:S0,useSyncExternalStore:k0,useId:D0,unstable_isNewReconciler:!1};function Vs(t,e){try{var n="",r=e;do n+=C1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Nu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Yw=typeof WeakMap=="function"?WeakMap:Map;function $0(t,e,n){n=An(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xa||(Xa=!0,qc=r),Dc(t,e)},n}function B0(t,e,n){n=An(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Dc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Dc(t,e),typeof r!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ep(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Yw;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=cS.bind(null,t,e,n),e.then(t,t))}function tp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function np(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=An(-1,1),e.tag=2,pr(n,e,1))),n.lanes|=1),t)}var Xw=zn.ReactCurrentOwner,St=!1;function ht(t,e,n,r){e.child=t===null?_0(e,null,n,r):Ws(e,t.child,n,r)}function rp(t,e,n,r,s){n=n.render;var i=e.ref;return Os(e,s),r=Jd(t,e,n,r,i,s),n=Zd(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fn(t,e,s)):(Oe&&n&&$d(e),e.flags|=1,ht(t,e,r,s),e.child)}function sp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!uh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,z0(t,e,i,r,s)):(t=Ia(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ro,n(o,r)&&t.ref===e.ref)return Fn(t,e,s)}return e.flags|=1,t=yr(i,r),t.ref=e.ref,t.return=e,e.child=t}function z0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ro(i,r)&&t.ref===e.ref)if(St=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(St=!0);else return e.lanes=t.lanes,Fn(t,e,s)}return Fc(t,e,n,r,s)}function W0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Ts,Ot),Ot|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(Ts,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,xe(Ts,Ot),Ot|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,xe(Ts,Ot),Ot|=r;return ht(t,e,s,n),e.child}function H0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fc(t,e,n,r,s){var i=Et(n)?Xr:dt.current;return i=Bs(e,i),Os(e,s),n=Jd(t,e,n,r,i,s),r=Zd(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fn(t,e,s)):(Oe&&r&&$d(e),e.flags|=1,ht(t,e,n,s),e.child)}function ip(t,e,n,r,s){if(Et(n)){var i=!0;Ba(e)}else i=!1;if(Os(e,s),e.stateNode===null)ka(t,e),y0(e,n,r),Lc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Gt(u):(u=Et(n)?Xr:dt.current,u=Bs(e,u));var d=n.getDerivedStateFromProps,c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Yf(e,o,r,u),Zn=!1;var h=e.memoizedState;o.state=h,qa(e,r,o,s),l=e.memoizedState,a!==r||h!==l||Ct.current||Zn?(typeof d=="function"&&(Mc(e,n,d,r),l=e.memoizedState),(a=Zn||Kf(e,n,a,r,h,l,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,m0(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Xt(e.type,a),o.props=u,c=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Gt(l):(l=Et(n)?Xr:dt.current,l=Bs(e,l));var w=n.getDerivedStateFromProps;(d=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||h!==l)&&Yf(e,o,r,l),Zn=!1,h=e.memoizedState,o.state=h,qa(e,r,o,s);var _=e.memoizedState;a!==c||h!==_||Ct.current||Zn?(typeof w=="function"&&(Mc(e,n,w,r),_=e.memoizedState),(u=Zn||Kf(e,n,u,r,h,_,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return jc(t,e,n,r,i,s)}function jc(t,e,n,r,s,i){H0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Hf(e,n,!1),Fn(t,e,i);r=e.stateNode,Xw.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ws(e,t.child,null,i),e.child=Ws(e,null,a,i)):ht(t,e,a,i),e.memoizedState=r.state,s&&Hf(e,n,!0),e.child}function V0(t){var e=t.stateNode;e.pendingContext?Wf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wf(t,e.context,!1),Qd(t,e.containerInfo)}function op(t,e,n,r,s){return zs(),zd(s),e.flags|=256,ht(t,e,n,r),e.child}var Uc={dehydrated:null,treeContext:null,retryLane:0};function $c(t){return{baseLanes:t,cachePool:null,transitions:null}}function q0(t,e,n){var r=e.pendingProps,s=Me.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),xe(Me,s&1),t===null)return Ac(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Fl(o,r,0,null),t=Kr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$c(n),e.memoizedState=Uc,t):nh(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Jw(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=yr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=yr(a,i):(i=Kr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?$c(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Uc,r}return i=t.child,t=i.sibling,r=yr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function nh(t,e){return e=Fl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function na(t,e,n,r){return r!==null&&zd(r),Ws(e,t.child,null,n),t=nh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Jw(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Nu(Error(z(422))),na(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Fl({mode:"visible",children:r.children},s,0,null),i=Kr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ws(e,t.child,null,o),e.child.memoizedState=$c(o),e.memoizedState=Uc,i);if(!(e.mode&1))return na(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(z(419)),r=Nu(i,r,void 0),na(t,e,o,r)}if(a=(o&t.childLanes)!==0,St||a){if(r=tt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Dn(t,s),on(r,t,s,-1))}return lh(),r=Nu(Error(z(421))),na(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=dS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Lt=fr(s.nextSibling),Dt=e,Oe=!0,Zt=null,t!==null&&(Wt[Ht++]=In,Wt[Ht++]=Tn,Wt[Ht++]=Jr,In=t.id,Tn=t.overflow,Jr=e),e=nh(e,r.children),e.flags|=4096,e)}function ap(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Oc(t.return,e,n)}function Ru(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function G0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ht(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ap(t,n,e);else if(t.tag===19)ap(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(Me,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ga(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ru(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ga(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ru(e,!0,n,null,i);break;case"together":Ru(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ka(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),es|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Zw(t,e,n){switch(e.tag){case 3:V0(e),zs();break;case 5:w0(e);break;case 1:Et(e.type)&&Ba(e);break;case 4:Qd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;xe(Ha,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?q0(t,e,n):(xe(Me,Me.current&1),t=Fn(t,e,n),t!==null?t.sibling:null);xe(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return G0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xe(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,W0(t,e,n)}return Fn(t,e,n)}var Q0,Bc,K0,Y0;Q0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bc=function(){};K0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Wr(yn.current);var i=null;switch(n){case"input":s=uc(t,s),r=uc(t,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=hc(t,s),r=hc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ua)}pc(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yi.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ne("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Y0=function(t,e,n,r){n!==r&&(e.flags|=4)};function ki(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function eS(t,e,n){var r=e.pendingProps;switch(Bd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return Et(e.type)&&$a(),lt(e),null;case 3:return r=e.stateNode,Hs(),Ae(Ct),Ae(dt),Yd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ea(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zt!==null&&(Kc(Zt),Zt=null))),Bc(t,e),lt(e),null;case 5:Kd(e);var s=Wr(lo.current);if(n=e.type,t!==null&&e.stateNode!=null)K0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return lt(e),null}if(t=Wr(yn.current),ea(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[pn]=e,r[oo]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<Oi.length;s++)Ne(Oi[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":gf(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":vf(r,i),Ne("invalid",r)}pc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Zo(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Zo(r.textContent,a,t),s=["children",""+a]):Yi.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":Vo(r),yf(r,i,!0);break;case"textarea":Vo(r),_f(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ua)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pn]=e,t[oo]=r,Q0(t,e,!1,!1),e.stateNode=t;e:{switch(o=mc(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<Oi.length;s++)Ne(Oi[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":gf(t,r),s=uc(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":vf(t,r),s=hc(t,r),Ne("invalid",t);break;default:s=r}pc(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Tg(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Eg(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Xi(t,l):typeof l=="number"&&Xi(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yi.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ne("scroll",t):l!=null&&Td(t,i,l,o))}switch(n){case"input":Vo(t),yf(t,r,!1);break;case"textarea":Vo(t),_f(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Er(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ps(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ps(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ua)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)Y0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Wr(lo.current),Wr(yn.current),ea(e)){if(r=e.stateNode,n=e.memoizedProps,r[pn]=e,(i=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:Zo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=e,e.stateNode=r}return lt(e),null;case 13:if(Ae(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&Lt!==null&&e.mode&1&&!(e.flags&128))f0(),zs(),e.flags|=98560,i=!1;else if(i=ea(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[pn]=e}else zs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),i=!1}else Zt!==null&&(Kc(Zt),Zt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?Ge===0&&(Ge=3):lh())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return Hs(),Bc(t,e),t===null&&so(e.stateNode.containerInfo),lt(e),null;case 10:return Vd(e.type._context),lt(e),null;case 17:return Et(e.type)&&$a(),lt(e),null;case 19:if(Ae(Me),i=e.memoizedState,i===null)return lt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ki(i,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ga(t),o!==null){for(e.flags|=128,ki(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(Me,Me.current&1|2),e.child}t=t.sibling}i.tail!==null&&$e()>qs&&(e.flags|=128,r=!0,ki(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ga(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ki(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Oe)return lt(e),null}else 2*$e()-i.renderingStartTime>qs&&n!==1073741824&&(e.flags|=128,r=!0,ki(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$e(),e.sibling=null,n=Me.current,xe(Me,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return ah(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ot&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function tS(t,e){switch(Bd(e),e.tag){case 1:return Et(e.type)&&$a(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hs(),Ae(Ct),Ae(dt),Yd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Kd(e),null;case 13:if(Ae(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));zs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Me),null;case 4:return Hs(),null;case 10:return Vd(e.type._context),null;case 22:case 23:return ah(),null;case 24:return null;default:return null}}var ra=!1,ut=!1,nS=typeof WeakSet=="function"?WeakSet:Set,X=null;function Is(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function zc(t,e,n){try{n()}catch(r){je(t,e,r)}}var lp=!1;function rS(t,e){if(Ic=Da,t=e0(),Ud(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,c=t,h=null;t:for(;;){for(var w;c!==n||s!==0&&c.nodeType!==3||(a=o+s),c!==i||r!==0&&c.nodeType!==3||(l=o+r),c.nodeType===3&&(o+=c.nodeValue.length),(w=c.firstChild)!==null;)h=c,c=w;for(;;){if(c===t)break t;if(h===n&&++u===s&&(a=o),h===i&&++d===r&&(l=o),(w=c.nextSibling)!==null)break;c=h,h=c.parentNode}c=w}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tc={focusedElem:t,selectionRange:n},Da=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,E=_.memoizedState,p=e.stateNode,f=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:Xt(e.type,v),E);p.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(C){je(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return _=lp,lp=!1,_}function Bi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&zc(e,n,i)}s=s.next}while(s!==r)}}function Ll(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function X0(t){var e=t.alternate;e!==null&&(t.alternate=null,X0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pn],delete e[oo],delete e[Pc],delete e[Uw],delete e[$w])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function J0(t){return t.tag===5||t.tag===3||t.tag===4}function up(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||J0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ua));else if(r!==4&&(t=t.child,t!==null))for(Hc(t,e,n),t=t.sibling;t!==null;)Hc(t,e,n),t=t.sibling}function Vc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Vc(t,e,n),t=t.sibling;t!==null;)Vc(t,e,n),t=t.sibling}var st=null,Jt=!1;function Kn(t,e,n){for(n=n.child;n!==null;)Z0(t,e,n),n=n.sibling}function Z0(t,e,n){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(xl,n)}catch{}switch(n.tag){case 5:ut||Is(n,e);case 6:var r=st,s=Jt;st=null,Kn(t,e,n),st=r,Jt=s,st!==null&&(Jt?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(Jt?(t=st,n=n.stateNode,t.nodeType===8?Eu(t.parentNode,n):t.nodeType===1&&Eu(t,n),to(t)):Eu(st,n.stateNode));break;case 4:r=st,s=Jt,st=n.stateNode.containerInfo,Jt=!0,Kn(t,e,n),st=r,Jt=s;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&zc(n,e,o),s=s.next}while(s!==r)}Kn(t,e,n);break;case 1:if(!ut&&(Is(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){je(n,e,a)}Kn(t,e,n);break;case 21:Kn(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,Kn(t,e,n),ut=r):Kn(t,e,n);break;default:Kn(t,e,n)}}function cp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nS),e.forEach(function(r){var s=hS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Yt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:st=a.stateNode,Jt=!1;break e;case 3:st=a.stateNode.containerInfo,Jt=!0;break e;case 4:st=a.stateNode.containerInfo,Jt=!0;break e}a=a.return}if(st===null)throw Error(z(160));Z0(i,o,s),st=null,Jt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){je(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ey(e,t),e=e.sibling}function ey(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yt(e,t),hn(t),r&4){try{Bi(3,t,t.return),Ll(3,t)}catch(v){je(t,t.return,v)}try{Bi(5,t,t.return)}catch(v){je(t,t.return,v)}}break;case 1:Yt(e,t),hn(t),r&512&&n!==null&&Is(n,n.return);break;case 5:if(Yt(e,t),hn(t),r&512&&n!==null&&Is(n,n.return),t.flags&32){var s=t.stateNode;try{Xi(s,"")}catch(v){je(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Sg(s,i),mc(a,o);var u=mc(a,i);for(o=0;o<l.length;o+=2){var d=l[o],c=l[o+1];d==="style"?Tg(s,c):d==="dangerouslySetInnerHTML"?Eg(s,c):d==="children"?Xi(s,c):Td(s,d,c,u)}switch(a){case"input":cc(s,i);break;case"textarea":kg(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Ps(s,!!i.multiple,w,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ps(s,!!i.multiple,i.defaultValue,!0):Ps(s,!!i.multiple,i.multiple?[]:"",!1))}s[oo]=i}catch(v){je(t,t.return,v)}}break;case 6:if(Yt(e,t),hn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){je(t,t.return,v)}}break;case 3:if(Yt(e,t),hn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{to(e.containerInfo)}catch(v){je(t,t.return,v)}break;case 4:Yt(e,t),hn(t);break;case 13:Yt(e,t),hn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ih=$e())),r&4&&cp(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(u=ut)||d,Yt(e,t),ut=u):Yt(e,t),hn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(X=t,d=t.child;d!==null;){for(c=X=d;X!==null;){switch(h=X,w=h.child,h.tag){case 0:case 11:case 14:case 15:Bi(4,h,h.return);break;case 1:Is(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(v){je(r,n,v)}}break;case 5:Is(h,h.return);break;case 22:if(h.memoizedState!==null){hp(c);continue}}w!==null?(w.return=h,X=w):hp(c)}d=d.sibling}e:for(d=null,c=t;;){if(c.tag===5){if(d===null){d=c;try{s=c.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ig("display",o))}catch(v){je(t,t.return,v)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(v){je(t,t.return,v)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Yt(e,t),hn(t),r&4&&cp(t);break;case 21:break;default:Yt(e,t),hn(t)}}function hn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(J0(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Xi(s,""),r.flags&=-33);var i=up(t);Vc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=up(t);Hc(t,a,o);break;default:throw Error(z(161))}}catch(l){je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sS(t,e,n){X=t,ty(t)}function ty(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ra;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||ut;a=ra;var u=ut;if(ra=o,(ut=l)&&!u)for(X=s;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?fp(s):l!==null?(l.return=o,X=l):fp(s);for(;i!==null;)X=i,ty(i),i=i.sibling;X=s,ra=a,ut=u}dp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):dp(t)}}function dp(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||Ll(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Xt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Qf(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qf(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&to(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}ut||e.flags&512&&Wc(e)}catch(h){je(e,e.return,h)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function hp(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function fp(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ll(4,e)}catch(l){je(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){je(e,s,l)}}var i=e.return;try{Wc(e)}catch(l){je(e,i,l)}break;case 5:var o=e.return;try{Wc(e)}catch(l){je(e,o,l)}}}catch(l){je(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var iS=Math.ceil,Ya=zn.ReactCurrentDispatcher,rh=zn.ReactCurrentOwner,qt=zn.ReactCurrentBatchConfig,ye=0,tt=null,Be=null,it=0,Ot=0,Ts=Ar(0),Ge=0,fo=null,es=0,Dl=0,sh=0,zi=null,wt=null,ih=0,qs=1/0,kn=null,Xa=!1,qc=null,mr=null,sa=!1,ar=null,Ja=0,Wi=0,Gc=null,Ca=-1,Ea=0;function pt(){return ye&6?$e():Ca!==-1?Ca:Ca=$e()}function gr(t){return t.mode&1?ye&2&&it!==0?it&-it:zw.transition!==null?(Ea===0&&(Ea=jg()),Ea):(t=_e,t!==0||(t=window.event,t=t===void 0?16:Vg(t.type)),t):1}function on(t,e,n,r){if(50<Wi)throw Wi=0,Gc=null,Error(z(185));Po(t,n,r),(!(ye&2)||t!==tt)&&(t===tt&&(!(ye&2)&&(Dl|=n),Ge===4&&tr(t,it)),It(t,r),n===1&&ye===0&&!(e.mode&1)&&(qs=$e()+500,Al&&Or()))}function It(t,e){var n=t.callbackNode;z1(t,e);var r=La(t,t===tt?it:0);if(r===0)n!==null&&kf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kf(n),e===1)t.tag===0?Bw(pp.bind(null,t)):c0(pp.bind(null,t)),Fw(function(){!(ye&6)&&Or()}),n=null;else{switch(Ug(r)){case 1:n=Rd;break;case 4:n=Dg;break;case 16:n=Ma;break;case 536870912:n=Fg;break;default:n=Ma}n=uy(n,ny.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ny(t,e){if(Ca=-1,Ea=0,ye&6)throw Error(z(327));var n=t.callbackNode;if(Ms()&&t.callbackNode!==n)return null;var r=La(t,t===tt?it:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Za(t,r);else{e=r;var s=ye;ye|=2;var i=sy();(tt!==t||it!==e)&&(kn=null,qs=$e()+500,Qr(t,e));do try{lS();break}catch(a){ry(t,a)}while(!0);Hd(),Ya.current=i,ye=s,Be!==null?e=0:(tt=null,it=0,e=Ge)}if(e!==0){if(e===2&&(s=wc(t),s!==0&&(r=s,e=Qc(t,s))),e===1)throw n=fo,Qr(t,0),tr(t,r),It(t,$e()),n;if(e===6)tr(t,r);else{if(s=t.current.alternate,!(r&30)&&!oS(s)&&(e=Za(t,r),e===2&&(i=wc(t),i!==0&&(r=i,e=Qc(t,i))),e===1))throw n=fo,Qr(t,0),tr(t,r),It(t,$e()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:jr(t,wt,kn);break;case 3:if(tr(t,r),(r&130023424)===r&&(e=ih+500-$e(),10<e)){if(La(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bc(jr.bind(null,t,wt,kn),e);break}jr(t,wt,kn);break;case 4:if(tr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-sn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iS(r/1960))-r,10<r){t.timeoutHandle=bc(jr.bind(null,t,wt,kn),r);break}jr(t,wt,kn);break;case 5:jr(t,wt,kn);break;default:throw Error(z(329))}}}return It(t,$e()),t.callbackNode===n?ny.bind(null,t):null}function Qc(t,e){var n=zi;return t.current.memoizedState.isDehydrated&&(Qr(t,e).flags|=256),t=Za(t,e),t!==2&&(e=wt,wt=n,e!==null&&Kc(e)),t}function Kc(t){wt===null?wt=t:wt.push.apply(wt,t)}function oS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ln(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tr(t,e){for(e&=~sh,e&=~Dl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sn(e),r=1<<n;t[n]=-1,e&=~r}}function pp(t){if(ye&6)throw Error(z(327));Ms();var e=La(t,0);if(!(e&1))return It(t,$e()),null;var n=Za(t,e);if(t.tag!==0&&n===2){var r=wc(t);r!==0&&(e=r,n=Qc(t,r))}if(n===1)throw n=fo,Qr(t,0),tr(t,e),It(t,$e()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,jr(t,wt,kn),It(t,$e()),null}function oh(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(qs=$e()+500,Al&&Or())}}function ts(t){ar!==null&&ar.tag===0&&!(ye&6)&&Ms();var e=ye;ye|=1;var n=qt.transition,r=_e;try{if(qt.transition=null,_e=1,t)return t()}finally{_e=r,qt.transition=n,ye=e,!(ye&6)&&Or()}}function ah(){Ot=Ts.current,Ae(Ts)}function Qr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Dw(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(Bd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$a();break;case 3:Hs(),Ae(Ct),Ae(dt),Yd();break;case 5:Kd(r);break;case 4:Hs();break;case 13:Ae(Me);break;case 19:Ae(Me);break;case 10:Vd(r.type._context);break;case 22:case 23:ah()}n=n.return}if(tt=t,Be=t=yr(t.current,null),it=Ot=e,Ge=0,fo=null,sh=Dl=es=0,wt=zi=null,zr!==null){for(e=0;e<zr.length;e++)if(n=zr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zr=null}return t}function ry(t,e){do{var n=Be;try{if(Hd(),wa.current=Ka,Qa){for(var r=Le.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Qa=!1}if(Zr=0,Je=We=Le=null,$i=!1,uo=0,rh.current=null,n===null||n.return===null){Ge=1,fo=e,Be=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=it,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,c=d.tag;if(!(d.mode&1)&&(c===0||c===11||c===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=tp(o);if(w!==null){w.flags&=-257,np(w,o,a,i,e),w.mode&1&&ep(i,u,e),e=w,l=u;var _=e.updateQueue;if(_===null){var v=new Set;v.add(l),e.updateQueue=v}else _.add(l);break e}else{if(!(e&1)){ep(i,u,e),lh();break e}l=Error(z(426))}}else if(Oe&&a.mode&1){var E=tp(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),np(E,o,a,i,e),zd(Vs(l,a));break e}}i=l=Vs(l,a),Ge!==4&&(Ge=2),zi===null?zi=[i]:zi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=$0(i,l,e);Gf(i,p);break e;case 1:a=l;var f=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(mr===null||!mr.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=B0(i,a,e);Gf(i,C);break e}}i=i.return}while(i!==null)}oy(n)}catch(T){e=T,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function sy(){var t=Ya.current;return Ya.current=Ka,t===null?Ka:t}function lh(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),tt===null||!(es&268435455)&&!(Dl&268435455)||tr(tt,it)}function Za(t,e){var n=ye;ye|=2;var r=sy();(tt!==t||it!==e)&&(kn=null,Qr(t,e));do try{aS();break}catch(s){ry(t,s)}while(!0);if(Hd(),ye=n,Ya.current=r,Be!==null)throw Error(z(261));return tt=null,it=0,Ge}function aS(){for(;Be!==null;)iy(Be)}function lS(){for(;Be!==null&&!O1();)iy(Be)}function iy(t){var e=ly(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?oy(t):Be=e,rh.current=null}function oy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tS(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,Be=null;return}}else if(n=eS(n,e,Ot),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);Ge===0&&(Ge=5)}function jr(t,e,n){var r=_e,s=qt.transition;try{qt.transition=null,_e=1,uS(t,e,n,r)}finally{qt.transition=s,_e=r}return null}function uS(t,e,n,r){do Ms();while(ar!==null);if(ye&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(W1(t,i),t===tt&&(Be=tt=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sa||(sa=!0,uy(Ma,function(){return Ms(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=qt.transition,qt.transition=null;var o=_e;_e=1;var a=ye;ye|=4,rh.current=null,rS(t,n),ey(n,t),Pw(Tc),Da=!!Ic,Tc=Ic=null,t.current=n,sS(n),M1(),ye=a,_e=o,qt.transition=i}else t.current=n;if(sa&&(sa=!1,ar=t,Ja=s),i=t.pendingLanes,i===0&&(mr=null),F1(n.stateNode),It(t,$e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Xa)throw Xa=!1,t=qc,qc=null,t;return Ja&1&&t.tag!==0&&Ms(),i=t.pendingLanes,i&1?t===Gc?Wi++:(Wi=0,Gc=t):Wi=0,Or(),null}function Ms(){if(ar!==null){var t=Ug(Ja),e=qt.transition,n=_e;try{if(qt.transition=null,_e=16>t?16:t,ar===null)var r=!1;else{if(t=ar,ar=null,Ja=0,ye&6)throw Error(z(331));var s=ye;for(ye|=4,X=t.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(X=u;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:Bi(8,d,i)}var c=d.child;if(c!==null)c.return=d,X=c;else for(;X!==null;){d=X;var h=d.sibling,w=d.return;if(X0(d),d===u){X=null;break}if(h!==null){h.return=w,X=h;break}X=w}}}var _=i.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var E=v.sibling;v.sibling=null,v=E}while(v!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Bi(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,X=p;break e}X=i.return}}var f=t.current;for(X=f;X!==null;){o=X;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,X=y;else e:for(o=f;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ll(9,a)}}catch(T){je(a,a.return,T)}if(a===o){X=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,X=C;break e}X=a.return}}if(ye=s,Or(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(xl,t)}catch{}r=!0}return r}finally{_e=n,qt.transition=e}}return!1}function mp(t,e,n){e=Vs(n,e),e=$0(t,e,1),t=pr(t,e,1),e=pt(),t!==null&&(Po(t,1,e),It(t,e))}function je(t,e,n){if(t.tag===3)mp(t,t,n);else for(;e!==null;){if(e.tag===3){mp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mr===null||!mr.has(r))){t=Vs(n,t),t=B0(e,t,1),e=pr(e,t,1),t=pt(),e!==null&&(Po(e,1,t),It(e,t));break}}e=e.return}}function cS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(it&n)===n&&(Ge===4||Ge===3&&(it&130023424)===it&&500>$e()-ih?Qr(t,0):sh|=n),It(t,e)}function ay(t,e){e===0&&(t.mode&1?(e=Qo,Qo<<=1,!(Qo&130023424)&&(Qo=4194304)):e=1);var n=pt();t=Dn(t,e),t!==null&&(Po(t,e,n),It(t,n))}function dS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ay(t,n)}function hS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),ay(t,n)}var ly;ly=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)St=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return St=!1,Zw(t,e,n);St=!!(t.flags&131072)}else St=!1,Oe&&e.flags&1048576&&d0(e,Wa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ka(t,e),t=e.pendingProps;var s=Bs(e,dt.current);Os(e,n),s=Jd(null,e,r,t,s,n);var i=Zd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Et(r)?(i=!0,Ba(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Gd(e),s.updater=Ol,e.stateNode=s,s._reactInternals=e,Lc(e,r,t,n),e=jc(null,e,r,!0,i,n)):(e.tag=0,Oe&&i&&$d(e),ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ka(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=pS(r),t=Xt(r,t),s){case 0:e=Fc(null,e,r,t,n);break e;case 1:e=ip(null,e,r,t,n);break e;case 11:e=rp(null,e,r,t,n);break e;case 14:e=sp(null,e,r,Xt(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),Fc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),ip(t,e,r,s,n);case 3:e:{if(V0(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,m0(t,e),qa(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Vs(Error(z(423)),e),e=op(t,e,r,n,s);break e}else if(r!==s){s=Vs(Error(z(424)),e),e=op(t,e,r,n,s);break e}else for(Lt=fr(e.stateNode.containerInfo.firstChild),Dt=e,Oe=!0,Zt=null,n=_0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zs(),r===s){e=Fn(t,e,n);break e}ht(t,e,r,n)}e=e.child}return e;case 5:return w0(e),t===null&&Ac(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,xc(r,s)?o=null:i!==null&&xc(r,i)&&(e.flags|=32),H0(t,e),ht(t,e,o,n),e.child;case 6:return t===null&&Ac(e),null;case 13:return q0(t,e,n);case 4:return Qd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ws(e,null,r,n):ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),rp(t,e,r,s,n);case 7:return ht(t,e,e.pendingProps,n),e.child;case 8:return ht(t,e,e.pendingProps.children,n),e.child;case 12:return ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,xe(Ha,r._currentValue),r._currentValue=o,i!==null)if(ln(i.value,o)){if(i.children===s.children&&!Ct.current){e=Fn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=An(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Oc(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Oc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Os(e,n),s=Gt(s),r=r(s),e.flags|=1,ht(t,e,r,n),e.child;case 14:return r=e.type,s=Xt(r,e.pendingProps),s=Xt(r.type,s),sp(t,e,r,s,n);case 15:return z0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),ka(t,e),e.tag=1,Et(r)?(t=!0,Ba(e)):t=!1,Os(e,n),y0(e,r,s),Lc(e,r,s,n),jc(null,e,r,!0,t,n);case 19:return G0(t,e,n);case 22:return W0(t,e,n)}throw Error(z(156,e.tag))};function uy(t,e){return Lg(t,e)}function fS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(t,e,n,r){return new fS(t,e,n,r)}function uh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pS(t){if(typeof t=="function")return uh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bd)return 11;if(t===Pd)return 14}return 2}function yr(t,e){var n=t.alternate;return n===null?(n=Vt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ia(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")uh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case gs:return Kr(n.children,s,i,e);case xd:o=8,s|=8;break;case ic:return t=Vt(12,n,e,s|2),t.elementType=ic,t.lanes=i,t;case oc:return t=Vt(13,n,e,s),t.elementType=oc,t.lanes=i,t;case ac:return t=Vt(19,n,e,s),t.elementType=ac,t.lanes=i,t;case vg:return Fl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gg:o=10;break e;case yg:o=9;break e;case bd:o=11;break e;case Pd:o=14;break e;case Jn:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Vt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Kr(t,e,n,r){return t=Vt(7,t,r,e),t.lanes=n,t}function Fl(t,e,n,r){return t=Vt(22,t,r,e),t.elementType=vg,t.lanes=n,t.stateNode={isHidden:!1},t}function Au(t,e,n){return t=Vt(6,t,null,e),t.lanes=n,t}function Ou(t,e,n){return e=Vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fu(0),this.expirationTimes=fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ch(t,e,n,r,s,i,o,a,l){return t=new mS(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Vt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gd(i),t}function gS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ms,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function cy(t){if(!t)return Ir;t=t._reactInternals;e:{if(ls(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Et(n))return u0(t,n,e)}return e}function dy(t,e,n,r,s,i,o,a,l){return t=ch(n,r,!0,t,s,i,o,a,l),t.context=cy(null),n=t.current,r=pt(),s=gr(n),i=An(r,s),i.callback=e??null,pr(n,i,s),t.current.lanes=s,Po(t,s,r),It(t,r),t}function jl(t,e,n,r){var s=e.current,i=pt(),o=gr(s);return n=cy(n),e.context===null?e.context=n:e.pendingContext=n,e=An(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=pr(s,e,o),t!==null&&(on(t,s,o,i),_a(t,s,o)),o}function el(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dh(t,e){gp(t,e),(t=t.alternate)&&gp(t,e)}function yS(){return null}var hy=typeof reportError=="function"?reportError:function(t){console.error(t)};function hh(t){this._internalRoot=t}Ul.prototype.render=hh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));jl(t,e,null,null)};Ul.prototype.unmount=hh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ts(function(){jl(null,t,null,null)}),e[Ln]=null}};function Ul(t){this._internalRoot=t}Ul.prototype.unstable_scheduleHydration=function(t){if(t){var e=zg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<er.length&&e!==0&&e<er[n].priority;n++);er.splice(n,0,t),n===0&&Hg(t)}};function fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yp(){}function vS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=el(o);i.call(u)}}var o=dy(e,r,t,0,null,!1,!1,"",yp);return t._reactRootContainer=o,t[Ln]=o.current,so(t.nodeType===8?t.parentNode:t),ts(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=el(l);a.call(u)}}var l=ch(t,0,!1,null,null,!1,!1,"",yp);return t._reactRootContainer=l,t[Ln]=l.current,so(t.nodeType===8?t.parentNode:t),ts(function(){jl(e,l,n,r)}),l}function Bl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=el(o);a.call(l)}}jl(e,o,t,s)}else o=vS(n,e,t,s,r);return el(o)}$g=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ai(e.pendingLanes);n!==0&&(Ad(e,n|1),It(e,$e()),!(ye&6)&&(qs=$e()+500,Or()))}break;case 13:ts(function(){var r=Dn(t,1);if(r!==null){var s=pt();on(r,t,1,s)}}),dh(t,1)}};Od=function(t){if(t.tag===13){var e=Dn(t,134217728);if(e!==null){var n=pt();on(e,t,134217728,n)}dh(t,134217728)}};Bg=function(t){if(t.tag===13){var e=gr(t),n=Dn(t,e);if(n!==null){var r=pt();on(n,t,e,r)}dh(t,e)}};zg=function(){return _e};Wg=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};yc=function(t,e,n){switch(e){case"input":if(cc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Rl(r);if(!s)throw Error(z(90));wg(r),cc(r,s)}}}break;case"textarea":kg(t,n);break;case"select":e=n.value,e!=null&&Ps(t,!!n.multiple,e,!1)}};Pg=oh;Ng=ts;var _S={usingClientEntryPoint:!1,Events:[Ro,ws,Rl,xg,bg,oh]},Ci={findFiberByHostInstance:Br,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},wS={bundleType:Ci.bundleType,version:Ci.version,rendererPackageName:Ci.rendererPackageName,rendererConfig:Ci.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Og(t),t===null?null:t.stateNode},findFiberByHostInstance:Ci.findFiberByHostInstance||yS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ia.isDisabled&&ia.supportsFiber)try{xl=ia.inject(wS),gn=ia}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_S;jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fh(e))throw Error(z(200));return gS(t,e,null,n)};jt.createRoot=function(t,e){if(!fh(t))throw Error(z(299));var n=!1,r="",s=hy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ch(t,1,!1,null,null,n,!1,r,s),t[Ln]=e.current,so(t.nodeType===8?t.parentNode:t),new hh(e)};jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Og(e),t=t===null?null:t.stateNode,t};jt.flushSync=function(t){return ts(t)};jt.hydrate=function(t,e,n){if(!$l(e))throw Error(z(200));return Bl(null,t,e,!0,n)};jt.hydrateRoot=function(t,e,n){if(!fh(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=hy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=dy(e,null,t,1,n??null,s,!1,i,o),t[Ln]=e.current,so(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ul(e)};jt.render=function(t,e,n){if(!$l(e))throw Error(z(200));return Bl(null,t,e,!1,n)};jt.unmountComponentAtNode=function(t){if(!$l(t))throw Error(z(40));return t._reactRootContainer?(ts(function(){Bl(null,null,t,!1,function(){t._reactRootContainer=null,t[Ln]=null})}),!0):!1};jt.unstable_batchedUpdates=oh;jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$l(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Bl(t,e,n,!1,r)};jt.version="18.2.0-next-9e3b772b8-20220608";function fy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fy)}catch(t){console.error(t)}}fy(),dg.exports=jt;var SS=dg.exports,vp=SS;rc.createRoot=vp.createRoot,rc.hydrateRoot=vp.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function po(){return po=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},po.apply(this,arguments)}var lr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(lr||(lr={}));const _p="popstate";function kS(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Yc("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:my(s)}return ES(e,n,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function py(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CS(){return Math.random().toString(36).substr(2,8)}function wp(t,e){return{usr:t.state,key:t.key,idx:e}}function Yc(t,e,n,r){return n===void 0&&(n=null),po({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ti(e):e,{state:n,key:e&&e.key||r||CS()})}function my(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ti(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ES(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=lr.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(po({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function c(){a=lr.Pop;let E=d(),p=E==null?null:E-u;u=E,l&&l({action:a,location:v.location,delta:p})}function h(E,p){a=lr.Push;let f=Yc(v.location,E,p);u=d()+1;let y=wp(f,u),C=v.createHref(f);try{o.pushState(y,"",C)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(C)}i&&l&&l({action:a,location:v.location,delta:1})}function w(E,p){a=lr.Replace;let f=Yc(v.location,E,p);u=d();let y=wp(f,u),C=v.createHref(f);o.replaceState(y,"",C),i&&l&&l({action:a,location:v.location,delta:0})}function _(E){let p=s.location.origin!=="null"?s.location.origin:s.location.href,f=typeof E=="string"?E:my(E);return f=f.replace(/ $/,"%20"),Qe(p,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,p)}let v={get action(){return a},get location(){return t(s,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(_p,c),l=E,()=>{s.removeEventListener(_p,c),l=null}},createHref(E){return e(s,E)},createURL:_,encodeLocation(E){let p=_(E);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:w,go(E){return o.go(E)}};return v}var Sp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Sp||(Sp={}));function IS(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?ti(e):e,s=vy(r.pathname||"/",n);if(s==null)return null;let i=gy(t);TS(i);let o=null;for(let a=0;o==null&&a<i.length;++a){let l=jS(s);o=LS(i[a],l)}return o}function gy(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Qe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Yr([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Qe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),gy(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:OS(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of yy(i.path))s(i,o,l)}),e}function yy(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=yy(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function TS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:MS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const xS=/^:[\w-]+$/,bS=3,PS=2,NS=1,RS=10,AS=-2,kp=t=>t==="*";function OS(t,e){let n=t.split("/"),r=n.length;return n.some(kp)&&(r+=AS),e&&(r+=PS),n.filter(s=>!kp(s)).reduce((s,i)=>s+(xS.test(i)?bS:i===""?NS:RS),r)}function MS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function LS(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=DS({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!d)return null;Object.assign(r,d.params);let c=a.route;i.push({params:r,pathname:Yr([s,d.pathname]),pathnameBase:HS(Yr([s,d.pathnameBase])),route:c}),d.pathnameBase!=="/"&&(s=Yr([s,d.pathnameBase]))}return i}function DS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=FS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,c)=>{let{paramName:h,isOptional:w}=d;if(h==="*"){let v=a[c]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const _=a[c];return w&&!_?u[h]=void 0:u[h]=(_||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function FS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),py(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function jS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return py(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function vy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function US(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ti(t):t;return{pathname:n?n.startsWith("/")?n:$S(n,e):e,search:VS(r),hash:qS(s)}}function $S(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Mu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function BS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zS(t,e){let n=BS(t);return e?n.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function WS(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ti(t):(s=po({},t),Qe(!s.pathname||!s.pathname.includes("?"),Mu("?","pathname","search",s)),Qe(!s.pathname||!s.pathname.includes("#"),Mu("#","pathname","hash",s)),Qe(!s.search||!s.search.includes("#"),Mu("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let c=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),c-=1;s.pathname=h.join("/")}a=c>=0?e[c]:"/"}let l=US(s,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Yr=t=>t.join("/").replace(/\/\/+/g,"/"),HS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function GS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _y=["post","put","patch","delete"];new Set(_y);const QS=["get",..._y];new Set(QS);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mo(){return mo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mo.apply(this,arguments)}const ph=b.createContext(null),KS=b.createContext(null),zl=b.createContext(null),Wl=b.createContext(null),ni=b.createContext({outlet:null,matches:[],isDataRoute:!1}),wy=b.createContext(null);function Hl(){return b.useContext(Wl)!=null}function Sy(){return Hl()||Qe(!1),b.useContext(Wl).location}function ky(t){b.useContext(zl).static||b.useLayoutEffect(t)}function ri(){let{isDataRoute:t}=b.useContext(ni);return t?lk():YS()}function YS(){Hl()||Qe(!1);let t=b.useContext(ph),{basename:e,future:n,navigator:r}=b.useContext(zl),{matches:s}=b.useContext(ni),{pathname:i}=Sy(),o=JSON.stringify(zS(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return ky(()=>{a.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let c=WS(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Yr([e,c.pathname])),(d.replace?r.replace:r.push)(c,d.state,d)},[e,r,o,i,t])}function XS(t,e){return JS(t,e)}function JS(t,e,n,r){Hl()||Qe(!1);let{navigator:s}=b.useContext(zl),{matches:i}=b.useContext(ni),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Sy(),d;if(e){var c;let E=typeof e=="string"?ti(e):e;l==="/"||(c=E.pathname)!=null&&c.startsWith(l)||Qe(!1),d=E}else d=u;let h=d.pathname||"/",w=h;if(l!=="/"){let E=l.replace(/^\//,"").split("/");w="/"+h.replace(/^\//,"").split("/").slice(E.length).join("/")}let _=IS(t,{pathname:w}),v=rk(_&&_.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:Yr([l,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:Yr([l,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,n,r);return e&&v?b.createElement(Wl.Provider,{value:{location:mo({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:lr.Pop}},v):v}function ZS(){let t=ak(),e=GS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const ek=b.createElement(ZS,null);class tk extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(ni.Provider,{value:this.props.routeContext},b.createElement(wy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nk(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(ph);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(ni.Provider,{value:e},r)}function rk(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id]));d>=0||Qe(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let c=o[d];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(u=d),c.route.id){let{loaderData:h,errors:w}=n,_=c.route.loader&&h[c.route.id]===void 0&&(!w||w[c.route.id]===void 0);if(c.route.lazy||_){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,c,h)=>{let w,_=!1,v=null,E=null;n&&(w=a&&c.route.id?a[c.route.id]:void 0,v=c.route.errorElement||ek,l&&(u<0&&h===0?(_=!0,E=null):u===h&&(_=!0,E=c.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,h+1)),f=()=>{let y;return w?y=v:_?y=E:c.route.Component?y=b.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=d,b.createElement(nk,{match:c,routeContext:{outlet:d,matches:p,isDataRoute:n!=null},children:y})};return n&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?b.createElement(tk,{location:n.location,revalidation:n.revalidation,component:v,error:w,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()},null)}var Cy=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Cy||{}),tl=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tl||{});function sk(t){let e=b.useContext(ph);return e||Qe(!1),e}function ik(t){let e=b.useContext(KS);return e||Qe(!1),e}function ok(t){let e=b.useContext(ni);return e||Qe(!1),e}function Ey(t){let e=ok(),n=e.matches[e.matches.length-1];return n.route.id||Qe(!1),n.route.id}function ak(){var t;let e=b.useContext(wy),n=ik(tl.UseRouteError),r=Ey(tl.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function lk(){let{router:t}=sk(Cy.UseNavigateStable),e=Ey(tl.UseNavigateStable),n=b.useRef(!1);return ky(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,mo({fromRouteId:e},i)))},[t,e])}function ps(t){Qe(!1)}function uk(t){let{basename:e="/",children:n=null,location:r,navigationType:s=lr.Pop,navigator:i,static:o=!1,future:a}=t;Hl()&&Qe(!1);let l=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:l,navigator:i,static:o,future:mo({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=ti(r));let{pathname:d="/",search:c="",hash:h="",state:w=null,key:_="default"}=r,v=b.useMemo(()=>{let E=vy(d,l);return E==null?null:{location:{pathname:E,search:c,hash:h,state:w,key:_},navigationType:s}},[l,d,c,h,w,_,s]);return v==null?null:b.createElement(zl.Provider,{value:u},b.createElement(Wl.Provider,{children:n,value:v}))}function ck(t){let{children:e,location:n}=t;return XS(Xc(e),n)}new Promise(()=>{});function Xc(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,Xc(r.props.children,i));return}r.type!==ps&&Qe(!1),!r.props.index||!r.props.children||Qe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Xc(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const dk="6";try{window.__reactRouterVersion=dk}catch{}const hk="startTransition",Cp=d1[hk];function fk(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=kS({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=b.useCallback(c=>{u&&Cp?Cp(()=>l(c)):l(c)},[l,u]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.createElement(uk,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Ep;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ep||(Ep={}));var Ip;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ip||(Ip={}));const vt=b.createContext({});var Tp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H=function(t,e){if(!t)throw si(e)},si=function(t){return new Error("Firebase Database ("+Iy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},pk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},mh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,d=i>>2,c=(i&3)<<4|a>>4;let h=(a&15)<<2|u>>6,w=u&63;l||(w=64,o||(h=64)),r.push(n[d],n[c],n[h],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ty(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const c=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||c==null)throw new mk;const h=i<<2|a>>4;if(r.push(h),u!==64){const w=a<<4&240|u>>2;if(r.push(w),c!==64){const _=u<<6&192|c;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class mk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xy=function(t){const e=Ty(t);return mh.encodeByteArray(e,!0)},nl=function(t){return xy(t).replace(/\./g,"")},rl=function(t){try{return mh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(t){return by(void 0,t)}function by(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!yk(n)||(t[n]=by(t[n],e[n]));return t}function yk(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=()=>vk().__FIREBASE_DEFAULTS__,wk=()=>{if(typeof process>"u"||typeof Tp>"u")return;const t=Tp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Sk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rl(t[1]);return e&&JSON.parse(e)},gh=()=>{try{return _k()||wk()||Sk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Py=t=>{var e,n;return(n=(e=gh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kk=t=>{const e=Py(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ny=()=>{var t;return(t=gh())===null||t===void 0?void 0:t.config},Ry=t=>{var e;return(e=gh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[nl(JSON.stringify(n)),nl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yh(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function Ek(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ik(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ay(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tk(){const t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Oy(){return Iy.NODE_ADMIN===!0}function xk(){try{return typeof indexedDB=="object"}catch{return!1}}function bk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="FirebaseError";class Mr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Pk,Object.setPrototypeOf(this,Mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oo.prototype.create)}}class Oo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Nk(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Mr(s,a,r)}}function Nk(t,e){return t.replace(Rk,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Rk=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){return JSON.parse(t)}function Ve(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=go(rl(i[0])||""),n=go(rl(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},Ak=function(t){const e=My(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Ok=function(t){const e=My(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Gs(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Jc(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sl(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function il(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(xp(i)&&xp(o)){if(!il(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function xp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let c=0;c<16;c++)r[c]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let c=0;c<16;c++)r[c]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let c=16;c<80;c++){const h=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,d;for(let c=0;c<80;c++){c<40?c<20?(u=a^i&(o^a),d=1518500249):(u=i^o^a,d=1859775393):c<60?(u=i&o|a&(i|o),d=2400959708):(u=i^o^a,d=3395469782);const h=(s<<5|s>>>27)+u+l+d+r[c]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function Lk(t,e){const n=new Dk(t,e);return n.subscribe.bind(n)}class Dk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Fk(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Lu),s.error===void 0&&(s.error=Lu),s.complete===void 0&&(s.complete=Lu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Lu(){}function vh(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,H(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ql=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t){return t&&t._delegate?t._delegate:t}class ns{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Vl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bk(e))try{this.getOrInitializeService({instanceIdentifier:Ur})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ur){return this.instances.has(e)}getOptions(e=Ur){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$k(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ur){return this.component?this.component.multipleInstances?e:Ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $k(t){return t===Ur?void 0:t}function Bk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Uk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const Wk={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},Hk=Se.INFO,Vk={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},qk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Vk[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _h{constructor(e){this.name=e,this._logLevel=Hk,this._logHandler=qk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const Gk=(t,e)=>e.some(n=>t instanceof n);let bp,Pp;function Qk(){return bp||(bp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kk(){return Pp||(Pp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ly=new WeakMap,Zc=new WeakMap,Dy=new WeakMap,Du=new WeakMap,wh=new WeakMap;function Yk(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(vr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ly.set(n,t)}).catch(()=>{}),wh.set(e,t),e}function Xk(t){if(Zc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Zc.set(t,e)}let ed={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Dy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Jk(t){ed=t(ed)}function Zk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fu(this),e,...n);return Dy.set(r,e.sort?e.sort():[e]),vr(r)}:Kk().includes(t)?function(...e){return t.apply(Fu(this),e),vr(Ly.get(this))}:function(...e){return vr(t.apply(Fu(this),e))}}function eC(t){return typeof t=="function"?Zk(t):(t instanceof IDBTransaction&&Xk(t),Gk(t,Qk())?new Proxy(t,ed):t)}function vr(t){if(t instanceof IDBRequest)return Yk(t);if(Du.has(t))return Du.get(t);const e=eC(t);return e!==t&&(Du.set(t,e),wh.set(e,t)),e}const Fu=t=>wh.get(t);function tC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=vr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(vr(o.result),l.oldVersion,l.newVersion,vr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const nC=["get","getKey","getAll","getAllKeys","count"],rC=["put","add","delete","clear"],ju=new Map;function Np(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ju.get(e))return ju.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=rC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||nC.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return ju.set(e,i),i}Jk(t=>({...t,get:(e,n,r)=>Np(e,n)||t.get(e,n,r),has:(e,n)=>!!Np(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const td="@firebase/app",Rp="0.10.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new _h("@firebase/app"),oC="@firebase/app-compat",aC="@firebase/analytics-compat",lC="@firebase/analytics",uC="@firebase/app-check-compat",cC="@firebase/app-check",dC="@firebase/auth",hC="@firebase/auth-compat",fC="@firebase/database",pC="@firebase/database-compat",mC="@firebase/functions",gC="@firebase/functions-compat",yC="@firebase/installations",vC="@firebase/installations-compat",_C="@firebase/messaging",wC="@firebase/messaging-compat",SC="@firebase/performance",kC="@firebase/performance-compat",CC="@firebase/remote-config",EC="@firebase/remote-config-compat",IC="@firebase/storage",TC="@firebase/storage-compat",xC="@firebase/firestore",bC="@firebase/vertexai-preview",PC="@firebase/firestore-compat",NC="firebase",RC="10.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd="[DEFAULT]",AC={[td]:"fire-core",[oC]:"fire-core-compat",[lC]:"fire-analytics",[aC]:"fire-analytics-compat",[cC]:"fire-app-check",[uC]:"fire-app-check-compat",[dC]:"fire-auth",[hC]:"fire-auth-compat",[fC]:"fire-rtdb",[pC]:"fire-rtdb-compat",[mC]:"fire-fn",[gC]:"fire-fn-compat",[yC]:"fire-iid",[vC]:"fire-iid-compat",[_C]:"fire-fcm",[wC]:"fire-fcm-compat",[SC]:"fire-perf",[kC]:"fire-perf-compat",[CC]:"fire-rc",[EC]:"fire-rc-compat",[IC]:"fire-gcs",[TC]:"fire-gcs-compat",[xC]:"fire-fst",[PC]:"fire-fst-compat",[bC]:"fire-vertex","fire-js":"fire-js",[NC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=new Map,OC=new Map,rd=new Map;function Ap(t,e){try{t.container.addComponent(e)}catch(n){jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qs(t){const e=t.name;if(rd.has(e))return jn.debug(`There were multiple attempts to register component ${e}.`),!1;rd.set(e,t);for(const n of ol.values())Ap(n,t);for(const n of OC.values())Ap(n,t);return!0}function Sh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new Oo("app","Firebase",MC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=RC;function Fy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:nd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw _r.create("bad-app-name",{appName:String(s)});if(n||(n=Ny()),!n)throw _r.create("no-options");const i=ol.get(s);if(i){if(il(n,i.options)&&il(r,i.config))return i;throw _r.create("duplicate-app",{appName:s})}const o=new zk(s);for(const l of rd.values())o.addComponent(l);const a=new LC(n,r,o);return ol.set(s,a),a}function jy(t=nd){const e=ol.get(t);if(!e&&t===nd&&Ny())return Fy();if(!e)throw _r.create("no-app",{appName:t});return e}function wr(t,e,n){var r;let s=(r=AC[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jn.warn(a.join(" "));return}Qs(new ns(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="firebase-heartbeat-database",FC=1,yo="firebase-heartbeat-store";let Uu=null;function Uy(){return Uu||(Uu=tC(DC,FC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yo)}catch(n){console.warn(n)}}}}).catch(t=>{throw _r.create("idb-open",{originalErrorMessage:t.message})})),Uu}async function jC(t){try{const n=(await Uy()).transaction(yo),r=await n.objectStore(yo).get($y(t));return await n.done,r}catch(e){if(e instanceof Mr)jn.warn(e.message);else{const n=_r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jn.warn(n.message)}}}async function Op(t,e){try{const r=(await Uy()).transaction(yo,"readwrite");await r.objectStore(yo).put(e,$y(t)),await r.done}catch(n){if(n instanceof Mr)jn.warn(n.message);else{const r=_r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});jn.warn(r.message)}}}function $y(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=1024,$C=30*24*60*60*1e3;class BC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Mp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=$C}),this._storage.overwrite(this._heartbeatsCache))}catch(r){jn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mp(),{heartbeatsToSend:r,unsentEntries:s}=zC(this._heartbeatsCache.heartbeats),i=nl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return jn.warn(n),""}}}function Mp(){return new Date().toISOString().substring(0,10)}function zC(t,e=UC){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Lp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Lp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class WC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xk()?bk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Op(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Op(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Lp(t){return nl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t){Qs(new ns("platform-logger",e=>new sC(e),"PRIVATE")),Qs(new ns("heartbeat",e=>new BC(e),"PRIVATE")),wr(td,Rp,t),wr(td,Rp,"esm2017"),wr("fire-js","")}HC("");var VC="firebase",qC="10.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr(VC,qC,"app");var Dp={};const Fp="@firebase/database",jp="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let By="";function GC(t){By=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ve(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:go(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Wn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new QC(e)}}catch{}return new KC},Hr=zy("localStorage"),YC=zy("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new _h("@firebase/database"),XC=function(){let t=1;return function(){return t++}}(),Wy=function(t){const e=jk(t),n=new Mk;n.update(e);const r=n.digest();return mh.encodeByteArray(r)},Mo=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Mo.apply(null,r):typeof r=="object"?e+=Ve(r):e+=r,e+=" "}return e};let Hi=null,Up=!0;const JC=function(t,e){H(!e,"Can't turn on custom loggers persistently."),Ls.logLevel=Se.VERBOSE,Hi=Ls.log.bind(Ls)},ct=function(...t){if(Up===!0&&(Up=!1,Hi===null&&YC.get("logging_enabled")===!0&&JC()),Hi){const e=Mo.apply(null,t);Hi(e)}},Lo=function(t){return function(...e){ct(t,...e)}},sd=function(...t){const e="FIREBASE INTERNAL ERROR: "+Mo(...t);Ls.error(e)},Un=function(...t){const e=`FIREBASE FATAL ERROR: ${Mo(...t)}`;throw Ls.error(e),new Error(e)},Tt=function(...t){const e="FIREBASE WARNING: "+Mo(...t);Ls.warn(e)},ZC=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Tt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Hy=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},eE=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ks="[MIN_NAME]",rs="[MAX_NAME]",ai=function(t,e){if(t===e)return 0;if(t===Ks||e===rs)return-1;if(e===Ks||t===rs)return 1;{const n=$p(t),r=$p(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},tE=function(t,e){return t===e?0:t<e?-1:1},Ei=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ve(e))},kh=function(t){if(typeof t!="object"||t===null)return Ve(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ve(e[r]),n+=":",n+=kh(t[e[r]]);return n+="}",n},Vy=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function xt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const qy=function(t){H(!Hy(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const d=u.join("");let c="";for(l=0;l<64;l+=8){let h=parseInt(d.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),c=c+h}return c.toLowerCase()},nE=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},rE=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function sE(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const iE=new RegExp("^-?(0*)\\d{1,10}$"),oE=-2147483648,aE=2147483647,$p=function(t){if(iE.test(t)){const e=Number(t);if(e>=oE&&e<=aE)return e}return null},li=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Tt("Exception was thrown by user callback.",n),e},Math.floor(0))}},lE=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Vi=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Tt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ct("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Tt(e)}}class Ta{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ta.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch="5",Gy="v",Qy="s",Ky="r",Yy="f",Xy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Jy="ls",Zy="p",id="ac",ev="websocket",tv="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function dE(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function rv(t,e,n){H(typeof e=="string","typeof type must == string"),H(typeof n=="object","typeof params must == object");let r;if(e===ev)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===tv)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);dE(t)&&(n.ns=t.namespace);const s=[];return xt(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.counters_={}}incrementCounter(e,n=1){Wn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return gk(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u={},Bu={};function Eh(t){const e=t.toString();return $u[e]||($u[e]=new hE),$u[e]}function fE(t,e){const n=t.toString();return Bu[n]||(Bu[n]=e()),Bu[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&li(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="start",mE="close",gE="pLPCommand",yE="pRTLPCB",sv="id",iv="pw",ov="ser",vE="cb",_E="seg",wE="ts",SE="d",kE="dframe",av=1870,lv=30,CE=av-lv,EE=25e3,IE=3e4;class xs{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Lo(e),this.stats_=Eh(n),this.urlFn=l=>(this.appCheckToken&&(l[id]=this.appCheckToken),rv(n,tv,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new pE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(IE)),eE(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ih((...i)=>{const[o,a,l,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Bp)this.id=a,this.password=l;else if(o===mE)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Bp]="t",r[ov]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[vE]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Gy]=Ch,this.transportSessionId&&(r[Qy]=this.transportSessionId),this.lastSessionId&&(r[Jy]=this.lastSessionId),this.applicationId&&(r[Zy]=this.applicationId),this.appCheckToken&&(r[id]=this.appCheckToken),typeof location<"u"&&location.hostname&&Xy.test(location.hostname)&&(r[Ky]=Yy);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){xs.forceAllow_=!0}static forceDisallow(){xs.forceDisallow_=!0}static isAvailable(){return xs.forceAllow_?!0:!xs.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!nE()&&!rE()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=xy(n),s=Vy(r,CE);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[kE]="t",r[sv]=e,r[iv]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ve(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Ih{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=XC(),window[gE+this.uniqueCallbackIdentifier]=e,window[yE+this.uniqueCallbackIdentifier]=n,this.myIFrame=Ih.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ct("frame writing exception"),a.stack&&ct(a.stack),ct(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ct("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[sv]=this.myID,e[iv]=this.myPW,e[ov]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+lv+r.length<=av;){const o=this.pendingSegs.shift();r=r+"&"+_E+s+"="+o.seg+"&"+wE+s+"="+o.ts+"&"+SE+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(EE)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ct("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=16384,xE=45e3;let al=null;typeof MozWebSocket<"u"?al=MozWebSocket:typeof WebSocket<"u"&&(al=WebSocket);class en{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Lo(this.connId),this.stats_=Eh(n),this.connURL=en.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Gy]=Ch,typeof location<"u"&&location.hostname&&Xy.test(location.hostname)&&(o[Ky]=Yy),n&&(o[Qy]=n),r&&(o[Jy]=r),s&&(o[id]=s),i&&(o[Zy]=i),rv(e,ev,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hr.set("previous_websocket_failure",!0);try{let r;Oy(),this.mySock=new al(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){en.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&al!==null&&!en.forceDisallow_}static previouslyFailed(){return Hr.isInMemoryStorage||Hr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Hr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=go(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(H(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Vy(n,TE);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(xE))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}en.responsesRequiredToBeHealthy=2;en.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[xs,en]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=en&&en.isAvailable();let r=n&&!en.previouslyFailed();if(e.webSocketOnly&&(n||Tt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[en];else{const s=this.transports_=[];for(const i of vo.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);vo.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}vo.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=6e4,PE=5e3,NE=10*1024,RE=100*1024,zu="t",zp="d",AE="s",Wp="r",OE="e",Hp="o",Vp="a",qp="n",Gp="p",ME="h";class LE{constructor(e,n,r,s,i,o,a,l,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Lo("c:"+this.id+":"),this.transportManager_=new vo(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Vi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>RE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>NE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(zu in e){const n=e[zu];n===Vp?this.upgradeIfSecondaryHealthy_():n===Wp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Hp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ei("t",e),r=Ei("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Gp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Vp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:qp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ei("t",e),r=Ei("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ei(zu,e);if(zp in e){const r=e[zp];if(n===ME){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===qp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===AE?this.onConnectionShutdown_(r):n===Wp?this.onReset_(r):n===OE?sd("Server Error: "+r):n===Hp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sd("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Ch!==r&&Tt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Vi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(bE))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Vi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(PE))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Gp,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e){this.allowedEvents_=e,this.listeners_={},H(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){H(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll extends cv{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!yh()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ll}getInitialEvent(e){return H(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp=32,Kp=768;class Ce{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ve(){return new Ce("")}function ce(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Tr(t){return t.pieces_.length-t.pieceNum_}function Te(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ce(t.pieces_,e)}function dv(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function DE(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function hv(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function fv(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ce(e,0)}function qe(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ce)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Ce(n,0)}function fe(t){return t.pieceNum_>=t.pieces_.length}function ft(t,e){const n=ce(t),r=ce(e);if(n===null)return e;if(n===r)return ft(Te(t),Te(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Th(t,e){if(Tr(t)!==Tr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function nn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Tr(t)>Tr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class FE{constructor(e,n){this.errorPrefix_=n,this.parts_=hv(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ql(this.parts_[r]);pv(this)}}function jE(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ql(e),pv(t)}function UE(t){const e=t.parts_.pop();t.byteLength_-=ql(e),t.parts_.length>0&&(t.byteLength_-=1)}function pv(t){if(t.byteLength_>Kp)throw new Error(t.errorPrefix_+"has a key path longer than "+Kp+" bytes ("+t.byteLength_+").");if(t.parts_.length>Qp)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Qp+") or object contains a cycle "+$r(t))}function $r(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh extends cv{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new xh}getInitialEvent(e){return H(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=1e3,$E=60*5*1e3,Yp=30*1e3,BE=1.3,zE=3e4,WE="server_kill",Xp=3;class On extends uv{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=On.nextPersistentConnectionId_++,this.log_=Lo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ii,this.maxReconnectDelay_=$E,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Oy())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xh.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ll.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Ve(i)),H(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Vl,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),H(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),H(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,u=a.s;On.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Wn(e,"w")){const r=Gs(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Tt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Ok(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Yp)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Ak(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),H(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ve(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):sd("Unrecognized action received from server: "+Ve(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){H(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ii,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ii,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>zE&&(this.reconnectDelay_=Ii),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*BE)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+On.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(c){H(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(c)};this.realtime_={close:l,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[c,h]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?ct("getToken() completed but was canceled"):(ct("getToken() completed. Creating connection."),this.authToken_=c&&c.accessToken,this.appCheckToken_=h&&h.token,a=new LE(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,w=>{Tt(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(WE)},i))}catch(c){this.log_("Failed to get token: "+c),o||(this.repoInfo_.nodeAdmin&&Tt(c),l())}}}interrupt(e){ct("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ct("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Jc(this.interruptReasons_)&&(this.reconnectDelay_=Ii,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>kh(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Ce(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){ct("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Xp&&(this.reconnectDelay_=Yp,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ct("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Xp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+By.replace(/\./g,"-")]=1,yh()?e["framework.cordova"]=1:Ay()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ll.getInstance().currentlyOnline();return Jc(this.interruptReasons_)&&e}}On.nextPersistentConnectionId_=0;On.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new de(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new de(Ks,e),s=new de(Ks,n);return this.compare(r,s)!==0}minPost(){return de.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa;class mv extends Gl{static get __EMPTY_NODE(){return oa}static set __EMPTY_NODE(e){oa=e}compare(e,n){return ai(e.name,n.name)}isDefinedOn(e){throw si("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return de.MIN}maxPost(){return new de(rs,oa)}makePost(e,n){return H(typeof e=="string","KeyIndex indexValue must always be a string."),new de(e,oa)}toString(){return".key"}}const Ds=new mv;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=s??kt.EMPTY_NODE,this.right=i??kt.EMPTY_NODE}copy(e,n,r,s,i){return new Ze(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return kt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return kt.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ze.RED=!0;Ze.BLACK=!1;class HE{copy(e,n,r,s,i){return this}insert(e,n,r){return new Ze(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class kt{constructor(e,n=kt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new kt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ze.BLACK,null,null))}remove(e){return new kt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ze.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new aa(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new aa(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new aa(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new aa(this.root_,null,this.comparator_,!0,e)}}kt.EMPTY_NODE=new HE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(t,e){return ai(t.name,e.name)}function bh(t,e){return ai(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od;function qE(t){od=t}const gv=function(t){return typeof t=="number"?"number:"+qy(t):"string:"+t},yv=function(t){if(t.isLeafNode()){const e=t.val();H(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Wn(e,".sv"),"Priority must be a string or number.")}else H(t===od||t.isEmpty(),"priority of unexpected type.");H(t===od||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jp;class Xe{constructor(e,n=Xe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,H(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),yv(this.priorityNode_)}static set __childrenNodeConstructor(e){Jp=e}static get __childrenNodeConstructor(){return Jp}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Xe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Xe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return fe(e)?this:ce(e)===".priority"?this.priorityNode_:Xe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Xe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ce(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(H(r!==".priority"||Tr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Xe.__childrenNodeConstructor.EMPTY_NODE.updateChild(Te(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+gv(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=qy(this.value_):e+=this.value_,this.lazyHash_=Wy(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Xe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Xe.__childrenNodeConstructor?-1:(H(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Xe.VALUE_TYPE_ORDER.indexOf(n),i=Xe.VALUE_TYPE_ORDER.indexOf(r);return H(s>=0,"Unknown leaf type: "+n),H(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Xe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vv,_v;function GE(t){vv=t}function QE(t){_v=t}class KE extends Gl{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?ai(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return de.MIN}maxPost(){return new de(rs,new Xe("[PRIORITY-POST]",_v))}makePost(e,n){const r=vv(e);return new de(n,new Xe("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ue=new KE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=Math.log(2);class XE{constructor(e){const n=i=>parseInt(Math.log(i)/YE,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ul=function(t,e,n,r){t.sort(e);const s=function(l,u){const d=u-l;let c,h;if(d===0)return null;if(d===1)return c=t[l],h=n?n(c):c,new Ze(h,c.node,Ze.BLACK,null,null);{const w=parseInt(d/2,10)+l,_=s(l,w),v=s(w+1,u);return c=t[w],h=n?n(c):c,new Ze(h,c.node,Ze.BLACK,_,v)}},i=function(l){let u=null,d=null,c=t.length;const h=function(_,v){const E=c-_,p=c;c-=_;const f=s(E+1,p),y=t[E],C=n?n(y):y;w(new Ze(C,y.node,v,null,f))},w=function(_){u?(u.left=_,u=_):(d=_,u=_)};for(let _=0;_<l.count;++_){const v=l.nextBitIsOne(),E=Math.pow(2,l.count-(_+1));v?h(E,Ze.BLACK):(h(E,Ze.BLACK),h(E,Ze.RED))}return d},o=new XE(t.length),a=i(o);return new kt(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wu;const hs={};class bn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return H(hs&&Ue,"ChildrenNode.ts has not been loaded"),Wu=Wu||new bn({".priority":hs},{".priority":Ue}),Wu}get(e){const n=Gs(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof kt?n:null}hasIndex(e){return Wn(this.indexSet_,e.toString())}addIndex(e,n){H(e!==Ds,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(de.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=ul(r,e.getCompare()):a=hs;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new bn(d,u)}addToIndexes(e,n){const r=sl(this.indexes_,(s,i)=>{const o=Gs(this.indexSet_,i);if(H(o,"Missing index implementation for "+i),s===hs)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(de.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),ul(a,o.getCompare())}else return hs;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new de(e.name,a))),l.insert(e,e.node)}});return new bn(r,this.indexSet_)}removeFromIndexes(e,n){const r=sl(this.indexes_,s=>{if(s===hs)return s;{const i=n.get(e.name);return i?s.remove(new de(e.name,i)):s}});return new bn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ti;class ne{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&yv(this.priorityNode_),this.children_.isEmpty()&&H(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ti||(Ti=new ne(new kt(bh),null,bn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ti}updatePriority(e){return this.children_.isEmpty()?this:new ne(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ti:n}}getChild(e){const n=ce(e);return n===null?this:this.getImmediateChild(n).getChild(Te(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(H(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new de(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Ti:this.priorityNode_;return new ne(s,o,i)}}updateChild(e,n){const r=ce(e);if(r===null)return n;{H(ce(e)!==".priority"||Tr(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Te(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Ue,(o,a)=>{n[o]=a.val(e),r++,i&&ne.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+gv(this.getPriority().val())+":"),this.forEachChild(Ue,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Wy(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new de(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new de(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new de(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,de.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,de.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Do?-1:0}withIndex(e){if(e===Ds||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ne(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ds||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ue),s=n.getIterator(Ue);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ds?null:this.indexMap_.get(e.toString())}}ne.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class JE extends ne{constructor(){super(new kt(bh),ne.EMPTY_NODE,bn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ne.EMPTY_NODE}isEmpty(){return!1}}const Do=new JE;Object.defineProperties(de,{MIN:{value:new de(Ks,ne.EMPTY_NODE)},MAX:{value:new de(rs,Do)}});mv.__EMPTY_NODE=ne.EMPTY_NODE;Xe.__childrenNodeConstructor=ne;qE(Do);QE(Do);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=!0;function et(t,e=null){if(t===null)return ne.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),H(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Xe(n,et(e))}if(!(t instanceof Array)&&ZE){const n=[];let r=!1;if(xt(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=et(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new de(o,l)))}}),n.length===0)return ne.EMPTY_NODE;const i=ul(n,VE,o=>o.name,bh);if(r){const o=ul(n,Ue.getCompare());return new ne(i,et(e),new bn({".priority":o},{".priority":Ue}))}else return new ne(i,et(e),bn.Default)}else{let n=ne.EMPTY_NODE;return xt(t,(r,s)=>{if(Wn(t,r)&&r.substring(0,1)!=="."){const i=et(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(et(e))}}GE(et);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI extends Gl{constructor(e){super(),this.indexPath_=e,H(!fe(e)&&ce(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?ai(e.name,n.name):i}makePost(e,n){const r=et(e),s=ne.EMPTY_NODE.updateChild(this.indexPath_,r);return new de(n,s)}maxPost(){const e=ne.EMPTY_NODE.updateChild(this.indexPath_,Do);return new de(rs,e)}toString(){return hv(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI extends Gl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?ai(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return de.MIN}maxPost(){return de.MAX}makePost(e,n){const r=et(e);return new de(n,r)}toString(){return".value"}}const nI=new tI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t){return{type:"value",snapshotNode:t}}function Ys(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function _o(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function wo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function rI(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){H(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(_o(n,a)):H(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ys(n,r)):o.trackChildChange(wo(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ue,(s,i)=>{n.hasChild(s)||r.trackChildChange(_o(s,i))}),n.isLeafNode()||n.forEachChild(Ue,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(wo(s,i,o))}else r.trackChildChange(Ys(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ne.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.indexedFilter_=new Ph(e.getIndex()),this.index_=e.getIndex(),this.startPost_=So.getStartPost_(e),this.endPost_=So.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new de(n,r))||(r=ne.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ne.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(ne.EMPTY_NODE);const i=this;return n.forEachChild(Ue,(o,a)=>{i.matches(new de(o,a))||(s=s.updateImmediateChild(o,ne.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new So(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new de(n,r))||(r=ne.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=ne.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=ne.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(ne.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,ne.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const c=this.index_.getCompare();o=(h,w)=>c(w,h)}else o=this.index_.getCompare();const a=e;H(a.numChildren()===this.limit_,"");const l=new de(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(n)){const c=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const w=h==null?1:o(h,l);if(d&&!r.isEmpty()&&w>=0)return i!=null&&i.trackChildChange(wo(n,r,c)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(_o(n,c));const v=a.updateImmediateChild(n,ne.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(Ys(h.name,h.node)),v.updateImmediateChild(h.name,h.node)):v}}else return r.isEmpty()?e:d&&o(u,l)>=0?(i!=null&&(i.trackChildChange(_o(u.name,u.node)),i.trackChildChange(Ys(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,ne.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ue}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return H(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return H(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ks}hasEnd(){return this.endSet_}getIndexEndValue(){return H(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return H(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return H(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ue}copy(){const e=new Nh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function iI(t){return t.loadsAllData()?new Ph(t.getIndex()):t.hasLimit()?new sI(t):new So(t)}function Zp(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ue?n="$priority":t.index_===nI?n="$value":t.index_===Ds?n="$key":(H(t.index_ instanceof eI,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ve(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ve(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ve(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ve(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ve(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function em(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ue&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends uv{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Lo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(H(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=cl.getListenId_(e,r),a={};this.listens_[o]=a;const l=Zp(e._queryParams);this.restRequest_(i+".json",l,(u,d)=>{let c=d;if(u===404&&(c=null,u=null),u===null&&this.onDataUpdate_(i,c,!1,r),Gs(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",s(h,null)}})}unlisten(e,n){const r=cl.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Zp(e._queryParams),r=e._path.toString(),s=new Vl;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ii(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=go(a.responseText)}catch{Tt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Tt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.rootNode_=ne.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(){return{value:null,children:new Map}}function Sv(t,e,n){if(fe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ce(e);t.children.has(r)||t.children.set(r,dl());const s=t.children.get(r);e=Te(e),Sv(s,e,n)}}function ad(t,e,n){t.value!==null?n(e,t.value):aI(t,(r,s)=>{const i=new Ce(e.toString()+"/"+r);ad(s,i,n)})}function aI(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&xt(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm=10*1e3,uI=30*1e3,cI=5*60*1e3;class dI{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new lI(e);const r=tm+(uI-tm)*Math.random();Vi(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;xt(e,(s,i)=>{i>0&&Wn(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Vi(this.reportStats_.bind(this),Math.floor(Math.random()*2*cI))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(rn||(rn={}));function kv(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Rh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ah(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=rn.ACK_USER_WRITE,this.source=kv()}operationForChild(e){if(fe(this.path)){if(this.affectedTree.value!=null)return H(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ce(e));return new hl(ve(),n,this.revert)}}else return H(ce(this.path)===e,"operationForChild called for unrelated child."),new hl(Te(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this.source=e,this.path=n,this.type=rn.LISTEN_COMPLETE}operationForChild(e){return fe(this.path)?new ko(this.source,ve()):new ko(this.source,Te(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=rn.OVERWRITE}operationForChild(e){return fe(this.path)?new ss(this.source,ve(),this.snap.getImmediateChild(e)):new ss(this.source,Te(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=rn.MERGE}operationForChild(e){if(fe(this.path)){const n=this.children.subtree(new Ce(e));return n.isEmpty()?null:n.value?new ss(this.source,ve(),n.value):new Co(this.source,ve(),n)}else return H(ce(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Co(this.source,Te(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(fe(e))return this.isFullyInitialized()&&!this.filtered_;const n=ce(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function fI(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(rI(o.childName,o.snapshotNode))}),xi(t,s,"child_removed",e,r,n),xi(t,s,"child_added",e,r,n),xi(t,s,"child_moved",i,r,n),xi(t,s,"child_changed",e,r,n),xi(t,s,"value",e,r,n),s}function xi(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>mI(t,a,l)),o.forEach(a=>{const l=pI(t,a,i);s.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function pI(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function mI(t,e,n){if(e.childName==null||n.childName==null)throw si("Should only compare child_ events.");const r=new de(e.childName,e.snapshotNode),s=new de(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t,e){return{eventCache:t,serverCache:e}}function qi(t,e,n,r){return Ql(new xr(e,n,r),t.serverCache)}function Cv(t,e,n,r){return Ql(t.eventCache,new xr(e,n,r))}function fl(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function is(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hu;const gI=()=>(Hu||(Hu=new kt(tE)),Hu);class Re{constructor(e,n=gI()){this.value=e,this.children=n}static fromObject(e){let n=new Re(null);return xt(e,(r,s)=>{n=n.set(new Ce(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ve(),value:this.value};if(fe(e))return null;{const r=ce(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Te(e),n);return i!=null?{path:qe(new Ce(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(fe(e))return this;{const n=ce(e),r=this.children.get(n);return r!==null?r.subtree(Te(e)):new Re(null)}}set(e,n){if(fe(e))return new Re(n,this.children);{const r=ce(e),i=(this.children.get(r)||new Re(null)).set(Te(e),n),o=this.children.insert(r,i);return new Re(this.value,o)}}remove(e){if(fe(e))return this.children.isEmpty()?new Re(null):new Re(null,this.children);{const n=ce(e),r=this.children.get(n);if(r){const s=r.remove(Te(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Re(null):new Re(this.value,i)}else return this}}get(e){if(fe(e))return this.value;{const n=ce(e),r=this.children.get(n);return r?r.get(Te(e)):null}}setTree(e,n){if(fe(e))return n;{const r=ce(e),i=(this.children.get(r)||new Re(null)).setTree(Te(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Re(this.value,o)}}fold(e){return this.fold_(ve(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(qe(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ve(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(fe(e))return null;{const i=ce(e),o=this.children.get(i);return o?o.findOnPath_(Te(e),qe(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ve(),n)}foreachOnPath_(e,n,r){if(fe(e))return this;{this.value&&r(n,this.value);const s=ce(e),i=this.children.get(s);return i?i.foreachOnPath_(Te(e),qe(n,s),r):new Re(null)}}foreach(e){this.foreach_(ve(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(qe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.writeTree_=e}static empty(){return new an(new Re(null))}}function Gi(t,e,n){if(fe(e))return new an(new Re(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=ft(s,e);return i=i.updateChild(o,n),new an(t.writeTree_.set(s,i))}else{const s=new Re(n),i=t.writeTree_.setTree(e,s);return new an(i)}}}function nm(t,e,n){let r=t;return xt(n,(s,i)=>{r=Gi(r,qe(e,s),i)}),r}function rm(t,e){if(fe(e))return an.empty();{const n=t.writeTree_.setTree(e,new Re(null));return new an(n)}}function ld(t,e){return us(t,e)!=null}function us(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ft(n.path,e)):null}function sm(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ue,(r,s)=>{e.push(new de(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new de(r,s.value))}),e}function Sr(t,e){if(fe(e))return t;{const n=us(t,e);return n!=null?new an(new Re(n)):new an(t.writeTree_.subtree(e))}}function ud(t){return t.writeTree_.isEmpty()}function Xs(t,e){return Ev(ve(),t.writeTree_,e)}function Ev(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(H(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=Ev(qe(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(qe(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t,e){return bv(e,t)}function yI(t,e,n,r,s){H(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Gi(t.visibleWrites,e,n)),t.lastWriteId=r}function vI(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function _I(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);H(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&wI(a,r.path)?s=!1:nn(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return SI(t),!0;if(r.snap)t.visibleWrites=rm(t.visibleWrites,r.path);else{const a=r.children;xt(a,l=>{t.visibleWrites=rm(t.visibleWrites,qe(r.path,l))})}return!0}else return!1}function wI(t,e){if(t.snap)return nn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&nn(qe(t.path,n),e))return!0;return!1}function SI(t){t.visibleWrites=Iv(t.allWrites,kI,ve()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function kI(t){return t.visible}function Iv(t,e,n){let r=an.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)nn(n,o)?(a=ft(n,o),r=Gi(r,a,i.snap)):nn(o,n)&&(a=ft(o,n),r=Gi(r,ve(),i.snap.getChild(a)));else if(i.children){if(nn(n,o))a=ft(n,o),r=nm(r,a,i.children);else if(nn(o,n))if(a=ft(o,n),fe(a))r=nm(r,ve(),i.children);else{const l=Gs(i.children,ce(a));if(l){const u=l.getChild(Te(a));r=Gi(r,ve(),u)}}}else throw si("WriteRecord should have .snap or .children")}}return r}function Tv(t,e,n,r,s){if(!r&&!s){const i=us(t.visibleWrites,e);if(i!=null)return i;{const o=Sr(t.visibleWrites,e);if(ud(o))return n;if(n==null&&!ld(o,ve()))return null;{const a=n||ne.EMPTY_NODE;return Xs(o,a)}}}else{const i=Sr(t.visibleWrites,e);if(!s&&ud(i))return n;if(!s&&n==null&&!ld(i,ve()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(nn(u.path,e)||nn(e,u.path))},a=Iv(t.allWrites,o,e),l=n||ne.EMPTY_NODE;return Xs(a,l)}}}function CI(t,e,n){let r=ne.EMPTY_NODE;const s=us(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Ue,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Sr(t.visibleWrites,e);return n.forEachChild(Ue,(o,a)=>{const l=Xs(Sr(i,new Ce(o)),a);r=r.updateImmediateChild(o,l)}),sm(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Sr(t.visibleWrites,e);return sm(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function EI(t,e,n,r,s){H(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=qe(e,n);if(ld(t.visibleWrites,i))return null;{const o=Sr(t.visibleWrites,i);return ud(o)?s.getChild(n):Xs(o,s.getChild(n))}}function II(t,e,n,r){const s=qe(e,n),i=us(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Sr(t.visibleWrites,s);return Xs(o,r.getNode().getImmediateChild(n))}else return null}function TI(t,e){return us(t.visibleWrites,e)}function xI(t,e,n,r,s,i,o){let a;const l=Sr(t.visibleWrites,e),u=us(l,ve());if(u!=null)a=u;else if(n!=null)a=Xs(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],c=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let w=h.getNext();for(;w&&d.length<s;)c(w,r)!==0&&d.push(w),w=h.getNext();return d}else return[]}function bI(){return{visibleWrites:an.empty(),allWrites:[],lastWriteId:-1}}function pl(t,e,n,r){return Tv(t.writeTree,t.treePath,e,n,r)}function Oh(t,e){return CI(t.writeTree,t.treePath,e)}function im(t,e,n,r){return EI(t.writeTree,t.treePath,e,n,r)}function ml(t,e){return TI(t.writeTree,qe(t.treePath,e))}function PI(t,e,n,r,s,i){return xI(t.writeTree,t.treePath,e,n,r,s,i)}function Mh(t,e,n){return II(t.writeTree,t.treePath,e,n)}function xv(t,e){return bv(qe(t.treePath,e),t.writeTree)}function bv(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;H(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),H(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,wo(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,_o(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Ys(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,wo(r,e.snapshotNode,s.oldSnap));else throw si("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Pv=new RI;class Lh{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new xr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Mh(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:is(this.viewCache_),i=PI(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(t){return{filter:t}}function OI(t,e){H(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),H(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function MI(t,e,n,r,s){const i=new NI;let o,a;if(n.type===rn.OVERWRITE){const u=n;u.source.fromUser?o=cd(t,e,u.path,u.snap,r,s,i):(H(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!fe(u.path),o=gl(t,e,u.path,u.snap,r,s,a,i))}else if(n.type===rn.MERGE){const u=n;u.source.fromUser?o=DI(t,e,u.path,u.children,r,s,i):(H(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=dd(t,e,u.path,u.children,r,s,a,i))}else if(n.type===rn.ACK_USER_WRITE){const u=n;u.revert?o=UI(t,e,u.path,r,s,i):o=FI(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===rn.LISTEN_COMPLETE)o=jI(t,e,n.path,r,i);else throw si("Unknown operation type: "+n.type);const l=i.getChanges();return LI(e,o,l),{viewCache:o,changes:l}}function LI(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=fl(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(wv(fl(e)))}}function Nv(t,e,n,r,s,i){const o=e.eventCache;if(ml(r,n)!=null)return e;{let a,l;if(fe(n))if(H(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=is(e),d=u instanceof ne?u:ne.EMPTY_NODE,c=Oh(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const u=pl(r,is(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=ce(n);if(u===".priority"){H(Tr(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const c=im(r,n,d,l);c!=null?a=t.filter.updatePriority(d,c):a=o.getNode()}else{const d=Te(n);let c;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const h=im(r,n,o.getNode(),l);h!=null?c=o.getNode().getImmediateChild(u).updateChild(d,h):c=o.getNode().getImmediateChild(u)}else c=Mh(r,u,e.serverCache);c!=null?a=t.filter.updateChild(o.getNode(),u,c,d,s,i):a=o.getNode()}}return qi(e,a,o.isFullyInitialized()||fe(n),t.filter.filtersNodes())}}function gl(t,e,n,r,s,i,o,a){const l=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(fe(n))u=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const w=l.getNode().updateChild(n,r);u=d.updateFullNode(l.getNode(),w,null)}else{const w=ce(n);if(!l.isCompleteForPath(n)&&Tr(n)>1)return e;const _=Te(n),E=l.getNode().getImmediateChild(w).updateChild(_,r);w===".priority"?u=d.updatePriority(l.getNode(),E):u=d.updateChild(l.getNode(),w,E,_,Pv,null)}const c=Cv(e,u,l.isFullyInitialized()||fe(n),d.filtersNodes()),h=new Lh(s,c,i);return Nv(t,c,n,s,h,a)}function cd(t,e,n,r,s,i,o){const a=e.eventCache;let l,u;const d=new Lh(s,e,i);if(fe(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=qi(e,u,!0,t.filter.filtersNodes());else{const c=ce(n);if(c===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=qi(e,u,a.isFullyInitialized(),a.isFiltered());else{const h=Te(n),w=a.getNode().getImmediateChild(c);let _;if(fe(h))_=r;else{const v=d.getCompleteChild(c);v!=null?dv(h)===".priority"&&v.getChild(fv(h)).isEmpty()?_=v:_=v.updateChild(h,r):_=ne.EMPTY_NODE}if(w.equals(_))l=e;else{const v=t.filter.updateChild(a.getNode(),c,_,h,d,o);l=qi(e,v,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function om(t,e){return t.eventCache.isCompleteForChild(e)}function DI(t,e,n,r,s,i,o){let a=e;return r.foreach((l,u)=>{const d=qe(n,l);om(e,ce(d))&&(a=cd(t,a,d,u,s,i,o))}),r.foreach((l,u)=>{const d=qe(n,l);om(e,ce(d))||(a=cd(t,a,d,u,s,i,o))}),a}function am(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function dd(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;fe(n)?u=r:u=new Re(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((c,h)=>{if(d.hasChild(c)){const w=e.serverCache.getNode().getImmediateChild(c),_=am(t,w,h);l=gl(t,l,new Ce(c),_,s,i,o,a)}}),u.children.inorderTraversal((c,h)=>{const w=!e.serverCache.isCompleteForChild(c)&&h.value===null;if(!d.hasChild(c)&&!w){const _=e.serverCache.getNode().getImmediateChild(c),v=am(t,_,h);l=gl(t,l,new Ce(c),v,s,i,o,a)}}),l}function FI(t,e,n,r,s,i,o){if(ml(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(fe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return gl(t,e,n,l.getNode().getChild(n),s,i,a,o);if(fe(n)){let u=new Re(null);return l.getNode().forEachChild(Ds,(d,c)=>{u=u.set(new Ce(d),c)}),dd(t,e,n,u,s,i,a,o)}else return e}else{let u=new Re(null);return r.foreach((d,c)=>{const h=qe(n,d);l.isCompleteForPath(h)&&(u=u.set(d,l.getNode().getChild(h)))}),dd(t,e,n,u,s,i,a,o)}}function jI(t,e,n,r,s){const i=e.serverCache,o=Cv(e,i.getNode(),i.isFullyInitialized()||fe(n),i.isFiltered());return Nv(t,o,n,r,Pv,s)}function UI(t,e,n,r,s,i){let o;if(ml(r,n)!=null)return e;{const a=new Lh(r,e,s),l=e.eventCache.getNode();let u;if(fe(n)||ce(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=pl(r,is(e));else{const c=e.serverCache.getNode();H(c instanceof ne,"serverChildren would be complete if leaf node"),d=Oh(r,c)}d=d,u=t.filter.updateFullNode(l,d,i)}else{const d=ce(n);let c=Mh(r,d,e.serverCache);c==null&&e.serverCache.isCompleteForChild(d)&&(c=l.getImmediateChild(d)),c!=null?u=t.filter.updateChild(l,d,c,Te(n),a,i):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(l,d,ne.EMPTY_NODE,Te(n),a,i):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=pl(r,is(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||ml(r,ve())!=null,qi(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Ph(r.getIndex()),i=iI(r);this.processor_=AI(i);const o=n.serverCache,a=n.eventCache,l=s.updateFullNode(ne.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(ne.EMPTY_NODE,a.getNode(),null),d=new xr(l,o.isFullyInitialized(),s.filtersNodes()),c=new xr(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Ql(c,d),this.eventGenerator_=new hI(this.query_)}get query(){return this.query_}}function BI(t){return t.viewCache_.serverCache.getNode()}function zI(t){return fl(t.viewCache_)}function WI(t,e){const n=is(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!fe(e)&&!n.getImmediateChild(ce(e)).isEmpty())?n.getChild(e):null}function lm(t){return t.eventRegistrations_.length===0}function HI(t,e){t.eventRegistrations_.push(e)}function um(t,e,n){const r=[];if(n){H(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function cm(t,e,n,r){e.type===rn.MERGE&&e.source.queryId!==null&&(H(is(t.viewCache_),"We should always have a full cache before handling merges"),H(fl(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=MI(t.processor_,s,e,n,r);return OI(t.processor_,i.viewCache),H(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Rv(t,i.changes,i.viewCache.eventCache.getNode(),null)}function VI(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ue,(i,o)=>{r.push(Ys(i,o))}),n.isFullyInitialized()&&r.push(wv(n.getNode())),Rv(t,r,n.getNode(),e)}function Rv(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return fI(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl;class Av{constructor(){this.views=new Map}}function qI(t){H(!yl,"__referenceConstructor has already been defined"),yl=t}function GI(){return H(yl,"Reference.ts has not been loaded"),yl}function QI(t){return t.views.size===0}function Dh(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return H(i!=null,"SyncTree gave us an op for an invalid query."),cm(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(cm(o,e,n,r));return i}}function Ov(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=pl(n,s?r:null),l=!1;a?l=!0:r instanceof ne?(a=Oh(n,r),l=!1):(a=ne.EMPTY_NODE,l=!1);const u=Ql(new xr(a,l,!1),new xr(r,s,!1));return new $I(e,u)}return o}function KI(t,e,n,r,s,i){const o=Ov(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),HI(o,n),VI(o,n)}function YI(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=br(t);if(s==="default")for(const[l,u]of t.views.entries())o=o.concat(um(u,n,r)),lm(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||i.push(u.query));else{const l=t.views.get(s);l&&(o=o.concat(um(l,n,r)),lm(l)&&(t.views.delete(s),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!br(t)&&i.push(new(GI())(e._repo,e._path)),{removed:i,events:o}}function Mv(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function kr(t,e){let n=null;for(const r of t.views.values())n=n||WI(r,e);return n}function Lv(t,e){if(e._queryParams.loadsAllData())return Yl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Dv(t,e){return Lv(t,e)!=null}function br(t){return Yl(t)!=null}function Yl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vl;function XI(t){H(!vl,"__referenceConstructor has already been defined"),vl=t}function JI(){return H(vl,"Reference.ts has not been loaded"),vl}let ZI=1;class dm{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Re(null),this.pendingWriteTree_=bI(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Fv(t,e,n,r,s){return yI(t.pendingWriteTree_,e,n,r,s),s?jo(t,new ss(kv(),e,n)):[]}function Vr(t,e,n=!1){const r=vI(t.pendingWriteTree_,e);if(_I(t.pendingWriteTree_,e)){let i=new Re(null);return r.snap!=null?i=i.set(ve(),!0):xt(r.children,o=>{i=i.set(new Ce(o),!0)}),jo(t,new hl(r.path,i,n))}else return[]}function Fo(t,e,n){return jo(t,new ss(Rh(),e,n))}function eT(t,e,n){const r=Re.fromObject(n);return jo(t,new Co(Rh(),e,r))}function tT(t,e){return jo(t,new ko(Rh(),e))}function nT(t,e,n){const r=jh(t,n);if(r){const s=Uh(r),i=s.path,o=s.queryId,a=ft(i,e),l=new ko(Ah(o),a);return $h(t,i,l)}else return[]}function _l(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||Dv(o,e))){const l=YI(o,e,n,r);QI(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=l.removed;if(a=l.events,!s){const d=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,c=t.syncPointTree_.findOnPath(i,(h,w)=>br(w));if(d&&!c){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const w=iT(h);for(let _=0;_<w.length;++_){const v=w[_],E=v.query,p=Bv(t,v);t.listenProvider_.startListening(Qi(E),Eo(t,E),p.hashFn,p.onComplete)}}}!c&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(Qi(e),null):u.forEach(h=>{const w=t.queryToTagMap.get(Xl(h));t.listenProvider_.stopListening(Qi(h),w)}))}oT(t,u)}return a}function jv(t,e,n,r){const s=jh(t,r);if(s!=null){const i=Uh(s),o=i.path,a=i.queryId,l=ft(o,e),u=new ss(Ah(a),l,n);return $h(t,o,u)}else return[]}function rT(t,e,n,r){const s=jh(t,r);if(s){const i=Uh(s),o=i.path,a=i.queryId,l=ft(o,e),u=Re.fromObject(n),d=new Co(Ah(a),l,u);return $h(t,o,d)}else return[]}function hd(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,w)=>{const _=ft(h,s);i=i||kr(w,_),o=o||br(w)});let a=t.syncPointTree_.get(s);a?(o=o||br(a),i=i||kr(a,ve())):(a=new Av,t.syncPointTree_=t.syncPointTree_.set(s,a));let l;i!=null?l=!0:(l=!1,i=ne.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((w,_)=>{const v=kr(_,ve());v&&(i=i.updateImmediateChild(w,v))}));const u=Dv(a,e);if(!u&&!e._queryParams.loadsAllData()){const h=Xl(e);H(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const w=aT();t.queryToTagMap.set(h,w),t.tagToQueryMap.set(w,h)}const d=Kl(t.pendingWriteTree_,s);let c=KI(a,e,n,d,i,l);if(!u&&!o&&!r){const h=Lv(a,e);c=c.concat(lT(t,e,h))}return c}function Fh(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=ft(o,e),u=kr(a,l);if(u)return u});return Tv(s,e,i,n,!0)}function sT(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,d)=>{const c=ft(u,n);r=r||kr(d,c)});let s=t.syncPointTree_.get(n);s?r=r||kr(s,ve()):(s=new Av,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new xr(r,!0,!1):null,a=Kl(t.pendingWriteTree_,e._path),l=Ov(s,e,a,i?o.getNode():ne.EMPTY_NODE,i);return zI(l)}function jo(t,e){return Uv(e,t.syncPointTree_,null,Kl(t.pendingWriteTree_,ve()))}function Uv(t,e,n,r){if(fe(t.path))return $v(t,e,n,r);{const s=e.get(ve());n==null&&s!=null&&(n=kr(s,ve()));let i=[];const o=ce(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,d=xv(r,o);i=i.concat(Uv(a,l,u,d))}return s&&(i=i.concat(Dh(s,t,r,n))),i}}function $v(t,e,n,r){const s=e.get(ve());n==null&&s!=null&&(n=kr(s,ve()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=xv(r,o),d=t.operationForChild(o);d&&(i=i.concat($v(d,a,l,u)))}),s&&(i=i.concat(Dh(s,t,r,n))),i}function Bv(t,e){const n=e.query,r=Eo(t,n);return{hashFn:()=>(BI(e)||ne.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?nT(t,n._path,r):tT(t,n._path);{const i=sE(s,n);return _l(t,n,null,i)}}}}function Eo(t,e){const n=Xl(e);return t.queryToTagMap.get(n)}function Xl(t){return t._path.toString()+"$"+t._queryIdentifier}function jh(t,e){return t.tagToQueryMap.get(e)}function Uh(t){const e=t.indexOf("$");return H(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ce(t.substr(0,e))}}function $h(t,e,n){const r=t.syncPointTree_.get(e);H(r,"Missing sync point for query tag that we're tracking");const s=Kl(t.pendingWriteTree_,e);return Dh(r,n,s,null)}function iT(t){return t.fold((e,n,r)=>{if(n&&br(n))return[Yl(n)];{let s=[];return n&&(s=Mv(n)),xt(r,(i,o)=>{s=s.concat(o)}),s}})}function Qi(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(JI())(t._repo,t._path):t}function oT(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Xl(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function aT(){return ZI++}function lT(t,e,n){const r=e._path,s=Eo(t,e),i=Bv(t,n),o=t.listenProvider_.startListening(Qi(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)H(!br(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,d,c)=>{if(!fe(u)&&d&&br(d))return[Yl(d).query];{let h=[];return d&&(h=h.concat(Mv(d).map(w=>w.query))),xt(c,(w,_)=>{h=h.concat(_)}),h}});for(let u=0;u<l.length;++u){const d=l[u];t.listenProvider_.stopListening(Qi(d),Eo(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Bh(n)}node(){return this.node_}}class zh{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=qe(this.path_,e);return new zh(this.syncTree_,n)}node(){return Fh(this.syncTree_,this.path_)}}const uT=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},hm=function(t,e,n){if(!t||typeof t!="object")return t;if(H(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return cT(t[".sv"],e,n);if(typeof t[".sv"]=="object")return dT(t[".sv"],e);H(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},cT=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:H(!1,"Unexpected server value: "+t)}},dT=function(t,e,n){t.hasOwnProperty("increment")||H(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&H(!1,"Unexpected increment value: "+r);const s=e.node();if(H(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},hT=function(t,e,n,r){return Wh(e,new zh(n,t),r)},zv=function(t,e,n){return Wh(t,new Bh(e),n)};function Wh(t,e,n){const r=t.getPriority().val(),s=hm(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=hm(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Xe(a,et(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Xe(s))),o.forEachChild(Ue,(a,l)=>{const u=Wh(l,e.getImmediateChild(a),n);u!==l&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Vh(t,e){let n=e instanceof Ce?e:new Ce(e),r=t,s=ce(n);for(;s!==null;){const i=Gs(r.node.children,s)||{children:{},childCount:0};r=new Hh(s,r,i),n=Te(n),s=ce(n)}return r}function ui(t){return t.node.value}function Wv(t,e){t.node.value=e,fd(t)}function Hv(t){return t.node.childCount>0}function fT(t){return ui(t)===void 0&&!Hv(t)}function Jl(t,e){xt(t.node.children,(n,r)=>{e(new Hh(n,t,r))})}function Vv(t,e,n,r){n&&!r&&e(t),Jl(t,s=>{Vv(s,e,!0,r)}),n&&r&&e(t)}function pT(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Uo(t){return new Ce(t.parent===null?t.name:Uo(t.parent)+"/"+t.name)}function fd(t){t.parent!==null&&mT(t.parent,t.name,t)}function mT(t,e,n){const r=fT(n),s=Wn(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,fd(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,fd(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=/[\[\].#$\/\u0000-\u001F\u007F]/,yT=/[\[\].#$\u0000-\u001F\u007F]/,Vu=10*1024*1024,qv=function(t){return typeof t=="string"&&t.length!==0&&!gT.test(t)},Gv=function(t){return typeof t=="string"&&t.length!==0&&!yT.test(t)},vT=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Gv(t)},_T=function(t,e,n,r){qh(vh(t,"value"),e,n)},qh=function(t,e,n){const r=n instanceof Ce?new FE(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+$r(r));if(typeof e=="function")throw new Error(t+"contains a function "+$r(r)+" with contents = "+e.toString());if(Hy(e))throw new Error(t+"contains "+e.toString()+" "+$r(r));if(typeof e=="string"&&e.length>Vu/3&&ql(e)>Vu)throw new Error(t+"contains a string greater than "+Vu+" utf8 bytes "+$r(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(xt(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!qv(o)))throw new Error(t+" contains an invalid key ("+o+") "+$r(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);jE(r,o),qh(t,a,r),UE(r)}),s&&i)throw new Error(t+' contains ".value" child '+$r(r)+" in addition to actual children.")}},Qv=function(t,e,n,r){if(!Gv(n))throw new Error(vh(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},wT=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Qv(t,e,n)},Kv=function(t,e){if(ce(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},ST=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!qv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!vT(n))throw new Error(vh(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Gh(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Th(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function Yv(t,e,n){Gh(t,n),Xv(t,r=>Th(r,e))}function wn(t,e,n){Gh(t,n),Xv(t,r=>nn(r,e)||nn(e,r))}function Xv(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(CT(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function CT(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Hi&&ct("event: "+n.toString()),li(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="repo_interrupt",IT=25;class TT{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new kT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dl(),this.transactionQueueTree_=new Hh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function xT(t,e,n){if(t.stats_=Eh(t.repoInfo_),t.forceRestClient_||lE())t.server_=new cl(t.repoInfo_,(r,s,i,o)=>{fm(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>pm(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ve(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new On(t.repoInfo_,e,(r,s,i,o)=>{fm(t,r,s,i,o)},r=>{pm(t,r)},r=>{PT(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=fE(t.repoInfo_,()=>new dI(t.stats_,t.server_)),t.infoData_=new oI,t.infoSyncTree_=new dm({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Fo(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Kh(t,"connected",!1),t.serverSyncTree_=new dm({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const u=o(a,l);wn(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function bT(t){const n=t.infoData_.getNode(new Ce(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Qh(t){return uT({timestamp:bT(t)})}function fm(t,e,n,r,s){t.dataUpdateCount++;const i=new Ce(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=sl(n,u=>et(u));o=rT(t.serverSyncTree_,i,l,s)}else{const l=et(n);o=jv(t.serverSyncTree_,i,l,s)}else if(r){const l=sl(n,u=>et(u));o=eT(t.serverSyncTree_,i,l)}else{const l=et(n);o=Fo(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=eu(t,i)),wn(t.eventQueue_,a,o)}function pm(t,e){Kh(t,"connected",e),e===!1&&AT(t)}function PT(t,e){xt(e,(n,r)=>{Kh(t,n,r)})}function Kh(t,e,n){const r=new Ce("/.info/"+e),s=et(n);t.infoData_.updateSnapshot(r,s);const i=Fo(t.infoSyncTree_,r,s);wn(t.eventQueue_,r,i)}function Jv(t){return t.nextWriteId_++}function NT(t,e,n){const r=sT(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=et(s).withIndex(e._queryParams.getIndex());hd(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Fo(t.serverSyncTree_,e._path,i);else{const a=Eo(t.serverSyncTree_,e);o=jv(t.serverSyncTree_,e._path,i,a)}return wn(t.eventQueue_,e._path,o),_l(t.serverSyncTree_,e,n,null,!0),i},s=>(Zl(t,"get for query "+Ve(e)+" failed: "+s),Promise.reject(new Error(s))))}function RT(t,e,n,r,s){Zl(t,"set",{path:e.toString(),value:n,priority:r});const i=Qh(t),o=et(n,r),a=Fh(t.serverSyncTree_,e),l=zv(o,a,i),u=Jv(t),d=Fv(t.serverSyncTree_,e,l,u,!0);Gh(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(h,w)=>{const _=h==="ok";_||Tt("set at "+e+" failed: "+h);const v=Vr(t.serverSyncTree_,u,!_);wn(t.eventQueue_,e,v),LT(t,s,h,w)});const c=s_(t,e);eu(t,c),wn(t.eventQueue_,c,[])}function AT(t){Zl(t,"onDisconnectEvents");const e=Qh(t),n=dl();ad(t.onDisconnect_,ve(),(s,i)=>{const o=hT(s,i,t.serverSyncTree_,e);Sv(n,s,o)});let r=[];ad(n,ve(),(s,i)=>{r=r.concat(Fo(t.serverSyncTree_,s,i));const o=s_(t,s);eu(t,o)}),t.onDisconnect_=dl(),wn(t.eventQueue_,ve(),r)}function OT(t,e,n){let r;ce(e._path)===".info"?r=hd(t.infoSyncTree_,e,n):r=hd(t.serverSyncTree_,e,n),Yv(t.eventQueue_,e._path,r)}function Zv(t,e,n){let r;ce(e._path)===".info"?r=_l(t.infoSyncTree_,e,n):r=_l(t.serverSyncTree_,e,n),Yv(t.eventQueue_,e._path,r)}function MT(t){t.persistentConnection_&&t.persistentConnection_.interrupt(ET)}function Zl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ct(n,...e)}function LT(t,e,n,r){e&&li(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function e_(t,e,n){return Fh(t.serverSyncTree_,e,n)||ne.EMPTY_NODE}function Yh(t,e=t.transactionQueueTree_){if(e||tu(t,e),ui(e)){const n=n_(t,e);H(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&DT(t,Uo(e),n)}else Hv(e)&&Jl(e,n=>{Yh(t,n)})}function DT(t,e,n){const r=n.map(u=>u.currentWriteId),s=e_(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const d=n[u];H(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const c=ft(e,d.path);i=i.updateChild(c,d.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,u=>{Zl(t,"transaction put response",{path:l.toString(),status:u});let d=[];if(u==="ok"){const c=[];for(let h=0;h<n.length;h++)n[h].status=2,d=d.concat(Vr(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&c.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();tu(t,Vh(t.transactionQueueTree_,e)),Yh(t,t.transactionQueueTree_),wn(t.eventQueue_,e,d);for(let h=0;h<c.length;h++)li(c[h])}else{if(u==="datastale")for(let c=0;c<n.length;c++)n[c].status===3?n[c].status=4:n[c].status=0;else{Tt("transaction at "+l.toString()+" failed: "+u);for(let c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=u}eu(t,e)}},o)}function eu(t,e){const n=t_(t,e),r=Uo(n),s=n_(t,n);return FT(t,s,r),r}function FT(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=ft(n,l.path);let d=!1,c;if(H(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,c=l.abortReason,s=s.concat(Vr(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=IT)d=!0,c="maxretry",s=s.concat(Vr(t.serverSyncTree_,l.currentWriteId,!0));else{const h=e_(t,l.path,o);l.currentInputSnapshot=h;const w=e[a].update(h.val());if(w!==void 0){qh("transaction failed: Data returned ",w,l.path);let _=et(w);typeof w=="object"&&w!=null&&Wn(w,".priority")||(_=_.updatePriority(h.getPriority()));const E=l.currentWriteId,p=Qh(t),f=zv(_,h,p);l.currentOutputSnapshotRaw=_,l.currentOutputSnapshotResolved=f,l.currentWriteId=Jv(t),o.splice(o.indexOf(E),1),s=s.concat(Fv(t.serverSyncTree_,l.path,f,l.currentWriteId,l.applyLocally)),s=s.concat(Vr(t.serverSyncTree_,E,!0))}else d=!0,c="nodata",s=s.concat(Vr(t.serverSyncTree_,l.currentWriteId,!0))}wn(t.eventQueue_,n,s),s=[],d&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(c==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(c),!1,null))))}tu(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)li(r[a]);Yh(t,t.transactionQueueTree_)}function t_(t,e){let n,r=t.transactionQueueTree_;for(n=ce(e);n!==null&&ui(r)===void 0;)r=Vh(r,n),e=Te(e),n=ce(e);return r}function n_(t,e){const n=[];return r_(t,e,n),n.sort((r,s)=>r.order-s.order),n}function r_(t,e,n){const r=ui(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Jl(e,s=>{r_(t,s,n)})}function tu(t,e){const n=ui(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,Wv(e,n.length>0?n:void 0)}Jl(e,r=>{tu(t,r)})}function s_(t,e){const n=Uo(t_(t,e)),r=Vh(t.transactionQueueTree_,e);return pT(r,s=>{qu(t,s)}),qu(t,r),Vv(r,s=>{qu(t,s)}),n}function qu(t,e){const n=ui(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(H(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(H(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Vr(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Wv(e,void 0):n.length=i+1,wn(t.eventQueue_,Uo(e),s);for(let o=0;o<r.length;o++)li(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function UT(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Tt(`Invalid query segment '${n}' in query '${t}'`)}return e}const mm=function(t,e){const n=$T(t),r=n.namespace;n.domain==="firebase.com"&&Un(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Un("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||ZC();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new nv(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Ce(n.pathString)}},$T=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let c=t.indexOf("?");c===-1&&(c=t.length),e=t.substring(0,Math.min(d,c)),d<c&&(s=jT(t.substring(d,c)));const h=UT(t.substring(Math.min(t.length,c)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const w=e.slice(0,u);if(w.toLowerCase()==="localhost")n="localhost";else if(w.split(".").length<=2)n=w;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ve(this.snapshot.exportVal())}}class zT{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return H(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return fe(this._path)?null:dv(this._path)}get ref(){return new Hn(this._repo,this._path)}get _queryIdentifier(){const e=em(this._queryParams),n=kh(e);return n==="{}"?"default":n}get _queryObject(){return em(this._queryParams)}isEqual(e){if(e=bt(e),!(e instanceof Xh))return!1;const n=this._repo===e._repo,r=Th(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+DE(this._path)}}class Hn extends Xh{constructor(e,n){super(e,n,new Nh,!1)}get parent(){const e=fv(this._path);return e===null?null:new Hn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Io{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ce(e),r=ur(this.ref,e);return new Io(this._node.getChild(n),r,Ue)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Io(s,ur(this.ref,r),Ue)))}hasChild(e){const n=new Ce(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function le(t,e){return t=bt(t),t._checkNotDeleted("ref"),e!==void 0?ur(t._root,e):t._root}function ur(t,e){return t=bt(t),ce(t._path)===null?wT("child","path",e):Qv("child","path",e),new Hn(t._repo,qe(t._path,e))}function WT(t){return Kv("remove",t._path),ke(t,null)}function ke(t,e){t=bt(t),Kv("set",t._path),_T("set",e,t._path);const n=new Vl;return RT(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function mn(t){t=bt(t);const e=new i_(()=>{}),n=new nu(e);return NT(t._repo,t,n).then(r=>new Io(r,new Hn(t._repo,t._path),t._queryParams.getIndex()))}class nu{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new BT("value",this,new Io(e.snapshotNode,new Hn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new zT(this,e,n):null}matches(e){return e instanceof nu?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function HT(t,e,n,r,s){const i=new i_(n,void 0),o=new nu(i);return OT(t._repo,t,o),()=>Zv(t._repo,t,o)}function qr(t,e,n,r){return HT(t,"value",e)}function VT(t,e,n){Zv(t._repo,t,null)}qI(Hn);XI(Hn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="FIREBASE_DATABASE_EMULATOR_HOST",pd={};let GT=!1;function QT(t,e,n,r){t.repoInfo_=new nv(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function KT(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Un("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ct("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=mm(i,s),a=o.repoInfo,l;typeof process<"u"&&Dp&&(l=Dp[qT]),l?(i=`http://${l}?ns=${a.namespace}`,o=mm(i,s),a=o.repoInfo):o.repoInfo.secure;const u=new cE(t.name,t.options,e);ST("Invalid Firebase Database URL",o),fe(o.path)||Un("Database URL must point to the root of a Firebase Database (not including a child path).");const d=XT(a,t,u,new uE(t.name,n));return new JT(d,t)}function YT(t,e){const n=pd[e];(!n||n[t.key]!==t)&&Un(`Database ${e}(${t.repoInfo_}) has already been deleted.`),MT(t),delete n[t.key]}function XT(t,e,n,r){let s=pd[e.name];s||(s={},pd[e.name]=s);let i=s[t.toURLString()];return i&&Un("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new TT(t,GT,n,r),s[t.toURLString()]=i,i}class JT{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(xT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Hn(this._repo,ve())),this._rootInternal}_delete(){return this._rootInternal!==null&&(YT(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Un("Cannot call "+e+" on a deleted database.")}}function ZT(t=jy(),e){const n=Sh(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=kk("database");r&&ex(n,...r)}return n}function ex(t,e,n,r={}){t=bt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Un("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Un('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new Ta(Ta.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Ck(r.mockUserToken,t.app.options.projectId);i=new Ta(o)}QT(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t){GC(oi),Qs(new ns("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return KT(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),wr(Fp,jp,t),wr(Fp,jp,"esm2017")}On.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};On.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};tx();function Jh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function o_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nx=o_,a_=new Oo("auth","Firebase",o_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=new _h("@firebase/auth");function rx(t,...e){wl.logLevel<=Se.WARN&&wl.warn(`Auth (${oi}): ${t}`,...e)}function xa(t,...e){wl.logLevel<=Se.ERROR&&wl.error(`Auth (${oi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw Zh(t,...e)}function vn(t,...e){return Zh(t,...e)}function l_(t,e,n){const r=Object.assign(Object.assign({},nx()),{[e]:n});return new Oo("auth","Firebase",r).create(e,{appName:t.name})}function Cr(t){return l_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return a_.create(t,...e)}function re(t,e,...n){if(!t)throw Zh(e,...n)}function Pn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw xa(e),new Error(e)}function Bn(t,e){t||Pn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function sx(){return gm()==="http:"||gm()==="https:"}function gm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sx()||Ik()||"connection"in navigator)?navigator.onLine:!0}function ox(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bn(n>e,"Short delay should be less than long delay!"),this.isMobile=yh()||Ay()}get(){return ix()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(t,e){Bn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=new $o(3e4,6e4);function ru(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ci(t,e,n,r,s={}){return c_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ii(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},i);return Ek()||(u.referrerPolicy="no-referrer"),u_.fetch()(h_(t,t.config.apiHost,n,a),u)})}async function c_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ax),e);try{const s=new ux(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw la(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw la(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw la(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw la(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw l_(t,d,u);$n(t,d)}}catch(s){if(s instanceof Mr)throw s;$n(t,"network-request-failed",{message:String(s)})}}async function d_(t,e,n,r,s={}){const i=await ci(t,e,n,r,s);return"mfaPendingCredential"in i&&$n(t,"multi-factor-auth-required",{_serverResponse:i}),i}function h_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?ef(t.config,s):`${t.config.apiScheme}://${s}`}class ux{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vn(this.auth,"network-request-failed")),lx.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function la(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=vn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(t,e){return ci(t,"POST","/v1/accounts:delete",e)}async function f_(t,e){return ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dx(t,e=!1){const n=bt(t),r=await n.getIdToken(e),s=tf(r);re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ki(Gu(s.auth_time)),issuedAtTime:Ki(Gu(s.iat)),expirationTime:Ki(Gu(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Gu(t){return Number(t)*1e3}function tf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return xa("JWT malformed, contained fewer than 3 sections"),null;try{const s=rl(n);return s?JSON.parse(s):(xa("Failed to decode base64 JWT payload"),null)}catch(s){return xa("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ym(t){const e=tf(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Mr&&hx(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function hx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ki(this.lastLoginAt),this.creationTime=Ki(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await To(t,f_(n,{idToken:r}));re(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?p_(i.providerUserInfo):[],a=mx(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new gd(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,c)}async function px(t){const e=bt(t);await Sl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mx(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function p_(t){return t.map(e=>{var{providerId:n}=e,r=Jh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(t,e){const n=await c_(t,{},async()=>{const r=ii({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=h_(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",u_.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yx(t,e){return ci(t,"POST","/v2/accounts:revokeToken",ru(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ym(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=ym(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await gx(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Fs;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(re(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(re(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fs,this.toJSON())}_performRefresh(){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Jh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new gd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await To(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dx(this,e)}reload(){return px(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Nn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await To(this,cx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,d;const c=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,p=(u=n.createdAt)!==null&&u!==void 0?u:void 0,f=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:y,emailVerified:C,isAnonymous:T,providerData:N,stsTokenManager:D}=n;re(y&&D,e,"internal-error");const B=Fs.fromJSON(this.name,D);re(typeof y=="string",e,"internal-error"),Yn(c,e.name),Yn(h,e.name),re(typeof C=="boolean",e,"internal-error"),re(typeof T=="boolean",e,"internal-error"),Yn(w,e.name),Yn(_,e.name),Yn(v,e.name),Yn(E,e.name),Yn(p,e.name),Yn(f,e.name);const te=new Nn({uid:y,auth:e,email:h,emailVerified:C,displayName:c,isAnonymous:T,photoURL:_,phoneNumber:w,tenantId:v,stsTokenManager:B,createdAt:p,lastLoginAt:f});return N&&Array.isArray(N)&&(te.providerData=N.map(R=>Object.assign({},R))),E&&(te._redirectEventId=E),te}static async _fromIdTokenResponse(e,n,r=!1){const s=new Fs;s.updateFromServerResponse(n);const i=new Nn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Sl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];re(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?p_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Fs;a.updateFromIdToken(r);const l=new Nn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new gd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new Map;function Rn(t){Bn(t instanceof Function,"Expected a class definition");let e=vm.get(t);return e?(Bn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vm.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}m_.type="NONE";const _m=m_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t,e,n){return`firebase:${t}:${e}:${n}`}class js{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ba(this.userKey,s.apiKey,i),this.fullPersistenceKey=ba("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Nn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new js(Rn(_m),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Rn(_m);const o=ba(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const c=Nn._fromJSON(e,d);u!==i&&(a=c),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new js(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new js(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(__(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(g_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(S_(e))return"Blackberry";if(k_(e))return"Webos";if(y_(e))return"Safari";if((e.includes("chrome/")||v_(e))&&!e.includes("edge/"))return"Chrome";if(w_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function g_(t=mt()){return/firefox\//i.test(t)}function y_(t=mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function v_(t=mt()){return/crios\//i.test(t)}function __(t=mt()){return/iemobile/i.test(t)}function w_(t=mt()){return/android/i.test(t)}function S_(t=mt()){return/blackberry/i.test(t)}function k_(t=mt()){return/webos/i.test(t)}function nf(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vx(t=mt()){var e;return nf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _x(){return Tk()&&document.documentMode===10}function C_(t=mt()){return nf(t)||w_(t)||k_(t)||S_(t)||/windows phone/i.test(t)||__(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t,e=[]){let n;switch(t){case"Browser":n=wm(mt());break;case"Worker":n=`${wm(mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(t,e={}){return ci(t,"GET","/v2/passwordPolicy",ru(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=6;class Cx{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:kx,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sm(this),this.idTokenSubscription=new Sm(this),this.beforeStateQueue=new wx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=a_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await js.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await f_(this,{idToken:e}),r=await Nn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(xn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ox()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(Cr(this));const n=e?bt(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Sx(this),n=new Cx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Oo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yx(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rn(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await js.create(this,[Rn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&rx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function su(t){return bt(t)}class Sm{constructor(e){this.auth=e,this.observer=null,this.addObserver=Lk(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ix(t){rf=t}function Tx(t){return rf.loadJS(t)}function xx(){return rf.gapiScript}function bx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t,e){const n=Sh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(il(i,e??{}))return s;$n(s,"already-initialized")}return n.initialize({options:e})}function Nx(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Rn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Rx(t,e,n){const r=su(t);re(r._canInitEmulator,r,"emulator-config-failed"),re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=I_(e),{host:o,port:a}=Ax(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Ox()}function I_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ax(t){const e=I_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:km(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:km(o)}}}function km(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Ox(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(e){return Pn("not implemented")}_linkToIdToken(e,n){return Pn("not implemented")}_getReauthenticationResolver(e){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Us(t,e){return d_(t,"POST","/v1/accounts:signInWithIdp",ru(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="http://localhost";class os extends T_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Jh(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new os(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Us(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Us(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Us(e,n)}buildRequest(){const e={requestUri:Mx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ii(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends x_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Bo{constructor(){super("facebook.com")}static credential(e){return os._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Bo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return os._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return rr.credential(n,r)}catch{return null}}}rr.GOOGLE_SIGN_IN_METHOD="google.com";rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Bo{constructor(){super("github.com")}static credential(e){return os._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.GITHUB_SIGN_IN_METHOD="github.com";sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Bo{constructor(){super("twitter.com")}static credential(e,n){return os._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ir.credential(n,r)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(t,e){return d_(t,"POST","/v1/accounts:signUp",ru(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Nn._fromIdTokenResponse(e,r,s),o=Cm(r);return new Pr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Cm(r);return new Pr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Cm(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dx(t){var e;if(xn(t.app))return Promise.reject(Cr(t));const n=su(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Pr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Lx(n,{returnSecureToken:!0}),s=await Pr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends Mr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,kl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new kl(e,n,r,s)}}function b_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?kl._fromErrorAndOperation(t,i,e,r):i})}async function Fx(t,e,n=!1){const r=await To(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(t,e,n=!1){const{auth:r}=t;if(xn(r.app))return Promise.reject(Cr(r));const s="reauthenticate";try{const i=await To(t,b_(r,s,e,t),n);re(i.idToken,r,"internal-error");const o=tf(i.idToken);re(o,r,"internal-error");const{sub:a}=o;return re(t.uid===a,r,"user-mismatch"),Pr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$n(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ux(t,e,n=!1){if(xn(t.app))return Promise.reject(Cr(t));const r="signIn",s=await b_(t,r,e),i=await Pr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function $x(t,e,n,r){return bt(t).onIdTokenChanged(e,n,r)}function Bx(t,e,n){return bt(t).beforeAuthStateChanged(e,n)}function zx(t,e,n,r){return bt(t).onAuthStateChanged(e,n,r)}function Wx(t){return bt(t).signOut()}const Cl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cl,"1"),this.storage.removeItem(Cl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=1e3,Vx=10;class N_ extends P_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=C_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);_x()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Vx):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Hx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}N_.type="LOCAL";const qx=N_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_ extends P_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}R_.type="SESSION";const A_=R_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new iu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await Gx(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}iu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=sf("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(c){const h=c;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(h.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return window}function Kx(t){_n().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(){return typeof _n().WorkerGlobalScope<"u"&&typeof _n().importScripts=="function"}async function Yx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Xx(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Jx(){return O_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="firebaseLocalStorageDb",Zx=1,El="firebaseLocalStorage",L_="fbase_key";class zo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ou(t,e){return t.transaction([El],e?"readwrite":"readonly").objectStore(El)}function eb(){const t=indexedDB.deleteDatabase(M_);return new zo(t).toPromise()}function yd(){const t=indexedDB.open(M_,Zx);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(El,{keyPath:L_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(El)?e(r):(r.close(),await eb(),e(await yd()))})})}async function Em(t,e,n){const r=ou(t,!0).put({[L_]:e,value:n});return new zo(r).toPromise()}async function tb(t,e){const n=ou(t,!1).get(e),r=await new zo(n).toPromise();return r===void 0?null:r.value}function Im(t,e){const n=ou(t,!0).delete(e);return new zo(n).toPromise()}const nb=800,rb=3;class D_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rb)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=iu._getInstance(Jx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Yx(),!this.activeServiceWorker)return;this.sender=new Qx(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Xx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yd();return await Em(e,Cl,"1"),await Im(e,Cl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Em(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tb(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Im(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ou(s,!1).getAll();return new zo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}D_.type="LOCAL";const sb=D_;new $o(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t,e){return e?Rn(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of extends T_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Us(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Us(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Us(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ob(t){return Ux(t.auth,new of(t),t.bypassAuthState)}function ab(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),jx(n,new of(t),t.bypassAuthState)}async function lb(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),Fx(n,new of(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ob;case"linkViaPopup":case"linkViaRedirect":return lb;case"reauthViaPopup":case"reauthViaRedirect":return ab;default:$n(this.auth,"internal-error")}}resolve(e){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new $o(2e3,1e4);class bs extends F_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,bs.currentPopupAction&&bs.currentPopupAction.cancel(),bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Bn(this.filter.length===1,"Popup operations only handle one event");const e=sf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ub.get())};e()}}bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="pendingRedirect",Pa=new Map;class db extends F_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Pa.get(this.auth._key());if(!e){try{const r=await hb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pa.set(this.auth._key(),e)}return this.bypassAuthState||Pa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hb(t,e){const n=mb(e),r=pb(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function fb(t,e){Pa.set(t._key(),e)}function pb(t){return Rn(t._redirectPersistence)}function mb(t){return ba(cb,t.config.apiKey,t.name)}async function gb(t,e,n=!1){if(xn(t.app))return Promise.reject(Cr(t));const r=su(t),s=ib(r,e),o=await new db(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=10*60*1e3;class vb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_b(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!j_(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(vn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yb&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tm(e))}saveEventToCache(e){this.cachedEventUids.add(Tm(e)),this.lastProcessedEventTime=Date.now()}}function Tm(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function j_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _b(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wb(t,e={}){return ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kb=/^https?/;async function Cb(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wb(t);for(const n of e)try{if(Eb(n))return}catch{}$n(t,"unauthorized-domain")}function Eb(t){const e=md(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!kb.test(n))return!1;if(Sb.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=new $o(3e4,6e4);function xm(){const t=_n().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Tb(t){return new Promise((e,n)=>{var r,s,i;function o(){xm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xm(),n(vn(t,"network-request-failed"))},timeout:Ib.get()})}if(!((s=(r=_n().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=_n().gapi)===null||i===void 0)&&i.load)o();else{const a=bx("iframefcb");return _n()[a]=()=>{gapi.load?o():n(vn(t,"network-request-failed"))},Tx(`${xx()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Na=null,e})}let Na=null;function xb(t){return Na=Na||Tb(t),Na}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=new $o(5e3,15e3),Pb="__/auth/iframe",Nb="emulator/auth/iframe",Rb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ab=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ob(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ef(e,Nb):`https://${t.config.authDomain}/${Pb}`,r={apiKey:e.apiKey,appName:t.name,v:oi},s=Ab.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ii(r).slice(1)}`}async function Mb(t){const e=await xb(t),n=_n().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:Ob(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rb,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=vn(t,"network-request-failed"),a=_n().setTimeout(()=>{i(o)},bb.get());function l(){_n().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Db=500,Fb=600,jb="_blank",Ub="http://localhost";class bm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $b(t,e,n,r=Db,s=Fb){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Lb),{width:r.toString(),height:s.toString(),top:i,left:o}),u=mt().toLowerCase();n&&(a=v_(u)?jb:n),g_(u)&&(e=e||Ub,l.scrollbars="yes");const d=Object.entries(l).reduce((h,[w,_])=>`${h}${w}=${_},`,"");if(vx(u)&&a!=="_self")return Bb(e||"",a),new bm(null);const c=window.open(e||"",a,d);re(c,t,"popup-blocked");try{c.focus()}catch{}return new bm(c)}function Bb(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="__/auth/handler",Wb="emulator/auth/handler",Hb=encodeURIComponent("fac");async function Pm(t,e,n,r,s,i){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:oi,eventId:s};if(e instanceof x_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Jc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,c]of Object.entries({}))o[d]=c}if(e instanceof Bo){const d=e.getScopes().filter(c=>c!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${Hb}=${encodeURIComponent(l)}`:"";return`${Vb(t)}?${ii(a).slice(1)}${u}`}function Vb({config:t}){return t.emulator?ef(t,Wb):`https://${t.authDomain}/${zb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu="webStorageSupport";class qb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=A_,this._completeRedirectFn=gb,this._overrideRedirectResult=fb}async _openPopup(e,n,r,s){var i;Bn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Pm(e,n,r,md(),s);return $b(e,o,sf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Pm(e,n,r,md(),s);return Kx(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Bn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Mb(e),r=new vb(e);return n.register("authEvent",s=>(re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qu,{type:Qu},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Qu];o!==void 0&&n(!!o),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Cb(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return C_()||y_()||nf()}}const Gb=qb;var Nm="@firebase/auth",Rm="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Yb(t){Qs(new ns("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E_(t)},u=new Ex(r,s,i,l);return Nx(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qs(new ns("auth-internal",e=>{const n=su(e.getProvider("auth").getImmediate());return(r=>new Qb(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wr(Nm,Rm,Kb(t)),wr(Nm,Rm,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=5*60,Jb=Ry("authIdTokenMaxAge")||Xb;let Am=null;const Zb=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Jb)return;const s=n==null?void 0:n.token;Am!==s&&(Am=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function eP(t=jy()){const e=Sh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Px(t,{popupRedirectResolver:Gb,persistence:[sb,qx,A_]}),r=Ry("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Zb(i.toString());Bx(n,o,()=>o(n.currentUser)),$x(n,a=>o(a))}}const s=Py("auth");return s&&Rx(n,`http://${s}`),n}function tP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Ix({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=vn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",tP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Yb("Browser");const Om={apiKey:"AIzaSyAYO5u6u1c5cjqx1uLfpDjrnYx_RTgSYHc",authDomain:"tin-dtk.firebaseapp.com",databaseURL:"https://tin-dtk-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tin-dtk",storageBucket:"tin-dtk.appspot.com",messagingSenderId:"902609399964",appId:"1:902609399964:web:35165f5f40d995cce6fd59"},nP=[{id:"P01",name:"Healing Herbcraft",type:"self",damageType:"heal",damage:10,cost:{mana:5},av:1,users:["naturalist"],unlocks:{req:[{id:"007",amount:1},{id:"008",amount:1},{id:"009",amount:1},{id:"010",amount:1},{id:"011",amount:1}]}},{id:"P02",name:"Life Transfer",type:"ally",damageType:"heal",damage:25,cost:{health:25},av:1,users:["naturalist"],unlocks:{req:[{id:"007",amount:1},{id:"008",amount:1},{id:"009",amount:1},{id:"010",amount:1},{id:"011",amount:1}],pre:"P01"}},{id:"P03",name:"Herbal Regeneration",type:"self",damageType:"status",damage:0,cost:{mana:1},av:1,users:["naturalist"],description:"Heal over time",unlocks:{req:[{id:"007",amount:1},{id:"008",amount:1},{id:"009",amount:1},{id:"010",amount:1},{id:"011",amount:1}],pre:"P02"}},{id:"P04",name:"Herbal Injection",type:"ally",damageType:"heal",damage:100,cost:{mana:10},av:1,users:["naturalist"],unlocks:{req:[{id:"007",amount:1},{id:"008",amount:1},{id:"009",amount:1},{id:"010",amount:1},{id:"011",amount:1}],pre:"P03"}},{id:"P05",name:"Flower Shower",type:"ally_all",damageType:"heal",damage:60,cost:{mana:20},av:1,users:["naturalist"],unlocks:{req:[{id:"007",amount:1},{id:"008",amount:1},{id:"009",amount:1},{id:"010",amount:1},{id:"011",amount:1}],pre:"P04"}},{id:"P06",name:"seed shot",type:"single",damageType:"damage",damage:100,cost:{health:5},av:1,users:["naturalist"],unlocks:{req:[{id:"007",amount:1},{id:"008",amount:1},{id:"009",amount:1},{id:"010",amount:1},{id:"011",amount:1}]}},{id:"P07",name:"seed spread shot",type:"aoe",damageType:"damage",damage:140,cost:{health:10},av:1,users:["naturalist"],unlocks:{req:[{id:"007",amount:1},{id:"008",amount:1},{id:"009",amount:1},{id:"010",amount:1},{id:"011",amount:1}],pre:"P06"}},{id:"P08",name:"poison thorn",type:"single",damageType:"status",damage:40,cost:{mana:2},av:1,users:["naturalist"],description:"Inflicts poison",unlocks:{req:[{id:"007",amount:1},{id:"008",amount:1},{id:"009",amount:1},{id:"010",amount:1},{id:"011",amount:1}]}},{id:"P09",name:"Drowsy Dewdrops",type:"single",damageType:"status",damage:0,cost:{mana:10},av:1,users:["naturalist"],description:"Chance to Inflict sleep",unlocks:{pre:"P08",req:[{id:"007",amount:1},{id:"008",amount:1},{id:"009",amount:1},{id:"010",amount:1},{id:"011",amount:1}]}},{id:"P10",name:"Entangle Overgrowth",type:"aoe",damageType:"status",damage:0,cost:{mana:20},av:1,users:["naturalist"],description:"Chance to Inflict bind",unlocks:{pre:"P09",req:[{id:"007",amount:1},{id:"008",amount:1},{id:"009",amount:1},{id:"010",amount:1},{id:"011",amount:1}]}},{id:"I01",name:"Beetle Aspect",type:"ally_any",damageType:"status",damage:0,cost:{mana:2},av:1,users:["naturalist"],description:"Gain defence",unlocks:{req:[{id:"012",amount:1},{id:"013",amount:1},{id:"014",amount:1},{id:"015",amount:1},{id:"016",amount:1}]}},{id:"I02",name:"Mantis Aspect",type:"ally_any",damageType:"status",damage:0,cost:{mana:5},av:1,users:["naturalist"],description:"Gain attack",unlocks:{pre:"I01",req:[{id:"012",amount:1},{id:"013",amount:1},{id:"014",amount:1},{id:"015",amount:1},{id:"016",amount:1}]}},{id:"I03",name:"Dragonfly Aspect",type:"ally_any",damageType:"status",damage:0,cost:{mana:10},av:1,users:["naturalist"],description:"Gain speed",unlocks:{pre:"I02",req:[{id:"012",amount:1},{id:"013",amount:1},{id:"014",amount:1},{id:"015",amount:1},{id:"016",amount:1}]}},{id:"I04",name:"Leech Aspect",type:"ally_any",damageType:"status",damage:0,cost:{mana:20},av:1,users:["naturalist"],description:"Gain lifesteal",unlocks:{pre:"I03",req:[{id:"012",amount:1},{id:"013",amount:1},{id:"014",amount:1},{id:"015",amount:1},{id:"016",amount:1}]}},{id:"I05",name:"Butterfly Rebirth",type:"ally",damageType:"status",damage:0,cost:{mana:60},av:2,users:["naturalist"],description:"Revive fallen ally",unlocks:{pre:"I04",req:[{id:"012",amount:1},{id:"013",amount:1},{id:"014",amount:1},{id:"015",amount:1},{id:"016",amount:1}]}},{id:"I06",name:"Spider Bite",type:"single",damageType:"status",damage:40,cost:{mana:2},av:1,users:["naturalist"],description:"Inflicts venom",unlocks:{req:[{id:"012",amount:1},{id:"013",amount:1},{id:"014",amount:1},{id:"015",amount:1},{id:"016",amount:1}]}},{id:"I07",name:"Wasp Sting",type:"single",damageType:"status",damage:40,cost:{mana:5},av:1,users:["naturalist"],description:"Lower defence",unlocks:{pre:"I06",req:[{id:"012",amount:1},{id:"013",amount:1},{id:"014",amount:1},{id:"015",amount:1},{id:"016",amount:1}]}},{id:"I08",name:"Venom Spray",type:"aoe",damageType:"status",damage:100,cost:{mana:10},av:1,users:["naturalist"],description:"Inflics venom",unlocks:{pre:"I07",req:[{id:"012",amount:1},{id:"013",amount:1},{id:"014",amount:1},{id:"015",amount:1},{id:"016",amount:1}]}},{id:"W01",name:"rain",type:"self",damageType:"status",damage:0,cost:{mana:5},av:1,users:["naturalist"],unlocks:{req:[{id:"017",amount:1},{id:"018",amount:1},{id:"019",amount:1},{id:"020",amount:1},{id:"021",amount:1}]}},{id:"W02",name:"lightning",type:"single",damageType:"damage",damage:240,cost:{mana:10},av:1,users:["naturalist"],unlocks:{pre:"W01",req:[{id:"017",amount:1},{id:"018",amount:1},{id:"019",amount:1},{id:"020",amount:1},{id:"021",amount:1}]}},{id:"W03",name:"storm",type:"aoe",damageType:"damage",damage:200,cost:{mana:20},av:1,users:["naturalist"],unlocks:{pre:"W02",req:[{id:"017",amount:1},{id:"018",amount:1},{id:"019",amount:1},{id:"020",amount:1},{id:"021",amount:1}]}},{id:"W04",name:"Flash Flood",type:"field",damageType:"damage",damage:1e3,cost:{mana:40},av:1,users:["naturalist"],unlocks:{pre:"W03",req:[{id:"017",amount:1},{id:"018",amount:1},{id:"019",amount:1},{id:"020",amount:1},{id:"021",amount:1}]}},{id:"W05",name:"Tsunami",type:"aoe",damageType:"damage",damage:500,cost:{mana:40},av:1,users:["naturalist"],unlocks:{pre:"W04",req:[{id:"017",amount:1},{id:"018",amount:1},{id:"019",amount:1},{id:"020",amount:1},{id:"021",amount:1}]}},{id:"W06",name:"Wildfire",type:"aoe",damageType:"status",damage:100,cost:{mana:10},av:1,users:["naturalist"],description:"Inflicts burn",unlocks:{req:[{id:"017",amount:1},{id:"018",amount:1},{id:"019",amount:1},{id:"020",amount:1},{id:"021",amount:1}]}},{id:"W07",name:"Earthquake",type:"field",damageType:"status",damage:200,cost:{mana:20},av:1,users:["naturalist"],description:"Inflicts tremors",unlocks:{pre:"W06",req:[{id:"017",amount:1},{id:"018",amount:1},{id:"019",amount:1},{id:"020",amount:1},{id:"021",amount:1}]}},{id:"W08",name:"Eruption",type:"aoe",damageType:"status",damage:400,cost:{mana:50},av:3,users:["naturalist"],description:"Inflicts severe burn",unlocks:{pre:"W07",req:[{id:"017",amount:1},{id:"018",amount:1},{id:"019",amount:1},{id:"020",amount:1},{id:"021",amount:1}]}},{id:"OH01",name:"Gun Fire",type:"single",damageType:"damage",damage:100,cost:{psp:5},av:1,users:["technologist"],unlocks:{req:[{id:"022",amount:1},{id:"023",amount:1},{id:"024",amount:1},{id:"025",amount:1},{id:"026",amount:1}]}},{id:"OH02",name:"Grenade",type:"aoe",damageType:"damage",damage:140,cost:{psp:5},av:1,users:["technologist"],unlocks:{pre:"OH01",req:[{id:"022",amount:1},{id:"023",amount:1},{id:"024",amount:1},{id:"025",amount:1},{id:"026",amount:1}]}},{id:"OH03",name:"Flamethrower",type:"aoe",damageType:"status",damage:100,cost:{psp:10},av:1,users:["technologist"],description:"Inflicts burn",unlocks:{pre:"OH02",req:[{id:"022",amount:1},{id:"023",amount:1},{id:"024",amount:1},{id:"025",amount:1},{id:"026",amount:1}]}},{id:"OH04",name:"Rocket Launcher",type:"aoe",damageType:"damage",damage:400,cost:{psp:15},av:1,users:["technologist"],unlocks:{pre:"OH03",req:[{id:"022",amount:1},{id:"023",amount:1},{id:"024",amount:1},{id:"025",amount:1},{id:"026",amount:1}]}},{id:"OH05",name:"Nuclear Strike",type:"field",damageType:"damage",damage:2e3,cost:{psp:20},av:1,users:["technologist"],unlocks:{pre:"OH04",req:[{id:"022",amount:1},{id:"023",amount:1},{id:"024",amount:1},{id:"025",amount:1},{id:"026",amount:1}]}},{id:"OH06",name:"Napalm Strike",type:"aoe",damageType:"damage",damage:1e3,cost:{psp:20},av:1,users:["technologist"],unlocks:{pre:"OH07",req:[{id:"022",amount:1},{id:"023",amount:1},{id:"024",amount:1},{id:"025",amount:1},{id:"026",amount:1}]}},{id:"OH07",name:"Heatwave Heckle",type:"self",damageType:"status",damage:0,cost:{psp:5},av:1,users:["technologist"],unlocks:{req:[{id:"022",amount:1},{id:"023",amount:1},{id:"024",amount:1},{id:"025",amount:1},{id:"026",amount:1}]}},{id:"OH08",name:"Stab",type:"single",damageType:"damage",damage:80,cost:{},av:1,users:["technologist"],unlocks:{req:[{id:"022",amount:1},{id:"023",amount:1},{id:"024",amount:1},{id:"025",amount:1},{id:"026",amount:1}]}},{id:"OL01",name:"Energy Shield",type:"self",damageType:"shield",damage:1,cost:{msp:1},av:1,users:["technologist"],unlocks:{req:[{id:"027",amount:1},{id:"028",amount:1},{id:"029",amount:1},{id:"030",amount:1},{id:"031",amount:1}]}},{id:"OL02",name:"Charge",type:"self",damageType:"status",damage:0,cost:{},av:1,users:["technologist"],description:"Chance to regen overload each turn",unlocks:{req:[{id:"027",amount:1},{id:"028",amount:1},{id:"029",amount:1},{id:"030",amount:1},{id:"031",amount:1}]}},{id:"OL03",name:"Charge Blade",type:"single",damageType:"damage",damage:80,cost:{msp:1},av:1,users:["technologist"],unlocks:{req:[{id:"027",amount:1},{id:"028",amount:1},{id:"029",amount:1},{id:"030",amount:1},{id:"031",amount:1}]}},{id:"OL04",name:"Discharge Blade",type:"single",damageType:"damage",damage:500,cost:{msp:20},av:1,users:["technologist"],unlocks:{pre:"OL03",req:[{id:"027",amount:1},{id:"028",amount:1},{id:"029",amount:1},{id:"030",amount:1},{id:"031",amount:1}]}},{id:"OL05",name:"Laser Rifle",type:"single",damageType:"damage",damage:140,cost:{msp:5},av:1,users:["technologist"],unlocks:{req:[{id:"027",amount:1},{id:"028",amount:1},{id:"029",amount:1},{id:"030",amount:1},{id:"031",amount:1}]}},{id:"OL06",name:"Stun Grenade",type:"aoe",damageType:"status",damage:100,cost:{msp:10},av:1,users:["technologist"],description:"Chance to stun targets",unlocks:{pre:"OL05",req:[{id:"027",amount:1},{id:"028",amount:1},{id:"029",amount:1},{id:"030",amount:1},{id:"031",amount:1}]}},{id:"OL07",name:"Charge Cannon",type:"aoe",damageType:"damage",damage:200,cost:{msp:10},av:1,users:["technologist"],unlocks:{pre:"OL06",req:[{id:"027",amount:1},{id:"028",amount:1},{id:"029",amount:1},{id:"030",amount:1},{id:"031",amount:1}]}},{id:"OL08",name:"Discharge Cannon",type:"aoe",damageType:"damage",damage:1e3,cost:{msp:20},av:1,users:["technologist"],unlocks:{pre:"OL07",req:[{id:"027",amount:1},{id:"028",amount:1},{id:"029",amount:1},{id:"030",amount:1},{id:"031",amount:1}]}},{id:"OL09",name:"Satelite Laser",type:"field",damageType:"damage",damage:1e3,cost:{msp:15},av:1,users:["technologist"],unlocks:{pre:"OL08",req:[{id:"027",amount:1},{id:"028",amount:1},{id:"029",amount:1},{id:"030",amount:1},{id:"031",amount:1}]}},{id:"SH01",name:"Regeneration Shield",type:"self",damageType:"status",damage:0,cost:{msp:1},av:1,users:["technologist"],unlocks:{req:[{id:"032",amount:1},{id:"033",amount:1},{id:"034",amount:1},{id:"035",amount:1},{id:"036",amount:1}]}},{id:"SH02",name:"Shield Transfer",type:"ally",damageType:"shield",damage:10,cost:{shield:25},av:1,users:["technologist"],unlocks:{pre:"SH01",req:[{id:"032",amount:1},{id:"033",amount:1},{id:"034",amount:1},{id:"035",amount:1},{id:"036",amount:1}]}},{id:"SH03",name:"Reflect",type:"self",damageType:"status",damage:0,cost:{msp:5},av:1,users:["technologist"],unlocks:{pre:"SH02",req:[{id:"032",amount:1},{id:"033",amount:1},{id:"034",amount:1},{id:"035",amount:1},{id:"036",amount:1}]}},{id:"SH04",name:"Plasma Shield Other",type:"ally_any",damageType:"shield",damage:100,cost:{msp:5},av:1,users:["technologist"],unlocks:{pre:"SH03",req:[{id:"032",amount:1},{id:"033",amount:1},{id:"034",amount:1},{id:"035",amount:1},{id:"036",amount:1}]}},{id:"SH05",name:"Plasma Shield All",type:"ally_all",damageType:"shield",damage:100,cost:{msp:20},av:1,users:["technologist"],unlocks:{pre:"SH04",req:[{id:"032",amount:1},{id:"033",amount:1},{id:"034",amount:1},{id:"035",amount:1},{id:"036",amount:1}]}},{id:"SH06",name:"Shield Conversion",type:"self",damageType:"shield",damage:50,cost:{health:50},av:1,users:["technologist"],unlocks:{req:[{id:"032",amount:1},{id:"033",amount:1},{id:"034",amount:1},{id:"035",amount:1},{id:"036",amount:1}]}},{id:"SH07",name:"Heat Shield",type:"self",damageType:"shield",damage:10,cost:{psp:5},av:1,users:["technologist"],unlocks:{pre:"SH06",req:[{id:"032",amount:1},{id:"033",amount:1},{id:"034",amount:1},{id:"035",amount:1},{id:"036",amount:1}]}},{id:"SH08",name:"Shield Discharge",type:"aoe",damageType:"damage",damage:1e3,cost:{shield:100,msp:20},av:1,users:["technologist"],unlocks:{req:[{id:"032",amount:1},{id:"033",amount:1},{id:"034",amount:1},{id:"035",amount:1},{id:"036",amount:1}]}},{id:"SP01",name:"Sylph",type:"self",damageType:"status",damage:0,cost:{soul:10},av:1,users:["spiritualist"],description:"Chance to double action",unlocks:{req:[{id:"043",amount:1},{id:"044",amount:1},{id:"045",amount:1},{id:"046",amount:1},{id:"047",amount:1}]}},{id:"SP02",name:"Gnome",type:"self",damageType:"status",damage:0,cost:{soul:20},av:1,users:["spiritualist"],description:"Gain defence",unlocks:{pre:"SP01",req:[{id:"043",amount:1},{id:"044",amount:1},{id:"045",amount:1},{id:"046",amount:1},{id:"047",amount:1}]}},{id:"SP03",name:"Undine",type:"self",damageType:"status",damage:0,cost:{soul:20},av:1,users:["spiritualist"],description:"Gain Evasion Chance",unlocks:{pre:"SP02",req:[{id:"043",amount:1},{id:"044",amount:1},{id:"045",amount:1},{id:"046",amount:1},{id:"047",amount:1}]}},{id:"SP04",name:"Salamander",type:"self",damageType:"status",damage:0,cost:{soul:20},av:1,users:["spiritualist"],description:"Gain attack",unlocks:{pre:"SP03",req:[{id:"043",amount:1},{id:"044",amount:1},{id:"045",amount:1},{id:"046",amount:1},{id:"047",amount:1}]}},{id:"SP05",name:"Spirit Combo",type:"self",damageType:"status",damage:0,cost:{soul:70},av:1,users:["spiritualist"],description:"I Don't work yet",unlocks:{pre:"SP04",req:[{id:"043",amount:1},{id:"044",amount:1},{id:"045",amount:1},{id:"046",amount:1},{id:"047",amount:1}]}},{id:"SP06",name:"Gale",type:"single",damageType:"damage",damage:60,cost:{soul:1},av:1,users:["spiritualist"],unlocks:{req:[{id:"043",amount:1},{id:"044",amount:1},{id:"045",amount:1},{id:"046",amount:1},{id:"047",amount:1}]}},{id:"SP07",name:"Stone Bullet",type:"single",damageType:"damage",damage:240,cost:{soul:5},av:1,users:["spiritualist"],unlocks:{pre:"SP06",req:[{id:"043",amount:1},{id:"044",amount:1},{id:"045",amount:1},{id:"046",amount:1},{id:"047",amount:1}]}},{id:"SP08",name:"Water Hose",type:"single",damageType:"damage",damage:140,cost:{soul:2},av:1,users:["spiritualist"],unlocks:{pre:"SP07",req:[{id:"043",amount:1},{id:"044",amount:1},{id:"045",amount:1},{id:"046",amount:1},{id:"047",amount:1}]}},{id:"SP09",name:"Flame Breath",type:"aoe",damageType:"damage",damage:400,cost:{soul:20},av:1,users:["spiritualist"],unlocks:{pre:"SP08",req:[{id:"043",amount:1},{id:"044",amount:1},{id:"045",amount:1},{id:"046",amount:1},{id:"047",amount:1}]}},{id:"A01",name:"Demon Cocoon",type:"self",damageType:"status",damage:0,cost:{},av:1,users:["spiritualist"],description:"Convert hp into soul over time",unlocks:{req:[{id:"048",amount:1},{id:"049",amount:1},{id:"050",amount:1},{id:"051",amount:1},{id:"052",amount:1}]}},{id:"A02",name:"Demon Possesion",type:"self",damageType:"status",damage:0,cost:{soul:20},av:1,users:["spiritualist"],unlocks:{pre:"A01",req:[{id:"048",amount:1},{id:"049",amount:1},{id:"050",amount:1},{id:"051",amount:1},{id:"052",amount:1}]}},{id:"A03",name:"Dual Slash",type:"single",damageType:"damage",damage:50,cost:{},av:1,users:["spiritualist"],unlocks:{req:[{id:"048",amount:1},{id:"049",amount:1},{id:"050",amount:1},{id:"051",amount:1},{id:"052",amount:1}]}},{id:"A04",name:"Demon Claws",type:"single",damageType:"damage",damage:200,cost:{soul:1,health:5},av:1,users:["spiritualist"],unlocks:{pre:"A03",req:[{id:"048",amount:1},{id:"049",amount:1},{id:"050",amount:1},{id:"051",amount:1},{id:"052",amount:1}]}},{id:"A05",name:"Curse",type:"single",damageType:"status",damage:0,cost:{soul:10},av:1,users:["spiritualist"],description:"Decreases enemies ability to heal",unlocks:{pre:"A04",req:[{id:"048",amount:1},{id:"049",amount:1},{id:"050",amount:1},{id:"051",amount:1},{id:"052",amount:1}]}},{id:"A06",name:"Demons Dance",type:"single",damageType:"damage",damage:400,cost:{soul:1,health:20},av:1,users:["spiritualist"],unlocks:{pre:"A05",req:[{id:"048",amount:1},{id:"049",amount:1},{id:"050",amount:1},{id:"051",amount:1},{id:"052",amount:1}]}},{id:"A07",name:"Demons Banquet",type:"single",damageType:"damage",damage:2e3,cost:{soul:40,health:80},av:1,users:["spiritualist"],unlocks:{pre:"A06",req:[{id:"048",amount:1},{id:"049",amount:1},{id:"050",amount:1},{id:"051",amount:1},{id:"052",amount:1}]}},{id:"D01",name:"Guardian Angel",type:"ally_any",damageType:"status",damage:0,cost:{soul:10},av:1,users:["spiritualist"],unlocks:{req:[{id:"053",amount:1},{id:"054",amount:1},{id:"055",amount:1},{id:"056",amount:1},{id:"057",amount:1}]}},{id:"D02",name:"Archangel Possesion",type:"self",damageType:"status",damage:0,cost:{soul:20},av:1,users:["spiritualist"],unlocks:{pre:"D01",req:[{id:"053",amount:1},{id:"054",amount:1},{id:"055",amount:1},{id:"056",amount:1},{id:"057",amount:1}]}},{id:"D03",name:"Angels Feather",type:"single",damageType:"status",damage:0,cost:{soul:3},av:1,users:["spiritualist"],unlocks:{req:[{id:"053",amount:1},{id:"054",amount:1},{id:"055",amount:1},{id:"056",amount:1},{id:"057",amount:1}]}},{id:"D04",name:"Blinding Light",type:"single",damageType:"status",damage:0,cost:{soul:10},av:1,users:["spiritualist"],unlocks:{pre:"D03",req:[{id:"053",amount:1},{id:"054",amount:1},{id:"055",amount:1},{id:"056",amount:1},{id:"057",amount:1}]}},{id:"D05",name:"Cupids Arrow",type:"single",damageType:"status",damage:0,cost:{soul:10},av:1,users:["spiritualist"],unlocks:{pre:"D04",req:[{id:"053",amount:1},{id:"054",amount:1},{id:"055",amount:1},{id:"056",amount:1},{id:"057",amount:1}]}}],U_={all:nP},rP={stats:{level:1,xp:0,rank:"",combat:{shield:{max:15,cur:0},health:{max:15,cur:15},resources:{mana:{max:10,cur:10},msp:{max:0,cur:0},psp:{max:0,cur:0},soul:{max:0,cur:0}},attack:5,defence:0,speed:5}}},sP={stats:{level:1,xp:0,rank:"",combat:{shield:{max:10,cur:0},health:{max:10,cur:10},resources:{mana:{max:0,cur:0},msp:{max:0,cur:0},psp:{max:0,cur:0},soul:{max:10,cur:0}},attack:7,defence:2,speed:10}}},iP={stats:{level:1,xp:0,rank:"",combat:{shield:{max:10,cur:0},health:{max:10,cur:10},resources:{mana:{max:0,cur:0},msp:{max:20,cur:10},psp:{max:20,cur:10},soul:{max:0,cur:0}},attack:1,defence:5,speed:1}}},Mi={naturalist:rP,spiritualist:sP,technologist:iP},cs=(()=>{const t=Fy(Om),e=ZT(t,Om.databaseURL),n=eP(),r=async l=>{await Dx(n).then(u=>{console.log(u)}),await zx(n,async u=>{if(u){const d=u.uid,c=le(e,`users/${d}`),h=await s(d);if(h)await ke(c,h),l(w=>Object.assign({},w,h?{...h}:{}));else{const w={username:"Anon",uid:d,characters:[]};await ke(c,w),l(_=>Object.assign({},_,w))}}else Wx(n)})},s=async l=>{const u=le(e,`/users/${l}`);let d=!1;return await mn(u).then(async c=>{const h=await c.val();h&&(d=h)}),d},i=async l=>{const u=le(e,`/users/${l.uid}/characters`);let d=!1;const c=[];return await mn(u).then(async h=>{const w=h.val();w&&(w==null||w.forEach(_=>{const v=o(_.name,_.pid,_.role,_.stats,_.status,_.location,_.inventory,_.abilities,_.order);c.push(v),d=!0}))}),d?c:[]},o=(l,u,d,c,h,w,_,v,E)=>{const p=c||Mi.naturalist.stats,f=v??a(d);return{name:l,role:d,pid:u,npc:!1,dead:!1,isAttacking:0,location:w??{map:"-1",XY:[1,1]},inventory:_??[],status:h??[],order:E??[],stats:p,abilities:f}},a=l=>{const u=[];for(const d of U_.all)for(const c of d.users){const h=["P08","OH08","A03"],w={id:d.id,level:h.includes(d.id)?1:0};c===l&&u.push(w)}return u};return{db:e,createAccountAnon:r,createPlayer:o,getCharacters:i}})(),{createAccountAnon:oP}=cs;function aP(){const{setUser:t,user:e}=b.useContext(vt),n=ri(),[r,s]=b.useState(!1);return m.jsx("div",{children:m.jsx("div",{className:"main_menu",children:m.jsx("div",{className:"menu",children:e?m.jsx("button",{className:"menu_link",onClick:()=>n("/characters"),children:"Continue to Game"}):m.jsx("button",{className:`menu_link ${r?"disabled":""}`,onClick:async()=>{await oP(t),s(()=>!0)},children:r?"Please Wait..":"Play as Guest"})})})})}const lP=[{id:"000",name:"White Square",abilities:["SH03","I01","D03"],rank:"F",shield:0,health:100,attack:0,defence:0,speed:1,status:[],inventory:[{id:"002",amount:1},{id:"107",amount:1}],biomes:["forest","crypt","scrapyard"],minFloor:0,isGuardian:!0},{id:"001",name:"sproutling",abilities:["P06"],rank:"F",shield:0,health:5,attack:4,defence:1,speed:1,status:[],inventory:[{id:"001",amount:1},{id:"100",amount:1},{id:"007",amount:1}],biomes:["forest"],minFloor:0},{id:"002",name:"thornling",abilities:["P08","SH03"],rank:"E",shield:0,health:25,attack:1,defence:5,speed:1,status:[],inventory:[{id:"007",amount:1},{id:"100",amount:1},{id:"032",amount:1}],biomes:["forest"],minFloor:3},{id:"003",name:"wind spirit",abilities:["SP06","SP01"],rank:"D",shield:0,health:10,attack:10,defence:1,speed:16,status:[],inventory:[{id:"043",amount:1},{id:"103",amount:1},{id:"044",amount:1}],biomes:["forest"],minFloor:5},{id:"005",name:"bulbling",abilities:["P04","I01"],rank:"E",shield:15,health:15,attack:0,defence:0,speed:10,status:[],inventory:[],biomes:[],minFloor:0},{id:"006",name:"treant",abilities:["SP06","P07","I04","SUM"],rank:"C",shield:0,health:100,attack:10,defence:5,speed:1,status:[],inventory:[{id:"002",amount:1},{id:"007",amount:3},{id:"008",amount:1},{id:"104",amount:1}],biomes:["forest"],minFloor:5,isGuardian:!0},{id:"007",name:"ghost",abilities:["SP06"],rank:"F",shield:0,health:10,attack:1,defence:1,speed:19,status:[],inventory:[{id:"048",amount:1},{id:"102",amount:1},{id:"017",amount:1}],biomes:["crypt"],minFloor:0},{id:"008",name:"crypt spider",abilities:["I06"],rank:"E",shield:0,health:10,attack:5,defence:5,speed:10,status:[],inventory:[{id:"048",amount:1},{id:"012",amount:1}],biomes:["crypt"],minFloor:3},{id:"009",name:"Zombie",abilities:["A03"],rank:"D",shield:0,health:25,attack:5,defence:10,speed:1,status:["lifesteal"],inventory:[{id:"048",amount:1},{id:"032",amount:1}],biomes:["crypt"],minFloor:5},{id:"010",name:"zombie",abilities:["A03"],rank:"D",shield:0,health:25,attack:5,defence:10,speed:1,status:["regeneration"],inventory:[{id:"048",amount:1},{id:"032",amount:1}],biomes:["crypt"],minFloor:5},{id:"011",name:"vampire",abilities:["A03","I06","I07","A04","OH08"],rank:"C",shield:0,health:100,attack:10,defence:1,speed:10,status:["lifesteal"],inventory:[{id:"002",amount:1},{id:"048",amount:3},{id:"049",amount:1},{id:"105",amount:1}],biomes:["crypt"],minFloor:5,isGuardian:!0},{id:"012",name:"scout drone",abilities:["OH01"],rank:"F",shield:3,health:3,attack:4,defence:1,speed:11,status:[],inventory:[{id:"0101",amount:1},{id:"022",amount:1},{id:"027",amount:1}],biomes:["scrapyard"],minFloor:0},{id:"013",name:"shieldbot",abilities:["OL03","SH01","SH02"],rank:"E",shield:3,health:5,attack:1,defence:5,speed:1,status:[],inventory:[{id:"022",amount:1},{id:"0101",amount:1},{id:"027",amount:1}],biomes:["scrapyard"],minFloor:3},{id:"014",name:"earth spirit",abilities:["SP02","SP07"],rank:"D",shield:0,health:10,attack:1,defence:10,speed:1,status:[],inventory:[{id:"046",amount:1},{id:"103",amount:1},{id:"053",amount:1}],biomes:["scrapyard"],minFloor:5},{id:"015",name:"scrap golem",abilities:["SP07","SP02","SH03","W07"],rank:"C",shield:50,health:50,attack:1,defence:10,speed:1,status:["shield regeneration"],inventory:[{id:"002",amount:1},{id:"032",amount:3},{id:"033",amount:1},{id:"106",amount:1}],biomes:["scrapyard"],minFloor:5}],vd={all:lP},Gr=[{id:"000",name:"Coins",rarity:"common",price:0,stack:2e6,biomes:["any"],minFloor:0},{id:"001",name:"Health Potion(S)",rarity:"common",price:100,stack:10,usable:!0,shopLevel:1,description:"Use to heal 20 health",biomes:["any"],minFloor:1},{id:"002",name:"Town Scroll",rarity:"common",price:200,stack:5,questRank:2,chestOnly:!0,biomes:["any"],minFloor:2},{id:"003",name:"Town Scroll",rarity:"uncommon",price:500,stack:5,questRank:4,chestOnly:!0,biomes:["any"],minFloor:20},{id:"004",name:"Town Scroll",rarity:"rare",price:1e3,stack:5,questRank:6,chestOnly:!0,biomes:["any"],minFloor:40},{id:"005",name:"Town Scroll",rarity:"epic",price:5e3,stack:5,questRank:7,chestOnly:!0,biomes:["any"],minFloor:60},{id:"006",name:"Town Scroll",rarity:"legendary",price:1e4,stack:5,questRank:9,chestOnly:!0,biomes:["any"],minFloor:80},{id:"007",name:"Plant Scroll",rarity:"common",price:200,stack:60,biomes:["forest","factory","realm_of_divinity"],minFloor:0},{id:"008",name:"Plant Scroll",rarity:"uncommon",price:400,stack:60,biomes:["forest","factory","realm_of_divinity"],minFloor:20},{id:"009",name:"Plant Scroll",rarity:"rare",price:1e3,stack:60,biomes:["forest","factory","realm_of_divinity"],minFloor:40},{id:"010",name:"Plant Scroll",rarity:"epic",price:5e3,stack:60,biomes:["forest","factory","realm_of_divinity"],minFloor:60},{id:"011",name:"Plant Scroll",rarity:"legendary",price:1e4,stack:60,biomes:["forest","factory","realm_of_divinity"],minFloor:80},{id:"012",name:"Insect Scroll",rarity:"common",price:200,stack:60,biomes:["crypt","hive","simulation"],minFloor:0},{id:"013",name:"Insect Scroll",rarity:"uncommon",price:400,stack:60,biomes:["crypt","hive","simulation"],minFloor:20},{id:"014",name:"Insect Scroll",rarity:"rare",price:1e3,stack:60,biomes:["crypt","hive","simulation"],minFloor:40},{id:"015",name:"Insect Scroll",rarity:"epic",price:5e3,stack:60,biomes:["crypt","hive","simulation"],minFloor:60},{id:"016",name:"Insect Scroll",rarity:"legendary",price:1e4,stack:60,biomes:["crypt","hive","simulation"],minFloor:80},{id:"017",name:"Weather Scroll",rarity:"common",price:200,stack:60,biomes:["scrapyard","abyss","cataclysmic_desert"],minFloor:0},{id:"018",name:"Weather Scroll",rarity:"uncommon",price:400,stack:60,biomes:["scrapyard","abyss","cataclysmic_desert"],minFloor:20},{id:"019",name:"Weather Scroll",rarity:"rare",price:1e3,stack:60,biomes:["scrapyard","abyss","cataclysmic_desert"],minFloor:40},{id:"020",name:"Weather Scroll",rarity:"epic",price:5e3,stack:60,biomes:["scrapyard","abyss","cataclysmic_desert"],minFloor:60},{id:"021",name:"Weather Scroll",rarity:"legendary",price:1e4,stack:60,biomes:["scrapyard","abyss","cataclysmic_desert"],minFloor:80},{id:"022",name:"Overheat Scroll",rarity:"common",price:200,stack:60,biomes:["forest","abyss","cataclysmic_desert"],minFloor:0},{id:"023",name:"Overheat Scroll",rarity:"uncommon",price:400,stack:60,biomes:["forest","abyss","cataclysmic_desert"],minFloor:20},{id:"024",name:"Overheat Scroll",rarity:"rare",price:1e3,stack:60,biomes:["forest","abyss","cataclysmic_desert"],minFloor:40},{id:"025",name:"Overheat Scroll",rarity:"epic",price:5e3,stack:60,biomes:["forest","abyss","cataclysmic_desert"],minFloor:60},{id:"026",name:"Overheat Scroll",rarity:"legendary",price:1e4,stack:60,biomes:["forest","abyss","cataclysmic_desert"],minFloor:80},{id:"027",name:"Overload Scroll",rarity:"common",price:200,stack:60,biomes:["crypt","hive","realm_of_divinity"],minFloor:0},{id:"028",name:"Overload Scroll",rarity:"uncommon",price:400,stack:60,biomes:["crypt","hive","realm_of_divinity"],minFloor:20},{id:"029",name:"Overload Scroll",rarity:"rare",price:1e3,stack:60,biomes:["crypt","hive","realm_of_divinity"],minFloor:40},{id:"030",name:"Overload Scroll",rarity:"epic",price:5e3,stack:60,biomes:["crypt","hive","realm_of_divinity"],minFloor:60},{id:"031",name:"Overload Scroll",rarity:"legendary",price:1e4,stack:60,biomes:["crypt","hive","realm_of_divinity"],minFloor:80},{id:"032",name:"Shield Scroll",rarity:"common",price:200,stack:60,biomes:["scrapyard","factory","simulation"],minFloor:0},{id:"033",name:"Shield Scroll",rarity:"uncommon",price:400,stack:60,biomes:["scrapyard","factory","simulation"],minFloor:20},{id:"034",name:"Shield Scroll",rarity:"rare",price:1e3,stack:60,biomes:["scrapyard","factory","simulation"],minFloor:40},{id:"035",name:"Shield Scroll",rarity:"epic",price:5e3,stack:60,biomes:["scrapyard","factory","simulation"],minFloor:60},{id:"036",name:"Shield Scroll",rarity:"legendary",price:1e4,stack:60,biomes:["scrapyard","factory","simulation"],minFloor:80},{id:"037",name:"Health Potion(M)",rarity:"uncommon",price:500,stack:10,usable:!0,shopLevel:2,description:"Use to heal 100 health",biomes:["any"],minFloor:20},{id:"038",name:"Health Potion(L)",rarity:"rare",price:1e3,stack:10,usable:!0,shopLevel:3,description:"Use to heal 200 health",biomes:["any"],minFloor:40},{id:"039",name:"Health Potion(XL)",rarity:"epic",price:5e3,stack:10,usable:!0,shopLevel:4,description:"Use to heal 1000 health",biomes:["any"],minFloor:60},{id:"040",name:"Health Potion(XXL)",rarity:"legendary",price:5e3,stack:10,usable:!0,chestOnly:!0,shopLevel:5,description:"Use to heal 2000 health",biomes:["any"],minFloor:20},{id:"041",name:"Escape Stone",rarity:"rare",price:1e3,stack:5,usable:!0,chestOnly:!0,shopLevel:1,description:"Use to  escape the dungeon",biomes:["any"],minFloor:5},{id:"042",name:"Phoenix Tears",rarity:"legendary",price:0,stack:1,usable:!0,chestOnly:!0,description:"Use to revive",biomes:["any"],minFloor:11},{id:"043",name:"Spirit Scroll",rarity:"common",price:200,stack:60,biomes:["forest","hive","cataclysmic_desert"],minFloor:0},{id:"044",name:"Spirit Scroll",rarity:"uncommon",price:400,stack:60,biomes:["forest","hive","cataclysmic_desert"],minFloor:20},{id:"045",name:"Spirit Scroll",rarity:"rare",price:1e3,stack:60,biomes:["forest","hive","cataclysmic_desert"],minFloor:40},{id:"046",name:"Spirit Scroll",rarity:"epic",price:5e3,stack:60,biomes:["forest","hive","cataclysmic_desert"],minFloor:60},{id:"047",name:"Spirit Scroll",rarity:"legendary",price:1e4,stack:60,biomes:["forest","hive","cataclysmic_desert"],minFloor:80},{id:"048",name:"Abyssal Scroll",rarity:"common",price:200,stack:60,biomes:["crypt","abyss","simulation"],minFloor:0},{id:"049",name:"Abyssal Scroll",rarity:"uncommon",price:400,stack:60,biomes:["crypt","abyss","simulation"],minFloor:20},{id:"050",name:"Abyssal Scroll",rarity:"rare",price:1e3,stack:60,biomes:["crypt","abyss","simulation"],minFloor:40},{id:"051",name:"Abyssal Scroll",rarity:"epic",price:5e3,stack:60,biomes:["crypt","abyss","simulation"],minFloor:60},{id:"052",name:"Abyssal Scroll",rarity:"legendary",price:1e4,stack:60,biomes:["crypt","abyss","simulation"],minFloor:80},{id:"053",name:"Divinity Scroll",rarity:"common",price:200,stack:60,biomes:["scrapyard","factory","realm_of_divinity"],minFloor:0},{id:"054",name:"Divinity Scroll",rarity:"uncommon",price:400,stack:60,biomes:["scrapyard","factory","realm_of_divinity"],minFloor:20},{id:"055",name:"Divinity Scroll",rarity:"rare",price:1e3,stack:60,biomes:["scrapyard","factory","realm_of_divinity"],minFloor:40},{id:"056",name:"Divinity Scroll",rarity:"epic",price:5e3,stack:60,biomes:["scrapyard","factory","realm_of_divinity"],minFloor:60},{id:"057",name:"Divinity Scroll",rarity:"legendary",price:1e4,stack:60,biomes:["scrapyard","factory","realm_of_divinity"],minFloor:80},{id:"058",name:"Trap Tools",rarity:"uncommon",price:500,stack:5,usable:!0,shopLevel:1,description:"Use to disarm traps with 100% success",biomes:["any"],minFloor:6},{id:"059",name:"Repel Spray",rarity:"uncommon",price:500,stack:5,usable:!0,chestOnly:!0,shopLevel:1,description:"Use to avoid enemies with 100% success",biomes:["any"],minFloor:11},{id:"100",name:"Vine",rarity:"common",price:20,stack:100,questRank:1,biomes:["forest"],minFloor:0},{id:"101",name:"Screw",rarity:"common",price:20,stack:100,questRank:1,biomes:["scrapyard"],minFloor:0},{id:"102",name:"Soul essence",rarity:"common",price:20,stack:100,questRank:1,biomes:["crypt"],minFloor:0},{id:"103",name:"Spirit essence",rarity:"common",price:40,stack:100,questRank:2,biomes:["any"],minFloor:0},{id:"104",name:"Forest Gem",rarity:"rare",price:1e3,stack:2,questRank:4,chestOnly:!0,biomes:["forest"],minFloor:20},{id:"105",name:"Crypt Gem",rarity:"rare",price:1e3,stack:2,questRank:4,chestOnly:!0,biomes:["crypt"],minFloor:20},{id:"106",name:"Scrapyard Gem",rarity:"rare",price:1e3,stack:2,questRank:4,chestOnly:!0,biomes:["scrapyard"],minFloor:20},{id:"107",name:"??? Crystal",rarity:"uncommon",price:1e3,stack:2,questRank:3,chestOnly:!0,biomes:["realm_of_divinity"],minFloor:20}],uP=[{name:"regeneration",type:"hot",duration:3,amount:1,affects:[""],refs:["P03"]},{name:"shield regeneration",type:"sot",duration:3,amount:1,affects:[""],refs:["SH01"]},{name:"poison",type:"dot",duration:3,amount:1,affects:[""],refs:["P08"]},{name:"venom",type:"dot",duration:3,amount:1,affects:[""],refs:["I06","I08"]},{name:"burn",type:"dot",duration:3,amount:1,affects:[""],refs:["W06"]},{name:"severe burn",type:"dot",duration:3,amount:10,affects:[""],refs:["W08"]},{name:"tremor",type:"dot",duration:3,amount:10,affects:[""],refs:["W07"]},{name:"sleep",type:"cc",duration:2,amount:10,affects:[""],refs:["P09"]},{name:"bind",type:"cc",duration:0,amount:1,affects:[""],refs:["P10"]},{name:"stun",type:"cc",duration:1,amount:1,affects:[""],refs:["OL06"]},{name:"defence up",type:"buff",duration:3,amount:1,affects:["defence"],refs:["I01"]},{name:"attack up",type:"buff",duration:3,amount:1,affects:["attack"],refs:["I02"]},{name:"speed up",type:"buff",duration:1,amount:1,affects:["speed"],refs:["I03"]},{name:"lifesteal",type:"special",duration:3,amount:1,affects:[""],refs:["I04"]},{name:"reflect",type:"special",duration:3,amount:1,affects:[""],refs:["SH03"]},{name:"taunt",type:"special",duration:2,amount:1,affects:[""],refs:["OH07"]},{name:"sylph",type:"special",duration:4,amount:10,affects:[""],refs:["SP01"]},{name:"gnome",type:"buff",duration:4,amount:10,affects:["defence"],refs:["SP02"]},{name:"undine",type:"special",duration:4,amount:20,affects:[""],refs:["SP03"]},{name:"salamander",type:"buff",duration:4,amount:10,affects:["attack"],refs:["SP04"]},{name:"spirit combo",type:"buff",duration:4,amount:1,affects:["attack","defence"],refs:["SP05"]},{name:"demon cocoon",type:"special",duration:2,amount:1,affects:[""],refs:["A01"]},{name:"demon",type:"special",duration:4,amount:1,affects:[""],refs:["A02"]},{name:"guardian angel",type:"special",duration:1,amount:300,affects:[""],refs:["D01"]},{name:"Charm",type:"cc",duration:3,amount:10,affects:[""],refs:["D05"]},{name:"blind",type:"special",duration:3,amount:10,affects:[""],refs:["D04"]},{name:"revival",type:"hot",duration:0,amount:1,affects:[""],refs:["I05"]},{name:"defence down",type:"debuff",duration:3,amount:1,affects:["defence"],refs:["I07"]},{name:"attack down",type:"debuff",duration:3,amount:1,affects:["attack"],refs:["D03"]},{name:"curse",type:"special",duration:2,amount:1,affects:[""],refs:["A05"]},{name:"rain",type:"buff",duration:4,amount:1,affects:[""],refs:["W01"]},{name:"charge",type:"buff",duration:4,amount:1,affects:[""],refs:["OL02"]},{name:"overload",type:"buff",duration:1,amount:1,affects:["attack","speed"],refs:[""]},{name:"overheat",type:"cc",duration:1,amount:1,affects:[""],refs:[""]}],Mt={all:uP},{db:Nt,createPlayer:cP}=cs,Pt=(()=>{const t=(I,S)=>{for(let g=0;g<I.length;g++)if(S===I[g].pid)return{state:I[g],index:g};return{state:I[0],index:-1}},e=(I,S,g)=>{const k=n(I);if((k==null?void 0:k.type)==="single"||(k==null?void 0:k.type)==="ally_any"){for(const $ of S){const Z=o($.status??[],"taunt");if(Z.index<0)continue;if(Math.floor(Math.random()*101)+Z.state.amount>100)return[$.pid]}const j=Math.floor(Math.random()*S.length);return[S[j].pid]}else{if((k==null?void 0:k.type)==="aoe"||(k==null?void 0:k.type)==="ally_all"||(k==null?void 0:k.type)==="field")return Array.from([...S],j=>j.pid);if((k==null?void 0:k.type)==="self")return[g];if((k==null?void 0:k.type)==="ally"){const j=Math.floor(Math.random()*(S.length-1)),$=[...S].filter(Z=>Z.pid!==g);return $.length?[$[j].pid]:[]}}return[]},n=I=>{for(const S of U_.all)if(I===S.id||I===S.name)return S},r=(I,S)=>{const g={state:{level:0,id:""},index:-1};for(let k=0;k<I.abilities.length;k++)I.abilities[k].id===S&&(g.state=I.abilities[k],g.index=k);return g},s=I=>{const S=n(I);if(!S)return[];const g=[];for(const k in S.cost)g.push(k);return g},i=(I,S)=>{const g={...I};if(I.damageType==="damage")g.damage+=S*2;else if(I.damageType==="heal")g.damage+=S*3;else if(I.damageType==="status"){const k=o(Mt.all,I.id);g.damage=k.state.amount+S}return g},o=(I,S)=>{if(!I||!I.length)return{state:Mt.all[0],index:-1};for(let g=0;g<I.length;g++)if(S===I[g].name)return{state:I[g],index:g};for(let g=0;g<I.length;g++)for(let k=0;k<I[g].refs.length;k++)if(S===I[g].refs[k])return{state:I[g],index:g};return{state:I[0],index:-1}},a=I=>{if(N(I))return 0;let S=I.stats.combat.speed;S=F(I.status,"speed",S);const g=Math.floor(S/20);return g>0&&S>0?g:1},l=I=>{const S=["","F","E","D","C","B","A","S","SS","SSS"];return S[Math.min(I,S.length-1)]},u=I=>{const S=["","F","E","D","C","B","A","S","SS","SSS"];return Math.min(S.indexOf(I),S.length-1)},d=(I,S)=>{const g=u(I.stats.rank);let k=Number(S.location.map)+1;return k=k>0?k:1,g*k},c=I=>{let S=u(I);const g=S>0?S*10:5,k=5;S++;const j=g*k*S;return k+j},h=(I,S)=>{const k=1+u(S),j=I*5*k,$=k>1?c(S):0;return 5+j+$},w=I=>{const S=h(I.stats.level,I.stats.rank),g=u(I.stats.rank),k=g>0?g*10:5;return I.stats.xp>S&&k>I.stats.level},_=I=>{const S=[];for(const g of I){const k={id:"000",amount:g.abilities[0].level*20+1};g.inventory.push(k);const j=Math.floor(Math.random()*(g.inventory.length*2));j<g.inventory.length&&S.push(g.inventory[j])}return S},v=(I,S)=>{for(let g=0;g<(I==null?void 0:I.length);g++)if(S.id===I[g].id)return{state:I[g],index:g};for(let g=0;g<Gr.length;g++)if(S.id===Gr[g].id)return{state:{id:Gr[g].id,amount:0},index:-1};return{state:I[0],index:-1}},E=(I,S)=>(I.stats.xp+=S,w(I)&&(I.stats.level+=1,I.stats.xp=0,I=p(I)),I),p=I=>{const S={...I};switch(S.role){case"naturalist":S.stats.combat.attack+=2,S.stats.combat.defence+=1,S.stats.combat.health.max+=3,S.stats.combat.shield.max+=3;break;case"technologist":S.stats.combat.attack+=1,S.stats.combat.defence+=3,S.stats.combat.health.max+=2,S.stats.combat.shield.max+=2;break;case"spiritualist":S.stats.combat.attack+=3,S.stats.combat.health.max+=1,S.stats.combat.shield.max+=1;break}return S},f=I=>{const S={...I};switch(S.role){case"naturalist":S.stats.combat.speed+=5,S.stats.combat.health.max+=5,S.stats.combat.shield.max+=5,S.stats.combat.resources.mana.max+=10;break;case"technologist":S.stats.combat.speed+=1,S.stats.combat.health.max+=5,S.stats.combat.shield.max+=5;break;case"spiritualist":S.stats.combat.speed+=5,S.stats.combat.defence+=10,S.stats.combat.health.max+=5,S.stats.combat.shield.max+=5,S.stats.combat.resources.soul.max+=10;break}return S},y=(I,S)=>{const g={...I},k=u(I.rank),j=S*k;return j<1?I:(g.health=g.health*j,g.shield=g.shield*j,g.attack=g.attack+j,g.defence=g.defence+j,g.speed=g.speed+Math.floor(S/5),g)},C=(I,S,g)=>{const k=vd.all,j=[...I];for(let $=0;$<S.length;$++)for(const Z of k){const Y=y(Z,g);if(Z.id===S[$]){const{rank:he,attack:pe,defence:rt,speed:un,name:Lr,health:Gn,abilities:Sn,inventory:Qn,shield:A}=Y,O=V(Lr,`E${j.length+$}`,Gn,Sn,pe,rt,un,[],!1,Qn,he,g,A);j.push(O)}}return j},T=async I=>{let S={...I};return S=M(S,I.stats.combat.health.max,!0),S.inventory=[],S.dead=!1,S},N=I=>{for(const S of I.status)if(S.type==="cc"||S.name==="demon cocoon")return!0;return!1},D=(I,S,g)=>{const k={...I},j=o(I.status,g);return j.index>-1&&k.status.splice(j.index,1),k.status.push(S),k},B=(I,S)=>{const g={...I},k=o(I.status,S);return g.status.splice(k.index,1),g},te=(I,S)=>{const g={...I};let k=!1,j=-1;for(let $=0;$<g.inventory.length;$++)g.inventory[$].id===S.id&&(S.amount>=g.inventory[$].amount?(k=!0,j=$):g.inventory[$].amount-=S.amount);return k&&g.inventory.splice(j,1),I},R=(I,S)=>{const{player:g}=S;let k={...g};const j=[20,100,200,1e3,2e3],Z=["001","037","038","039","040"].indexOf(I.id);if(!k)return k;switch(I.id){case"001":case"037":case"038":case"039":case"040":k.stats.combat.health.cur+=j[Z]*I.amount,k=ee(k,[g],0)[0];break;case"042":k.stats.combat.health.cur=k.stats.combat.health.max,k.dead=!1;break}return k=te(k,I),k},P=(I,S)=>{const g={...I};let k=S;if(I.stats.combat.shield.cur>0&&k>0){const j=Math.min(g.stats.combat.shield.cur,k);g.stats.combat.shield.cur-=S,k-=j,I.role==="technologist"&&(g.stats.combat.resources.msp.cur+=1,g.stats.combat.resources.psp.cur-=1)}return k>0&&(g.stats.combat.health.cur-=k,I.role==="technologist"&&(g.stats.combat.resources.psp.cur+=1,g.stats.combat.resources.msp.cur-=1)),ee(g,[g],0)[0]},x=(I,S)=>{const g={...I},k=S;return g.stats.combat.shield.cur+=k,ee(g,[g],0)[0]},M=(I,S,g)=>{const k=o(I.status,"curse");let j=S;k.index>-1&&(j=Math.ceil(S/k.state.amount));const $={...I},Z=k.index>-1?j:g?S:S*-1;return $.stats.combat.health.cur+=Z,ee($,[$],0)[0]},U=(I,S,g)=>{const k={...I};return I.role==="naturalist"?k.stats.combat.resources.mana.cur+=S:I.role==="technologist"?(g==="psp"&&(k.stats.combat.resources.psp.cur+=S),g==="msp"&&(k.stats.combat.resources.msp.cur+=S)):I.role==="spiritualist"&&(k.stats.combat.resources.soul.cur+=S),ee(I,[I],0)[0]},G=(I,S)=>{const g=ge(S);let k=!1;const j=I.inventory??[];for(let $=0;$<j.length;$++){if(!g)return I;j[$].id===S.id&&(j[$].amount+S.amount>=g.stack?j[$].amount=g.stack:j[$].amount+=S.amount,k=!0)}return k||j.push(S),I.inventory=j,I},q=(I,S,g,k)=>g==="damage"?I+S*2:g==="heal"?I+S*3:g==="status"?o(Mt.all,k??"").state.amount+S:1,ee=(I,S,g)=>{const{health:k,resources:j,shield:$}=I.stats.combat,{mana:Z,msp:Y,psp:he}=j;if(k.cur<=0){const pe=o(I.status,"revival");S[g].dead=!0,S[g].status=pe.index>-1?[pe.state]:[],S[g].stats.combat.health.cur=0}else k.cur>k.max&&(S[g].stats.combat.health.cur=k.max);if(Z.cur<=0?S[g].stats.combat.resources.mana.cur=0:Z.cur>Z.max&&(S[g].stats.combat.resources.mana.cur=Z.max),$.cur<=0?S[g].stats.combat.shield.cur=0:$.cur>$.max&&(S[g].stats.combat.shield.cur=$.max),Y.cur<=0)S[g].stats.combat.resources.msp.cur=0;else if(Y.cur>=Y.max){S[g].stats.combat.resources.msp.cur=Y.max;const pe=o(Mt.all,"overload");pe.state.amount=I.stats.level*(u(I.stats.rank)+1),S[g]=D(S[g],pe.state,pe.state.name)}if(he.cur<=0)S[g].stats.combat.resources.psp.cur=0;else if(he.cur>=he.max){S[g].stats.combat.resources.psp.cur=he.max;const pe=o(Mt.all,"overheat");S[g]=D(S[g],pe.state,pe.state.name)}return[...S]},F=(I,S,g)=>{for(const k of I)for(const j of k.affects){const $=k.type==="buff"?k.amount:k.amount*-1;j===S&&(g=g+$)}return g},V=(I,S,g,k,j,$,Z,Y,he,pe,rt,un,Lr)=>{const Gn={max:g,cur:g},Sn={max:g,cur:Lr},Qn={max:0,cur:0},A=[];for(const Q of k){const W=n(Q);let se=un??1;(W==null?void 0:W.type)==="status"&&o(Mt.all,Q).state.type==="cc"&&(se=un*3);const oe={id:Q,level:se};oe&&A.push(oe)}return{name:I,role:"",pid:S,inventory:pe??[],location:{map:"",XY:[]},npc:!0,dead:he,isAttacking:0,abilities:A,status:Y??[],order:[],stats:{level:1,xp:0,rank:rt??"E",combat:{health:Gn,shield:Sn,resources:{mana:Qn,psp:{max:0,cur:0},msp:{max:0,cur:0},soul:{max:0,cur:0}},attack:j,defence:$,speed:Z}}}},L=(I,S,g)=>({ability:I,user:S,targets:g}),J=(I,S,g,k,j,$)=>({name:I,type:S,amount:g,duration:k,affects:j,refs:$}),K=async I=>{const S={players:[],enemies:[],actionQueue:[],loot:[],start:!1,joinedPlayers:0,id:""},g=[];let k=1;const j=le(Nt,`party/${I[0].pid}`);await mn(j).then(async he=>{const pe=await he.val();for(const rt in pe.players)S.players.push(pe.players[rt]);for(const rt of pe.enemies)g.push(rt);Number(pe.location.map)>0&&(k=Number(pe.location.map))});const $=vd.all,Z=[];for(let he=0;he<g.length;he++)for(const pe of $){const rt=y(pe,k);if(pe.id===g[he]){const{rank:un,attack:Lr,defence:Gn,speed:Sn,name:Qn,health:A,abilities:O,inventory:Q,shield:W}=rt,se=[];for(const we of pe.status){const ie=o(Mt.all,we);ie.state.duration=50,ie.state.amount=k,ie.index>-1&&se.push(ie.state)}const oe=V(Qn,`E${he}`,A,O,Lr,Gn,Sn,se,!1,Q,un,k,W);Z.push(oe)}}Z.forEach(he=>{S.enemies.push(he)}),S.id=I[0].pid,await nt(S,I[0].pid);const Y={initTime:0,procTime:0,delay:1e4,done:!1};return Y.procTime=Date.now()+Y.delay,await qn(Y,S.id),S},ue=I=>Array.from(I,S=>cP(S.name,S.pid,S.role,S.stats,S.status,S.location,S.inventory,S.abilities,S.order)),ge=I=>{for(const S of Gr)if(I.id===S.id)return S},be=I=>Array.from(I,S=>{const g=Array.from(S.abilities,he=>he.id),{attack:k,defence:j,speed:$,shield:Z}=S.stats.combat,Y=V(S.name,S.pid,S.stats.combat.health.max,g,k,j,$,S.status,S.dead??!1,S.inventory,S.stats.rank,S.abilities[0].level,Z.cur);return Y.stats.combat.health.cur=S.stats.combat.health.cur,Y.stats.combat.shield.cur=S.stats.combat.shield.cur,Y}),Ee=async(I,S)=>{try{console.log(S,S.players[0].pid);const g=le(Nt,`/fields/${S.players[0].pid}`),k=le(Nt,`/fields/${S.players[0].pid}/players`),j=le(Nt,`/fields/${S.players[0].pid}/enemies`),$=le(Nt,`/fields/${S.players[0].pid}/actionQueue`);await mn(g).then(async Z=>{const Y=await Z.val(),he=ue(Y.players),pe=be(Y.enemies),rt=Y.joinedPlayers+1;await ke(ur(g,"/joinedPlayers"),rt);const un=rt===S.players.length;I(he??[],pe??[],Y.actionQueue??[],Y.id,un,rt,Y.loot??[],Y.timer)}),await qr(g,async Z=>{const Y=await Z.val(),he=Y.joinedPlayers===S.players.length;I([],[],[],"",he,Y.joinedPlayers,Y.loot??[],Y.timer)}),await qr(k,async Z=>{const Y=await Z.val(),he=ue(Y);I(he??[],[],[],"",Y.start,Y.joinedPlayers,Y.loot??[],{})}),await qr(j,async Z=>{const Y=await Z.val(),he=be(Y);I([],he??[],[],"",Y.start,Y.joinedPlayers,Y.loot??[],{})}),await qr($,async Z=>{const Y=await Z.val(),he=Y?Array.from(Y??[],pe=>L(pe.ability,pe.user,pe.targets??[])):[];I([],[],he??[],"",Y.start,Y.joinedPlayers,Y.loot??[],{})})}catch(g){console.error(g)}},Ke=async(I,S)=>{const{fieldId:g,field:k,actionQueue:j,player:$,enemies:Z,user:Y,loot:he,battleTimer:pe}=S;switch(I){case"field":nt(k??{},g);break;case"actionQueue":$t(j??[],g);break;case"player":if(!$)return console.error("No Player");Vn($.state,$.index,g);break;case"enemy":if(!$)return console.error("No Enemy");hi($.state,$.index,g);break;case"enemies":if(!Z||!Z.length)return console.error("No Enemies");fi(Z,g);break;case"loot":if(!he)return;pi(he,g);break;case"battleTimer":if(!pe)return;qn(pe,g);break;case"character":if(!$||!Y)return;mi(Y,$.state,$.index);break}},nt=async(I,S)=>{const g=le(Nt,`/fields/${S}`),k={...I};await ke(g,Object.assign({},k,{actionQueue:I.actionQueue.length?I.actionQueue:!1}))},$t=async(I,S)=>{const g=le(Nt,`/fields/${S}/actionQueue`);await ke(g,I.length?I:!1)},Vn=async(I,S,g)=>{const k=le(Nt,`/fields/${g}/players/${S}`);await ke(k,ee(I,[I],0)[0])},hi=async(I,S,g)=>{const k=le(Nt,`/fields/${g}/enemies/${S}`);await ke(k,ee(I,[I],0)[0])},fi=async(I,S)=>{const g=le(Nt,`/fields/${S}/enemies/`);await ke(g,I)},pi=async(I,S)=>{const g=le(Nt,`/fields/${S}/loot`);await ke(g,I)},qn=async(I,S)=>{const g=le(Nt,`/fields/${S}/battleTimer`);await ke(g,I)},mi=async(I,S,g)=>{const k=le(Nt,`/users/${I.uid}/characters/${g}`);await ke(k,S)};return{getPlayer:t,getTargets:e,getAbility:n,getAbilityRef:r,getAbilityCosts:s,getAbilityLevelEffect:i,getStatus:o,getActionValue:a,getCanLevelUp:w,getLoot:_,getXpReceived:d,getLevelUpReq:h,getRank:l,getRankValue:u,getItem:v,checkIfCC:N,removeItem:te,removeStatus:B,respawn:T,applyItem:R,assignDamage:P,assignShield:x,assignStatus:D,assignHeal:M,assignResource:U,assignXp:E,assignItem:G,assignMaxOrMinStat:ee,assignRankStatUpsByRole:f,assignAbilityLevelStats:q,assignBuffs:F,createEnemy:V,createAction:L,createStatus:J,populateItem:ge,summon:C,initiateBattle:K,connectToBattle:Ee,upload:Ke}})();function He({max:t,cur:e,type:n}){const r=()=>{const s=n==="shield"?e*2:e;return Math.min((n==="overheat"||n==="overload"?50:100)/t*s,100)};return t?m.jsx("div",{className:`emptyBar ${n}`,children:m.jsx("div",{style:{width:r()},className:`${n}_fill`,children:n!=="shield"&&m.jsxs("p",{style:{fontSize:"10px",whiteSpace:"nowrap",marginLeft:"10px"},children:[e," / ",t]})})}):null}function dP({status:t}){const[e,n]=b.useState(!1),r=()=>{if(t.affects&&t.affects.length)return t.affects.map((s,i)=>s.length?m.jsxs("p",{children:[s,": ",t.amount]},`status-${s}-${i}`):m.jsxs("p",{children:[t.amount," DMG"]},`status-dps-${s}-${i}`))};return m.jsxs("div",{className:"status",onMouseEnter:()=>n(()=>!0),onMouseLeave:()=>n(()=>!1),children:[m.jsxs("p",{children:[t.name,": ",t.duration]}),e&&m.jsx("div",{className:"tooltip",children:r()})]})}function hP({player:t,index:e,selectedTargets:n,selectPlayer:r,selectTarget:s}){var d,c,h,w,_,v,E,p,f,y,C,T,N,D,B,te,R;const[i,o]=b.useState(""),[a,l]=b.useState(t.stats.combat.health.cur),u=()=>{for(let P=0;P<n.length;P++)if(n[P]===t.pid)return!0;return!1};return b.useEffect(()=>{if(t.stats.combat.health.cur<a)o("damaged");else if(t.stats.combat.health.cur>a)o("healed");else return;l(t.stats.combat.health.cur),setTimeout(()=>o(""),600)},[t.stats.combat.health.cur,a]),b.useEffect(()=>{o("attacking"),setTimeout(()=>o(""),600)},[t.isAttacking]),m.jsxs("div",{className:`${t.npc?"enemy":"player"} ${t.npc?`${t.name.split(" ").join("_").toLowerCase()}`:""} ${t.role} ${i} ${u()?"target":""} back ${t.dead?"dead":""}`,onClick:()=>r({state:t,index:e}),onContextMenu:P=>{P.preventDefault(),s(t.pid)},children:[t.stats.combat.shield.cur>0&&m.jsx(He,{max:t.stats.combat.shield.max+t.stats.combat.health.max,cur:t.stats.combat.shield.cur,type:"shield",index:1}),m.jsx(He,{max:t.stats.combat.health.max,cur:t.stats.combat.health.cur,type:"health",index:1}),m.jsx(He,{max:(c=(d=t.stats.combat.resources)==null?void 0:d.mana)==null?void 0:c.max,cur:(w=(h=t.stats.combat.resources)==null?void 0:h.mana)==null?void 0:w.cur,type:"mana",index:5}),m.jsx(He,{max:(v=(_=t.stats.combat.resources)==null?void 0:_.soul)==null?void 0:v.max,cur:(p=(E=t.stats.combat.resources)==null?void 0:E.soul)==null?void 0:p.cur,type:"soul",index:5}),m.jsxs("div",{className:"cen-flex",children:[m.jsx(He,{max:(y=(f=t.stats.combat.resources)==null?void 0:f.psp)==null?void 0:y.max,cur:(T=(C=t.stats.combat.resources)==null?void 0:C.psp)==null?void 0:T.cur,type:"overheat",index:5}),m.jsx(He,{max:(D=(N=t.stats.combat.resources)==null?void 0:N.msp)==null?void 0:D.max,cur:(te=(B=t.stats.combat.resources)==null?void 0:B.msp)==null?void 0:te.cur,type:"overload",index:5})]}),m.jsx("div",{className:"status_bar",children:(R=t==null?void 0:t.status)==null?void 0:R.map((P,x)=>m.jsx(dP,{status:P},`status-${t.pid}-${x}`))})]})}function Mm({players:t,sideIndex:e,selectedTargets:n,selectPlayer:r,selectTarget:s}){const i=()=>{if(t.length)return t.map((o,a)=>m.jsx(hP,{player:o,index:a,selectedTargets:n,selectPlayer:r,selectTarget:s},`player-${a}`))};return m.jsx("div",{className:`side_${e}`,children:i()})}const{assignAbilityLevelStats:fP,getAbilityRef:pP,getStatus:mP}=Pt;function $_({ability:t}){const{character:e}=b.useContext(vt),n=()=>{const s=pP(e,t.id).state.level;if(s)return fP(t.damage,s,t.damageType,t.id)},r=()=>{if(t.damageType==="heal")return`${n()} heal`;if(t.damageType==="damage")return`${n()}% DMG`;if(t.damageType==="status")return mP(Mt.all,t.id).state.type==="cc"?`${t==null?void 0:t.description} of ${n}%`:`${t==null?void 0:t.description} of ${n()}`};return m.jsxs("div",{className:"tooltip",children:[m.jsx("p",{children:t.name}),m.jsxs("p",{children:["Targets: ",t.type]}),m.jsx("p",{children:r()}),m.jsxs("p",{className:"uncommon_text",children:[t.av,"AP"]}),m.jsx("p",{className:"red_text",children:t.cost.health&&`${t.cost.health} %Hp`}),m.jsx("p",{className:"aqua_text",children:t.cost.shield&&`${t.cost.shield} % Shield`}),m.jsx("p",{className:"rare_text",children:t.cost.mana&&`${t.cost.mana}Mp`}),m.jsx("p",{className:"red_text",children:t.cost.psp&&`${t.cost.psp} OH`}),m.jsx("p",{className:"rare_text",children:t.cost.msp&&`${t.cost.msp} OL`}),m.jsx("p",{className:"rare_text",children:t.cost.soul&&`${t.cost.soul} SOUL`})]})}function gP({ability:t,selectTargetByAbility:e,click:n}){const[r,s]=b.useState(!1);return m.jsxs("button",{onClick:n,onMouseEnter:()=>{e(t.type),s(()=>!0)},onMouseLeave:()=>s(()=>!1),className:"ability_btn",children:[t.name,r&&m.jsx($_,{ability:t})]})}const{getAbility:yP,getAbilityRef:vP,getStatus:_P}=Pt;function wP({selectedPlayer:t,selectedTargets:e,target:n,selectTargetByAbility:r,actionValue:s}){const[i,o]=b.useState([]);b.useEffect(()=>{if(!t||!t.state)return;const u=[];for(const d of t.state.abilities){const c=yP(d.id);c&&u.push(c)}o(()=>u)},[t]);const a=(u,d)=>{var T,N,D;if(d.dead)return!1;const{health:c,shield:h,resources:w}=d.stats.combat,{mana:_,psp:v,msp:E,soul:p}=w,f=[],y=_P(d.status,"demon");if(["A04","A05","A06","A07"].includes(u.id)&&y.index<0)return!1;for(const B in u.cost)f.push(B);for(const B of f)switch(B){case"mana":if(!_||!u.cost.mana)return;if(_.cur<u.cost.mana)return!1;break;case"health":if(!c||!u.cost.health)return;if(c.cur<Math.ceil(c.max/100*u.cost.health))return!1;break;case"shield":if(!h||!u.cost.shield)return;if(h.cur<Math.ceil(h.max/100*u.cost.shield))return!1;break;case"psp":if(!v||!((T=u.cost)!=null&&T.psp))return;if(v.cur<u.cost.psp)return!1;break;case"msp":if(!E||!((N=u.cost)!=null&&N.msp))return;if(E.cur<u.cost.msp)return!1;break;case"soul":if(!p||!((D=u.cost)!=null&&D.soul))return;if(p.cur<u.cost.soul)return!1;break}return!0},l=()=>{if(i.length&&t)return i.map((u,d)=>{if(!vP(t.state,u.id).state.level)return;function h(){e.length&&t&&a(u,t.state)&&n(Array.from(e),u)}return m.jsx(gP,{selectTargetByAbility:r,ability:u,click:h},`ability-${d}`)})};return m.jsx("div",{className:"sidemenu gamelog",children:m.jsxs("div",{className:"attacks_menu",children:[m.jsxs("h2",{className:"grid_header",children:["Action Points: ",s]}),l()]})})}function af({messages:t}){const e=b.useRef(null);b.useEffect(()=>{e===null||e.current===null||e.current.scrollTo(0,e.current.offsetHeight+t.length*100)},[t]);const n=()=>t.map((r,s)=>m.jsx("p",{className:"message",children:r},`message-${s}`));return m.jsx("div",{className:"gamelog gamelog_pos",children:m.jsx("div",{className:"gamelog_message_group",ref:e,children:n()})})}const{getPlayer:SP}=Pt;function kP({actionQueue:t,players:e,enemies:n}){const r=b.useRef(null);b.useEffect(()=>{r===null||r.current===null||r.current.scrollTo(0,r.current.offsetHeight+t.length*1e3)},[t]);const s=()=>{if(t!=null&&t.length)return t.map((i,o)=>{if(o===0)return;const a=SP([...e,...n],i.user);return m.jsxs("div",{className:"action",children:[m.jsx("p",{children:a.state.name}),m.jsx("hr",{}),m.jsx("p",{children:a.state.npc?"":i.ability})]},`action-${o}`)})};return m.jsx("div",{className:"action_queue",children:m.jsx("div",{className:"action_group",ref:r,children:s()})})}var ae=(t=>(t[t.add_player=0]="add_player",t[t.revive_player=1]="revive_player",t[t.add_status=2]="add_status",t[t.reduce_status_duration=3]="reduce_status_duration",t[t.receive_damage=4]="receive_damage",t[t.resource_change=5]="resource_change",t[t.play__attack_animation=6]="play__attack_animation",t[t.REPLACE_ALL=7]="REPLACE_ALL",t))(ae||{});const{db:Bt}=cs,au=(()=>{const t=async(_,v,E,p,f)=>{try{const y=le(Bt,"/party/");await mn(y).then(async C=>{const T=await C.val(),N=[];for(const D in T)N.push(T[D]);for(const D of N)for(const B of D.players)B.pid===_&&B.name===v?await r(D.players[0].pid,p):B.pid===_&&B.name!==v&&f(()=>!0);E(N)})}catch(y){console.error(y)}},e=async(_,v)=>{try{const E=le(Bt,`/party/${_.pid}`),p={players:[_],location:_.location,grouped:!0,inCombat:!1,host:0};await ke(E,p),await r(p.players[0].pid,v)}catch(E){console.error(E)}},n=async(_,v,E)=>{try{const p=le(Bt);await mn(ur(p,`party/${v}`)).then(async f=>{const y=await f.val();for(const T of y.players)if(T.pid===_.pid)return;const C={...y,players:[...y.players,_]};await ke(ur(p,`party/${v}`),C),E(C)})}catch(p){console.error(p)}},r=async(_,v)=>{try{const E=le(Bt,`/party/${_}`);let p={};return await mn(E).then(async f=>{const y=await f.val();if(!y)return y;p=y}),await qr(E,async f=>{const y=await f.val();if(!y)return y;v(()=>y)}),p}catch(E){return console.error(E),{}}},s=(_,v)=>{const E=_.slice(0,v),p=_.slice(v+1);return E.concat(p)},i=async(_,v,E)=>{const p=le(Bt,`/party/${_}`);await mn(p).then(async f=>{const C=[...(await f.val()).players],T=C.findIndex(D=>D.pid===v.pid),N=s(C,T);await ke(ur(p,"/players"),N),E(()=>({}))})},o=async(_,v)=>{try{const E=le(Bt,`/party/${_}`);await WT(E),v(()=>({}))}catch(E){return console.error(E)}},a=async(_,v)=>{const{partyId:E,location:p,isInCombat:f,players:y,enemyIds:C}=v;switch(_){case"players":if(!y)return;l(E,y);break;case"enemies":if(!C)return;u(E,C);break;case"location":if(!p)break;d(E,p);break;case"inCombat":c(E,f??!1);break;case"wasInCombat":h(E,f??!1);break}},l=async(_,v)=>{const E=le(Bt,`/party/${_}/players`);await ke(E,v)},u=async(_,v)=>{const E=le(Bt,`/party/${_}/enemies`);await ke(E,v)},d=async(_,v)=>{const E=le(Bt,`/party/${_}/location`);await ke(E,v)},c=async(_,v)=>{const E=le(Bt,`/party/${_}/inCombat`);await ke(E,v)},h=async(_,v)=>{const E=le(Bt,`/party/${_}/wasInCombat`);await ke(E,v)};return{getParties:t,createParty:e,destroyRoom:o,leaveParty:i,joinParty:n,connectParty:r,uploadParty:a,syncPartyMemberToAccount:async _=>{const v=le(Bt,`/users/${_.pid}/characters/`);await mn(v).then(async E=>{const p=E.val();if(!p)return console.error("No Characters under this user id");for(let f=0;f<p.length;f++)p[f].name===_.name&&await ke(ur(v,`/${f}`),_)})}}})(),{db:fs}=cs,di=(()=>{const t=(p,f,y,C,T)=>({storage:{level:p.storage??0,inventory:f??[]},inn:{level:p.inn??0},guild:{level:p.guild??0,quests:y??[],questsCompleted:C??[],cancelCd:T??0},shop:{level:p.shop??0}}),e=async p=>{try{const f=le(fs,"/town/");await qr(f,async y=>{const C=await y.val();if(!C)return C;const[T,N,D,B]=[C.storage.level,C.inn.level,C.guild.level,C.shop.level],te=t({storage:T,inn:N,guild:D,shop:B},C.storage.inventory,C.guild.quests,C.guild.questsCompleted,C.guild.cancelCd);p(()=>(console.log(te),te))})}catch(f){return console.error(f)}},n=(p,f,y,C)=>({pid:p??"",name:f??"",amount:y??0,score:C??0}),r=(p,f,y)=>({item:p??{id:"",amount:0},rank:f??0,reward:y??{id:"",amount:0}}),s=p=>{const f=[];for(const C of Gr)if(C.questRank&&Math.floor(C.questRank/2)+1<=p){const N=Math.max(["common","uncommon","rare","epic","legendary"].indexOf(C.rarity),1),D=Math.ceil(Math.random()*(C.questRank*2/N)),B={id:C.id,amount:D};f.push(r(B,C.questRank))}const y=Math.floor(Math.random()*f.length);return f[y]},i=(p,f,y)=>{for(let C=0;C<p.length;C++)if(f===p[C].pid&&y===p[C].name)return p[C].score;return 0},o=p=>{const f=[];for(const y of Gr)if(y.shopLevel&&y.shopLevel<=p){const C={id:y.id,amount:999};f.push(C)}return f},a=(p,f)=>{let y=!1,C=-1;for(let T=0;T<p.length;T++)p[T].id===f.id&&(f.amount>=p[T].amount?(y=!0,C=T):p[T].amount-=f.amount);return y&&p.splice(C,1),p},l=(p,f)=>{let y=!1;for(let C=0;C<p.length;C++)p[C].id===f.id&&(p[C].amount+=f.amount,y=!0);return y||p.push(f),p},u=(p,f)=>{const y={...p};return y.level+=f??1,c("level",{building:y}),y},d=(p,f,y)=>{let C=!1;for(let T=0;T<f.length;T++)f[T].name===p.name&&f[T].pid===p.pid&&(f[T].amount+=1,f[T].score+=y,C=!0);return C||f.push(p),f},c=async(p,f)=>{const{storageInventory:y,building:C,quests:T,questsCompleted:N,cancelCd:D}=f;switch(p){case"inventory":if(!y)return console.error("No Storage Inventory");h(y);break;case"level":if(!C)return console.error("No building");w(C);break;case"quests":if(!T)return console.error("No quests");_(T);break;case"questsCompleted":if(!N)return console.error("No quests completed");v(N);break;case"cancelCd":if(!D)return console.error("No cd");E(D);break}},h=async p=>{const f=le(fs,"/town/storage/inventory");await ke(f,p??[])},w=async p=>{const f=le(fs,`/town/${p.name}/level`);await ke(f,p.level)},_=async p=>{const f=le(fs,"/town/guild/quests");await ke(f,p)},v=async p=>{const f=le(fs,"/town/guild/questsCompleted");await ke(f,p)},E=async p=>{const f=le(fs,"/town/guild/cancelCd");await ke(f,p)};return{createTown:t,connectTown:e,createQuestCompletion:n,getQuestItem:s,getQuestScore:i,getShopStock:o,removeStoredItem:a,assignItemToStorage:l,assignBuildingLevel:u,assignQuestCompleted:d,uploadTown:c}})();function xo({item:t,amount:e,requiredAmount:n,selected:r,inShop:s,click:i}){const[o,a]=b.useState(!1);return m.jsxs("div",{className:`inventory_item ${t.rarity} ${n&&e<n?"border_red":""} ${r&&"selected"}`,onClick:i,onMouseEnter:()=>a(()=>!0),onMouseLeave:()=>a(()=>!1),children:[o&&m.jsxs("div",{className:"tooltip",children:[m.jsx("p",{children:t.name}),m.jsx("p",{className:`${t.rarity}_text`,children:t.rarity}),m.jsx("p",{children:t==null?void 0:t.description}),m.jsxs("p",{children:["Max Stack: ",t.stack]}),m.jsxs("p",{children:["Buy: ",t.price," | Sell: ",Math.floor(t.price/2)]})]}),m.jsx("p",{className:"inventory_item_name",children:t.name}),m.jsxs("p",{className:"inventory_item_amount",children:[e,s&&" G"," ",n&&m.jsxs("span",{children:["/ ",n]})]})]})}const{populateItem:CP,applyItem:EP,removeItem:ua,getPlayer:IP,assignItem:Ku,getItem:Lm}=Pt,{uploadParty:ca,syncPartyMemberToAccount:TP}=au,{assignItemToStorage:xP,uploadTown:Dm,removeStoredItem:bP}=di;function Nr({inventory:t,position:e,buttons:n,storage:r,limit:s,logMessage:i,toggleOff:o,disarmTrap:a}){var y,C;const{character:l,party:u,setCharacter:d}=b.useContext(vt),[c,h]=b.useState({state:null,index:-1}),[w,_]=b.useState(0),v=()=>{if(t&&t.length)return t.map((T,N)=>{var te;const D=CP(T);if(!D)return;function B(){D&&(_(()=>1),h(()=>({state:D,index:N})))}return m.jsx(xo,{item:D,amount:p("buy")?D.price:T.amount,selected:((te=c==null?void 0:c.state)==null?void 0:te.id)===T.id,click:B,inShop:p("buy")},`item-${N}`)})},E=async T=>{if(u.players){const N=IP(u.players,l.pid).index;u.players[N]=T,await ca("players",{partyId:u.players[0].pid,players:u.players})}await TP(T),h(()=>({state:null,index:0})),d(T)},p=T=>n.includes(T),f=()=>{var D;if(!(c!=null&&c.state)||!(t!=null&&t.length))return 0;const T=c.state.stack,N=((D=t[c.index])==null?void 0:D.amount)||0;if(p("withdraw")||p("buy")){const B=Lm(l.inventory,{id:c.state.id,amount:0}).state.amount;return Math.min(T-B,T,N)}return p("sell")&&!c.state.price?0:N};return m.jsxs("div",{className:`inventory ${e}_abs_hor`,children:[m.jsx("div",{className:"inventory_items",children:v()}),m.jsx("hr",{}),m.jsxs("p",{children:[t==null?void 0:t.length," / ",s]}),m.jsxs("div",{className:"bottom_abs inventory_btn_bar",children:[m.jsxs("div",{className:"cen-flex",style:{gap:"1rem",margin:"5rem 0 0 0"},children:[p("use")&&m.jsx("button",{onClick:async()=>{var N,D,B,te;const T=EP({id:t[c.index].id,amount:w},{player:l});if(((N=c==null?void 0:c.state)==null?void 0:N.id)==="041")await ca("location",{partyId:u.players[0].pid,location:{...u.location,map:"-1"}}),await ca("enemies",{partyId:u.players[0].pid,enemyIds:[]});else if(((D=c==null?void 0:c.state)==null?void 0:D.id)==="058"){if(!a)return;await a()}else((B=c==null?void 0:c.state)==null?void 0:B.id)==="059"&&await ca("enemies",{partyId:u.players[0].pid,enemyIds:[]});await E(T),i(`${l.name} has used a ${(te=c.state)==null?void 0:te.name}.`)},className:"menu_btn",disabled:!(c!=null&&c.state)||!((y=c==null?void 0:c.state)!=null&&y.usable),children:"Use"}),p("destroy")&&m.jsx("button",{className:"menu_btn",onClick:async()=>{const T=ua(l,{id:t[c.index].id,amount:w});E(T)},disabled:!c.state,children:"Destroy"}),p("deposit")&&m.jsx("button",{className:"menu_btn",onClick:async()=>{if(!c.state||!r)return;const T=ua(l,{id:t[c.index].id,amount:w}),N=xP(r,{id:c.state.id,amount:w});await Dm("inventory",{storageInventory:N}),await E(T)},disabled:!c.state,children:"Deposit"}),p("withdraw")&&m.jsx("button",{className:"menu_btn",onClick:async()=>{if(!c.state||f()<1)return;const T=Ku(l,{id:t[c.index].id,amount:w}),N=bP(t,{id:c.state.id,amount:w});Dm("inventory",{storageInventory:N}),E(T)},disabled:!c.state||f()<1,children:"Withdraw"}),p("buy")&&m.jsxs("button",{className:"menu_btn",onClick:async()=>{var N;if(!c.state||f()<1||((N=Lm((l==null?void 0:l.inventory)??[],{id:"000",amount:0}))==null?void 0:N.state.amount)<(c==null?void 0:c.state.price)*w)return;let T=Ku(l,{id:t[c.index].id,amount:w});T=ua(T,{id:"000",amount:c.state.price*w}),E(T)},disabled:!c.state||f()<1,children:["Buy ",w&&c.state&&((C=c==null?void 0:c.state)==null?void 0:C.price)*w,"G"]}),p("sell")&&m.jsxs("button",{className:"menu_btn",onClick:async()=>{if(!c.state||f()<1)return;const T=Math.floor(c.state.price/2)*w;let N=ua(l,{id:c.state.id,amount:w});N=Ku(N,{id:"000",amount:T}),E(N)},disabled:!c.state||w*Math.floor(c.state.price/2)<1,children:["Sell ",w&&c.state&&Math.floor((c==null?void 0:c.state.price)/2)*w,"G"]}),o&&m.jsx("button",{className:"menu_btn",onClick:o,children:"Close"})]}),m.jsxs("div",{className:"cen-flex",style:{gap:"1rem"},children:[m.jsx("input",{className:"menu_input",min:1,max:f(),type:"number",onChange:T=>{if(!t.length)return;let N=Number(T.target.value);N>t[c.index].amount&&(N=t[c.index].amount),_(()=>N)},value:w}),m.jsx("input",{type:"range",min:1,max:f(),onChange:T=>_(()=>Number(T.target.value)),value:w})]})]})]})}const{getPlayer:zt,getAbility:B_,getAbilityCosts:PP,assignMaxOrMinStat:Yu,assignHeal:NP,createAction:Fm,getTargets:RP,createStatus:da,getStatus:ze,assignBuffs:Il,getActionValue:jm,initiateBattle:AP,connectToBattle:OP,upload:tn,getLoot:MP,assignItem:LP,getXpReceived:Um,assignXp:DP,getAbilityRef:bi,assignAbilityLevelStats:FP,getLevelUpReq:jP,assignDamage:UP,respawn:$P,checkIfCC:BP,assignStatus:zP,assignShield:WP,summon:HP}=Pt,{uploadParty:Xn,syncPartyMemberToAccount:VP}=au,En={initTime:0,procTime:0,delay:1e4,done:!0},_d={initTime:0,procTime:0,delay:700,done:!0},qP=t=>{const e=Date.now();t.procTime=e+t.delay,t.done=!1},z_=async(t,e,n)=>{if(!e)return;const r=Date.now();t.procTime=r+t.delay,t.done=!1,await tn("battleTimer",{fieldId:n,battleTimer:t})},GP=async(t,e,n,r)=>{r||(t.procTime=e,t.done=n)},QP=(t,e,n,r,s,i,o,a)=>{const{procTime:l}=En,u=Date.now();if(En.initTime=l-u,u>l){if(r.length>0){KP(r,t,s);return}if(u<_d.procTime)return;e(),i(),En.done=!0}En.initTime>9e3&&n(),En.done&&z_(En,o,a)},KP=(t,e,n)=>{const{procTime:r}=_d;if(Date.now()>r){const o=[...t].shift();if(qP(_d),(o==null?void 0:o.ability)==="sort")return n();e((o==null?void 0:o.user)??"",(o==null?void 0:o.targets)??[],B_((o==null?void 0:o.ability)??"")??{})}},YP=(t,e)=>{const n=[],r=[...e].sort((s,i)=>{const o=Il(s.status,"speed",s.stats.combat.speed);return Il(i.status,"speed",i.stats.combat.speed)-o});for(const s of r)for(const i of t)i.user===s.pid&&n.push(i);return n},XP=(t,e)=>{const{fieldId:n}=e.payload,r=[...t];switch(e.type){case 0:return e.payload.action&&r.push(e.payload.action),tn("actionQueue",{actionQueue:r,fieldId:n}),[...r];case 1:return r.shift(),[...r];case 2:return YP(r,e.payload.players??[])??[];case 3:return[];case 4:return e.payload.replacement?e.payload.replacement:[];default:return t}},$m=(t,e)=>{const n=[...t],{fieldId:r,amount:s,pid:i,resource:o,playerObj:a,damageType:l,status:u,replaceArr:d}=e.payload,c=zt(n,i),h=c.state?c.state.npc?"enemy":"player":null;switch(e.type){case ae.add_player:return a&&n.push(a),[...n];case ae.revive_player:return n[c.index].dead=!1,tn(h??"",{player:c,fieldId:r}),[...n];case ae.add_status:return u?(n[c.index]=zP(c.state,u,u.name),tn(h??"",{player:c,fieldId:r}),[...n]):t;case ae.reduce_status_duration:return u?(u.duration<1?n[c.index].status.splice(ze(c.state.status,u.name).index,1):n[c.index].status[ze(c.state.status,u.name).index].duration-=1,tn(h??"",{player:c,fieldId:r}),Yu(c.state,n,c.index)):t;case ae.receive_damage:return!l||!s?t:(l==="heal"?n[c.index]=NP(c.state,s,!0):l==="shield"?n[c.index]=WP(c.state,s):n[c.index]=UP(c.state,s),tn(h??"",{player:c,fieldId:r}),Yu(c.state,n,c.index));case ae.resource_change:return o==="mana"&&(n[c.index].stats.combat.resources.mana.cur-=s??0),o==="health"&&(n[c.index].stats.combat.health.cur-=s??0),o==="shield"&&(n[c.index].stats.combat.shield.cur-=s??0),o==="psp"&&(n[c.index].stats.combat.resources.psp.cur-=s??0),o==="msp"&&(n[c.index].stats.combat.resources.msp.cur-=s??0),o==="soul"&&(n[c.index].stats.combat.resources.soul.cur-=s??0),tn(h??"",{player:c,fieldId:r}),Yu(c.state,n,c.index);case ae.play__attack_animation:return n[c.index].isAttacking+=1,[...n];case ae.REPLACE_ALL:return d||[];default:return t}};function JP(){var Qn;const{character:t,party:e,setCharacter:n,user:r}=b.useContext(vt),s=ri(),[i,o]=b.useState(0),[a,l]=b.useState(!0),[u,d]=b.useState(!1),[c,h]=b.useState(!1),[w,_]=b.useState(0),[v,E]=b.useState({id:r!=null&&r.uid?(Qn=e==null?void 0:e.players[0])==null?void 0:Qn.pid:"",start:!1,joinedPlayers:0,players:[],enemies:[],actionQueue:[],loot:[]}),[p,f]=b.useReducer(XP,v.actionQueue),[y,C]=b.useReducer($m,v.players),[T,N]=b.useReducer($m,v.enemies),[D,B]=b.useState({state:y[0],index:0}),[te,R]=b.useState([]),[P,x]=b.useState(""),M=r!=null&&r.uid?e.players[0].pid===t.pid:!1,[U,G]=b.useState([]),[q,ee]=b.useState(0),[F,V]=b.useState([]),L=r!=null&&r.uid?zt(e.players,t.pid).index:0,J=A=>{const O=[...F];A.forEach(Q=>O.push(Q)),O.length>101&&O.shift(),V(()=>O)},K=A=>{const O=[...F];O.push(A),O.length>101&&O.shift(),V(()=>O)},ue=(A,O,Q,W,se,oe,we,ie)=>{A.length&&C({type:ae.REPLACE_ALL,payload:{pid:"",replaceArr:A,fieldId:W}}),O.length&&N({type:ae.REPLACE_ALL,payload:{pid:"",replaceArr:O,fieldId:W}}),Q.length&&f({type:4,payload:{replacement:Q,fieldId:W}}),we.length&&G(()=>{const Ie=[];for(const Pe of we)Pe.pid===t.pid&&Ie.push(Pe);return Ie}),E(Ie=>Object.assign({},Ie,{id:W.length?W:Ie.id,start:se,joinedPlayers:oe,loot:we!=null&&we.length?we:[]})),ie!=null&&ie.delay&&GP(En,(ie==null?void 0:ie.procTime)??0,(ie==null?void 0:ie.done)??!0,M)};b.useEffect(()=>{E(A=>Object.assign({},A,{players:y})),n(A=>Object.assign({},A,y[L]))},[y]),b.useEffect(()=>{E(A=>Object.assign({},A,{enemies:T}))},[T]),b.useEffect(()=>{if(!(e!=null&&e.inCombat))return s("/dungeon")},[e.inCombat]);const ge=A=>{console.log(D),B(O=>{var Q;return O===null||A===null?A:((Q=O.state)==null?void 0:Q.pid)===A.state.pid?null:A})},be=A=>{var Q;const O=(Q=zt([...y,...T],A))==null?void 0:Q.state;R(W=>!W.length||W[0]!==A?(x(()=>O.npc?"single":O.pid===t.pid?"self":"ally"),[A]):[])},Ee=A=>{const O=[...T].filter(W=>!W.dead);let Q="";for(const W of O)ze(W.status,"taunt").index>-1&&(Q=W.pid);if(A==="single"&&(P!=="single"||Q)){if(!O.length)return;R(()=>[Q||O[0].pid]),x(()=>"single")}else A==="aoe"?(R(()=>Array.from(O,W=>W.pid)),x(()=>"aoe")):A==="ally"&&P!=="ally"?(R(()=>{const W=[...y].filter(se=>se.pid!==t.pid);return W.length?[W[0].pid]:[]}),x(()=>"ally")):A==="self"&&P!=="self"?(R(()=>[t.pid]),x(()=>"self")):A==="ally_all"&&P!=="ally_all"?(R(()=>Array.from([...y],W=>W.pid)),x(()=>"ally_all")):A==="ally_any"&&P!=="ally_any"?(R(()=>[y[0].pid]),x(()=>"ally_any")):A==="field"&&P!=="field"&&(R(()=>Array.from([...y,...T],W=>W.pid)),x(()=>"field"))},Ke=(A,O)=>{switch(A){case"mana":return O.cost.mana;case"health":return O.cost.health?Math.ceil(t.stats.combat.health.max/100*O.cost.health):0;case"shield":return O.cost.shield?Math.ceil(t.stats.combat.shield.max/100*O.cost.shield):0;case"psp":return O.cost.psp;case"msp":return O.cost.msp;case"soul":return O.cost.soul}return 0},nt=b.useCallback((A,O)=>{const Q=["OH05","OH06"];if(O.av>w&&!Q.includes(O.id))return;const W=Fm(O.name,t.pid,A);for(const ie of PP(O.id)){const Ie=Ke(ie,O);if(C({type:ae.resource_change,payload:{pid:t.pid,amount:Ie,resource:ie,fieldId:v.id}}),Ie&&(ie==="psp"||ie==="msp")){const Pe=ie==="psp"?"msp":"psp";C({type:ae.resource_change,payload:{pid:t.pid,amount:Ie*-1,resource:Pe,fieldId:v.id}})}}_(ie=>ie?ie-O.av:0);let se=1;const oe=ze(t.status,"sylph"),we=Math.floor(Math.random()*100);for(oe.index>-1&&we+oe.state.amount>100&&(se=2),se;se>0;se--)f({type:0,payload:{action:W,fieldId:v.id}})},[f,t,w,v.id]),$t=b.useCallback(()=>{const A=[...T],O=[...y],Q=[0,0];for(const W of A)W.dead&&Q[0]++;for(const W of O)W.dead&&Q[1]++;Q[0]>=A.length?(d(()=>!1),h(()=>!0)):Q[1]>=O.length&&d(()=>!1)},[y,T]),Vn=(A,O,Q,W,se,oe)=>{if(!M)return;const we=zt(y,A);if(C({type:ae.play__attack_animation,payload:{pid:A,fieldId:v.id}}),we.state.role==="spiritualist"&&C({type:ae.resource_change,payload:{pid:A,fieldId:v.id,resource:"soul",amount:-1}}),N({type:ae.receive_damage,payload:{pid:W[se],amount:Q,damageType:O,fieldId:v.id}}),O==="status"){const{name:ie,type:Ie,duration:Pe,amount:Fe,affects:Ye,refs:_t}=ze([...Mt.all],oe).state,cn=da(ie,Ie,Fe,Pe,Ye,_t),Kt=bi(we.state,oe).state.level;cn.amount+=Kt;const dn=Math.floor(Math.random()*101);if(Ie==="cc"&&dn+Fe<100)return;N({type:ae.add_status,payload:{pid:W[se],amount:Fe,damageType:O,status:{...cn},fieldId:v.id}})}},hi=(A,O,Q,W,se,oe)=>{if(M&&(C({type:ae.receive_damage,payload:{pid:W[se],amount:Q,damageType:O,fieldId:v.id}}),O==="status")){const{name:we,type:ie,duration:Ie,amount:Pe,affects:Fe,refs:Ye}=ze([...Mt.all],oe).state,_t=da(we,ie,Pe,Ie,Fe,Ye),cn=zt(y,A),Kt=bi(cn.state,oe).state.level;_t.amount+=Kt;const dn=Math.floor(Math.random()*101);if(ie==="cc"&&dn+Pe<100)return;C({type:ae.add_status,payload:{pid:W[se],amount:Pe,damageType:O,status:_t,fieldId:v.id}})}},fi=(A,O,Q,W,se,oe)=>{if(M&&(N({type:ae.play__attack_animation,payload:{pid:A,fieldId:v.id}}),C({type:ae.receive_damage,payload:{pid:W[se],amount:Q,damageType:O,fieldId:v.id}}),O==="status")){const{name:we,type:ie,duration:Ie,amount:Pe,affects:Fe,refs:Ye}=ze([...Mt.all],oe).state,_t=da(we,ie,Pe,Ie,Fe,Ye),cn=zt(T,A),Kt=bi(cn.state,oe).state.level;_t.amount+=Kt;const dn=Math.floor(Math.random()*101);if(ie==="cc"&&dn+Pe<100)return;C({type:ae.add_status,payload:{pid:W[se],amount:Pe,damageType:O,status:_t,fieldId:v.id}})}},pi=(A,O,Q,W,se,oe)=>{if(M&&(N({type:ae.receive_damage,payload:{pid:W[se],amount:Q,damageType:O,fieldId:v.id}}),O==="status")){const{name:we,type:ie,duration:Ie,amount:Pe,affects:Fe,refs:Ye}=ze([...Mt.all],oe).state,_t=da(we,ie,Pe,Ie,Fe,Ye),cn=zt(T,A),Kt=bi(cn.state,oe).state.level;_t.amount+=Kt;const dn=Math.floor(Math.random()*101);if(ie==="cc"&&dn+Pe<100)return;N({type:ae.add_status,payload:{pid:W[se],amount:Pe,damageType:O,status:{..._t},fieldId:v.id}})}},qn=(A,O,Q,W)=>{let se=A.stats.combat.attack,oe=O.stats.combat.defence;se=Il(A.status,"attack",se),oe=Il(O.status,"defence",oe);const we=FP(Q,W,"damage"),ie=Math.floor(se*(we/100))-oe;return ie>0?ie:1},mi=(A,O,Q,W)=>{let se="";return A==="damage"?se=`${O} took ${Q} damage`:A==="heal"?se=`${O} has received ${Q} of healing`:A==="status"&&(se=`${O} has received the status ${W}`),se},I=b.useCallback((A,O,Q)=>{const W=zt([...y,...T],A).state,se=bi(W,Q.id).state,{damageType:oe}=Q,we=[];W.dead||we.push(`${W.name} uses ${Q.name}`);const ie=ze(W.status,"blind");if(ie.index>-1&&Math.floor(Math.random()*101)+Math.ceil(ie.state.amount/2)>100)return J([...we,`${W.name} has missed due to there blindess`]);O.forEach((Ie,Pe)=>{if(W.dead||W.stats.combat.health.cur<=0)return;const Fe=zt([...y,...T],Ie);let Ye=oe==="heal"||oe==="shield"?Q.damage+se.level*3:qn(W,Fe.state,Q.damage,se.level);if(oe==="status"&&Q.damage<1&&(Ye=0),oe==="damage"){const _t=ze(W.status,"lifesteal"),cn=ze(W.status,"demon");(_t.index>-1||cn.index>-1)&&(W.npc?N({type:ae.receive_damage,payload:{pid:A,amount:Math.ceil(_t.state.amount/100*Ye),damageType:"heal",fieldId:v.id}}):C({type:ae.receive_damage,payload:{pid:A,amount:Math.ceil(_t.state.amount/100*Ye),damageType:"heal",fieldId:v.id}}));const Kt=ze(Fe.state.status,"reflect");Kt.index>-1&&(W.npc?N({type:ae.receive_damage,payload:{pid:A,amount:Math.ceil(Kt.state.amount/100*Ye),damageType:"damage",fieldId:v.id}}):C({type:ae.receive_damage,payload:{pid:A,amount:Math.ceil(Kt.state.amount/100*Ye),damageType:"damage",fieldId:v.id}}));const dn=ze(Fe.state.status,"undine"),lf=Math.floor(Math.random()*101);if(dn.index>-1&&lf+Math.floor(dn.state.amount/2)>100)return J([`${Fe.state.name} has Evaded the incoming attack`]);const uf=ze(Fe.state.status,"guardian angel");if(uf.index>-1&&lf+Math.floor(uf.state.amount/4)>100)return J([`${Fe.state.name} has been guarded from the incoming attack`])}Fe.state.dead&&Q.id!=="I05"||(we.push(mi(oe,Fe.state.name,Ye,Q.name)),Fe.state.npc&&!W.npc?Vn(A,oe,Ye,O,Pe,Q.id):!Fe.state.npc&&W.npc?fi(A,oe,Ye,O,Pe,Q.id):!Fe.state.npc&&!W.npc?hi(A,oe,Ye,O,Pe,Q.id):Fe.state.npc&&W.npc&&pi(A,oe,Ye,O,Pe,Q.id))}),J(we),f({type:1,payload:{fieldId:v.id}})},[y,T]),S=b.useCallback(A=>{for(const O of A.status)if(A.npc){if(N({type:ae.reduce_status_duration,payload:{fieldId:v.id,pid:A.pid,status:O}}),O.type!=="dot"&&O.type!=="hot"&&O.type!=="sot")continue;N({type:ae.receive_damage,payload:{fieldId:v.id,pid:A.pid,amount:O.amount,damageType:O.type==="dot"?"damage":O.type==="sot"?"shield":"heal"}}),O.name==="revival"&&N({type:ae.revive_player,payload:{fieldId:v.id,pid:A.pid}})}else{if(O.name==="overheat"&&O.duration===0&&C({type:ae.resource_change,payload:{fieldId:v.id,pid:A.pid,resource:"psp",amount:A.stats.combat.resources.psp.cur}}),O.name==="overload"&&O.duration===0&&C({type:ae.resource_change,payload:{fieldId:v.id,pid:A.pid,resource:"msp",amount:A.stats.combat.resources.msp.cur}}),C({type:ae.reduce_status_duration,payload:{fieldId:v.id,pid:A.pid,status:O}}),O.type!=="dot"&&O.type!=="hot"&&O.type!=="sot")continue;C({type:ae.receive_damage,payload:{fieldId:v.id,pid:A.pid,amount:O.amount,damageType:O.type==="dot"?"damage":O.type==="sot"?"shield":"heal"}}),O.name==="revival"&&C({type:ae.revive_player,payload:{fieldId:v.id,pid:A.pid}})}},[v.id]),g=b.useCallback(()=>{_(()=>jm(zt(y,t.pid).state)),M&&(y.forEach(A=>{const O=ze(A.status,"rain");let Q=-1*Math.floor(A.stats.combat.resources.mana.max/10);O.index>-1&&(Q+=Math.ceil(O.state.amount/2)),C({type:ae.resource_change,payload:{pid:A.pid,fieldId:y[0].pid,resource:"mana",amount:Q}});const W=ze(A.status,"charge"),se=Math.floor(Math.random()*101);W.index>-1&&se+W.state.amount>100&&C({type:ae.resource_change,payload:{pid:A.pid,fieldId:y[0].pid,resource:"msp",amount:-1}});const oe=ze(A.status,"demon cocoon");oe.index>-1&&(C({type:ae.resource_change,payload:{pid:A.pid,fieldId:y[0].pid,resource:"soul",amount:(1+Math.ceil(oe.state.amount/4))*-1}}),C({type:ae.resource_change,payload:{pid:A.pid,fieldId:y[0].pid,resource:"health",amount:Math.ceil(A.stats.combat.health.max/10)}})),S(A)}),T.forEach(A=>{S(A)}))},[y,T,S,t,M]),k=b.useCallback(()=>{M&&(f({type:0,payload:{action:{ability:"sort",user:"N/A",targets:[]},fieldId:v.id}}),T.forEach(A=>{if(A.dead||BP(A))return;let O=jm(A);for(;O>0;){const Q=Math.floor(Math.random()*A.abilities.length),W=B_(A.abilities[Q].id);if(A.abilities[Q].id==="SUM"&&T.length<3&&(j(["005"]),O-=1),!W)continue;const se=RP(W.name,W.type==="field"?[...y,...T]:W.type==="ally"||W.type==="ally_all"||W.type==="ally_any"?T:y,A.pid),oe=Fm(W.name,A.pid,[...se]);if(ze(A.status,W.id).index>-1)continue;const ie=ze(A.status,"sylph");let Ie=1;const Pe=Math.floor(Math.random()*100);for(ie.index>-1&&Pe+ie.state.amount>100&&(Ie=2),Ie;Ie>0;Ie--)f({type:0,payload:{action:oe,fieldId:v.id}});O-=W.av}}))},[y,T,M,v.id]),j=async A=>{const O=HP(v.enemies,A,Number(e.location.map));await tn("enemies",{fieldId:e.players[0].pid,enemies:O})},$=b.useCallback(()=>{f({type:2,payload:{players:[...y,...T],fieldId:v.id}})},[y,T,v.id]);b.useEffect(()=>{v.start&&!c&&d(()=>!0)},[v.start]);const Z=async()=>{if(!(r!=null&&r.uid))return s("/");if(M&&a){const A=await AP([...y,t]);await z_(En,!0,t.pid),E(O=>Object.assign({},O,{...A})),l(()=>!1)}await OP(ue,e)};b.useEffect(()=>{if(!(r!=null&&r.uid))return s("/");Z()},[]),b.useEffect(()=>{if(!u)return;const A=setInterval(()=>{QP(I,k,$t,p,$,g,M,v.id),o(En.initTime)},24);return()=>clearInterval(A)},[I,u,k,$t,p,$,g,M,v.id]);const Y=async()=>{const A=MP(v.enemies),O=[];for(const Q of A){const W=Math.floor(Math.random()*v.players.length),se={id:Q.id,amount:Q.amount,pid:v.players[W].pid};O.push(se)}await tn("loot",{loot:O,fieldId:v.id})},he=()=>{let A=0;for(const O of v.enemies){const Q=Um(O,e);A+=Q}ee(()=>A)},pe=async()=>{for(const A of v.loot){const O={id:A.id,amount:A.amount},Q=zt(v.players,A.pid),W=LP(Q.state,O);if(!Q||!W)return;await tn("player",{fieldId:v.id,player:{state:W,index:Q.index}})}},rt=async()=>{await pe();for(let A=0;A<v.players.length;A++){let O={...v.players[A]};for(const Q of v.enemies){const W=Um(Q,e);O=DP(O,W)}await tn("player",{fieldId:v.id,player:{state:O,index:A}})}await Xn("players",{partyId:v.id,players:v.players})},un=async()=>{if(!M)return;const A=[];for(const O of e.players){const Q=await $P(O);A.push(Q)}await Xn("players",{partyId:e.players[0].pid,players:A});for(const O of A)await VP(O);await Xn("enemies",{partyId:e.players[0].pid,enemyIds:[]}),await Xn("inCombat",{partyId:e.players[0].pid,isInCombat:!1}),await Xn("wasInCombat",{partyId:e.players[0].pid,isInCombat:!1}),await Xn("location",{partyId:e.players[0].pid,location:{...e.location,map:"-1"}})};b.useEffect(()=>{c&&he(),c&&M&&Y()},[c]);const Lr=()=>i/10,Gn=()=>{if(!y.length||zt(v.players,t.pid).state.dead||t.dead)return!0},Sn={selectedTargets:te,selectPlayer:ge,selectTarget:be,selectTargetByAbility:Ee};return m.jsxs("div",{className:`combat_page ${Gn()?"screen_dead":""}`,children:[m.jsx(wP,{...Sn,selectedPlayer:{state:t,index:-1},target:nt,actionValue:w}),m.jsx(Mm,{...Sn,players:v.enemies,sideIndex:1}),m.jsx(Mm,{...Sn,players:v.players,sideIndex:2}),m.jsx(af,{messages:F}),m.jsx(kP,{actionQueue:p,players:v.players,enemies:v.enemies}),m.jsx("div",{className:"cen-flex",children:m.jsx("div",{className:"battleTimer",children:m.jsx("div",{style:{width:Lr()},className:"fill"})})}),U.length&&c?m.jsx(Nr,{inventory:U,position:"center",buttons:[],limit:100,logMessage:K,toggleOff:async()=>{G(()=>[])}}):q>0&&c&&m.jsxs("div",{className:"inventory character_profile menu center_abs_hor",children:[m.jsx("h1",{className:"menu_title_text",children:t.name}),m.jsxs("p",{children:["Lvl: ",t.stats.level," Rank: ",t.stats.rank]}),m.jsx(He,{max:jP(t.stats.level,t.stats.rank),cur:t.stats.xp+q,index:0,type:"xp"}),m.jsxs("p",{children:["received: ",q," XP"]}),m.jsx("button",{className:"menu_btn",onClick:async()=>{await rt(),await Xn("enemies",{partyId:e.players[0].pid,enemyIds:[]}),await Xn("inCombat",{partyId:e.players[0].pid,isInCombat:!1})},disabled:!M,children:"Return"})]}),Gn()&&m.jsx("button",{className:"menu_btn center_abs_hor",style:{bottom:"50px",position:"absolute"},onClick:()=>un(),disabled:!M,children:"Respawn"}),m.jsx("button",{className:"menu_btn",style:{position:"absolute",zIndex:5,transform:"translateY(200px)"},onClick:()=>d(A=>!A),children:"pause"})]})}const{createPlayer:ZP}=cs,{upload:eN}=Pt;function tN(){const{user:t,setCharacter:e}=b.useContext(vt),n=ri(),[r,s]=b.useState(""),[i,o]=b.useState(""),[a,l]=b.useState(""),[u,d]=b.useState(""),[c,h]=b.useState(Mi.naturalist.stats.combat),w=E=>{switch(E){case"naturalist":return Mi.naturalist;case"spiritualist":return Mi.spiritualist;case"technologist":return Mi.technologist}},_=E=>{const p=w(E);console.log(p),p&&(h(()=>p==null?void 0:p.stats.combat),o(()=>E))},v=async()=>{if(!t||!i.length||!a||!u)return;const E=w(i);if(!E)return;const p=ZP(r,t.uid,i,E.stats,[],{map:"-1",XY:[1,1]},[],[],[a,u]);e(()=>p);const f=t.characters?t.characters.length:0;await eN("character",{fieldId:"",user:t,player:{state:p,index:f}}),n("../town")};return m.jsxs("div",{className:"character_create character_btn",children:[m.jsx("h1",{className:"menu_title",children:"New Character"}),m.jsxs("div",{children:[m.jsx("h3",{children:"Stats"}),i.length?m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem"},children:[m.jsxs("div",{children:[m.jsxs("p",{children:["Health ",c.health.max]}),m.jsxs("p",{children:["Attack ",c.attack]}),m.jsxs("p",{children:["Defence ",c.defence]}),m.jsxs("p",{children:["Speed ",c.speed]})]}),m.jsx("div",{className:`${i} front player`})]}):m.jsx("div",{})]}),m.jsx("input",{className:"menu_input",type:"text",placeholder:"Player Name..",onChange:E=>s(E.target.value)}),m.jsx("hr",{}),m.jsx("h3",{children:"Select Class"}),m.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[m.jsx("button",{className:`menu_btn ${i==="naturalist"?"selected":""}`,onClick:()=>_("naturalist"),children:"naturalist"}),m.jsx("button",{className:`menu_btn ${i==="spiritualist"?"selected":""}`,onClick:()=>_("spiritualist"),children:"spiritualist"}),m.jsx("button",{className:`menu_btn ${i==="technologist"?"selected":""}`,onClick:()=>_("technologist"),children:"technologist"})]}),m.jsx("hr",{}),m.jsx("h3",{children:"*left click for primary skillset | *right click for secondary skillset"}),i==="naturalist"&&m.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[m.jsx("button",{className:`menu_btn ${a==="plants"?"selected":""} ${u==="plants"?"selected_secondary":""}`,onClick:()=>{u==="plants"&&d(""),l("plants")},onContextMenu:E=>{E.preventDefault(),a==="plants"&&l(""),d("plants")},children:"Plants"}),m.jsx("button",{className:`menu_btn ${a==="insects"?"selected":""} ${u==="insects"?"selected_secondary":""}`,onClick:()=>{u==="insects"&&d(""),l("insects")},onContextMenu:E=>{E.preventDefault(),a==="insects"&&l(""),d("insects")},children:"Insects"}),m.jsx("button",{className:`menu_btn ${a==="weather"?"selected":""} ${u==="weather"?"selected_secondary":""}`,onClick:()=>{u==="weather"&&d(""),l("weather")},onContextMenu:E=>{E.preventDefault(),a==="weather"&&l(""),d("weather")},children:"Weather"})]}),i==="technologist"&&m.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[m.jsx("button",{className:`menu_btn ${a==="overheat"?"selected":""} ${u==="overheat"?"selected_secondary":""}`,onClick:()=>{u==="overheat"&&d(""),l("overheat")},onContextMenu:E=>{E.preventDefault(),a==="overheat"&&l(""),d("overheat")},children:"Overheat"}),m.jsx("button",{className:`menu_btn ${a==="overload"?"selected":""} ${u==="overload"?"selected_secondary":""}`,onClick:()=>{u==="overload"&&d(""),l("overload")},onContextMenu:E=>{E.preventDefault(),a==="overload"&&l(""),d("overload")},children:"Overload"}),m.jsx("button",{className:`menu_btn ${a==="shield"?"selected":""} ${u==="shield"?"selected_secondary":""}`,onClick:()=>{u==="shield"&&d(""),l("shield")},onContextMenu:E=>{E.preventDefault(),a==="shield"&&l(""),d("shield")},children:"Shield"})]}),i==="spiritualist"&&m.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[m.jsx("button",{className:`menu_btn ${a==="spirits"?"selected":""} ${u==="spirits"?"selected_secondary":""}`,onClick:()=>{u==="spirits"&&d(""),l("spirits")},onContextMenu:E=>{E.preventDefault(),a==="spirits"&&l(""),d("spirits")},children:"Spirits"}),m.jsx("button",{className:`menu_btn ${a==="divinity"?"selected":""} ${u==="divinity"?"selected_secondary":""}`,onClick:()=>{u==="divinity"&&d(""),l("divinity")},onContextMenu:E=>{E.preventDefault(),a==="divinity"&&l(""),d("divinity")},children:"Divinity"}),m.jsx("button",{className:`menu_btn ${a==="abyssal"?"selected":""} ${u==="abyssal"?"selected_secondary":""}`,onClick:()=>{u==="abyssal"&&d(""),l("abyssal")},onContextMenu:E=>{E.preventDefault(),a==="abyssal"&&l(""),d("abyssal")},children:"Abyssal"})]}),m.jsx("hr",{}),m.jsx("button",{className:"menu_btn",onClick:v,children:"Create Character"})]})}const{getCharacters:nN}=cs;function rN(){const{user:t,setCharacter:e}=b.useContext(vt),n=ri(),[r,s]=b.useState([]),[i,o]=b.useState(!1),a=async()=>{if(!t)return;const u=await nN(t);u&&s(()=>u)},l=()=>r.map((u,d)=>m.jsxs("div",{className:"character_btn",onClick:()=>{e(u),n("../town")},children:[m.jsx("p",{children:u.name}),m.jsx("p",{children:u.role}),m.jsxs("p",{children:["Rank: ",u.stats.rank.length?u.stats.rank:"*_*"]}),m.jsxs("p",{children:["Level: ",u.stats.level]})]},`character-${d}`));return b.useEffect(()=>{a()},[]),m.jsxs("div",{className:"character_select",children:[m.jsxs("div",{className:"character_menu",children:[m.jsx("p",{className:"menu_title",children:"💎Select Character"}),l(),m.jsx("button",{className:"menu_btn",onClick:()=>o(u=>!u),children:"New Character"})]}),m.jsx("div",{}),i&&m.jsx(tN,{})]})}function W_({toggleCharacterProfile:t}){const{party:e}=b.useContext(vt),n=()=>e.players.map((r,s)=>{var i,o,a,l,u,d,c,h;return m.jsxs("div",{className:"party_menu_player character_btn cen-flex",onClick:()=>t(r),children:[m.jsxs("div",{children:[m.jsxs("p",{children:[r.name," Lvl.",r.stats.level," ",r.stats.rank]}),m.jsxs("div",{className:"party_menu_bars",children:[m.jsx(He,{max:r.stats.combat.shield.max,cur:r.stats.combat.shield.cur,type:"shield",index:1}),m.jsx(He,{max:r.stats.combat.health.max,cur:r.stats.combat.health.cur,type:"health",index:1}),m.jsx(He,{max:r.stats.combat.resources.mana.max,cur:r.stats.combat.resources.mana.cur,type:"mana",index:1}),m.jsx(He,{max:r.stats.combat.resources.soul.max,cur:r.stats.combat.resources.soul.cur,type:"soul",index:1}),m.jsxs("div",{style:{display:"flex"},children:[m.jsx(He,{max:(o=(i=r.stats.combat.resources)==null?void 0:i.psp)==null?void 0:o.max,cur:(l=(a=r.stats.combat.resources)==null?void 0:a.psp)==null?void 0:l.cur,type:"overheat",index:5}),m.jsx(He,{max:(d=(u=r.stats.combat.resources)==null?void 0:u.msp)==null?void 0:d.max,cur:(h=(c=r.stats.combat.resources)==null?void 0:c.msp)==null?void 0:h.cur,type:"overload",index:5})]})]})]}),m.jsx("div",{className:`${r.role} front minimap_player player`})]},`party-player-${s}`)});return m.jsx("div",{className:"party_menu",children:n()})}const{getItem:sN}=Pt;function iN({town:t,applyRest:e,logMessage:n}){var s;const{character:r}=b.useContext(vt);return m.jsxs("div",{className:"inn",children:[m.jsx(Nr,{inventory:r.inventory,position:"left",buttons:(t==null?void 0:t.storage.level)>0?["deposit"]:[],storage:t.storage.inventory,limit:10,logMessage:n}),((s=t==null?void 0:t.storage)==null?void 0:s.level)>0&&m.jsx(Nr,{inventory:t.storage.inventory,position:"right",buttons:["withdraw"],limit:t.storage.level*5,logMessage:n}),m.jsx("button",{className:"menu_btn center_abs_hor",style:{bottom:"50px",position:"absolute"},onClick:()=>{e(),n(`${r.name} has rested and has recovered.`)},disabled:sN(r.inventory,{id:"000",amount:100}).state.amount<100,children:"Rest 100G"})]})}const{getAbility:oN}=Pt;function aN({category:t,selected:e,groupIndex:n,index:r,hasTooltip:s,click:i}){const[o,a]=b.useState(!1),l=()=>{const u=oN(t.id??t.name);return u||{}};return m.jsxs("div",{className:"tree_special_tooltip_holder",children:[n===0&&m.jsxs("h2",{className:"category_title",children:["Tier ",r+1]}),m.jsxs("div",{className:`box inventory_item category_box ${e?"selected":""}`,onClick:i,onMouseEnter:()=>a(()=>!0),onMouseLeave:()=>a(()=>!1),children:[m.jsx("p",{children:t.name}),m.jsx("p",{children:t.level})]}),o&&s&&m.jsx($_,{ability:l()})]})}const{populateItem:lN,removeItem:Bm,getItem:uN,getAbility:cN,getAbilityRef:zm,getRank:dN,getRankValue:ha}=Pt,{assignBuildingLevel:hN}=di;function fN({town:t,uploadCharacter:e,logMessage:n}){var P;const{character:r}=b.useContext(vt),[s,i]=b.useState([]),[o,a]=b.useState({}),[l,u]=b.useState(""),[d,c]=b.useState(""),h=x=>{u(()=>x),a(()=>({}))},w=x=>{const M=[],U={};function G(q){if(!U[q.name]){if(U[q.name]=!0,q.pre){const ee=x.find(F=>{let V=!1;return F.name===q.pre&&(V=!0),(F==null?void 0:F.id)===q.pre&&(V=!0),V});ee&&G(ee)}M.push(q)}}return x.forEach(q=>G(q)),M},_=(x,M)=>{const U=[],G={};return x.forEach(q=>{const ee=M?(q==null?void 0:q.id)??"":q.name;if(q.pre&&G[q.pre]!==void 0){const F=G[q.pre];U[F].push(q),G[ee]=F}else{const F=U.length;U.push([q]),G[ee]=F}}),U},v=()=>{const x=[];Object.entries(t).forEach(([G,q])=>{const ee=G==="storage"?"inn":void 0,V=["002","003","004","005","006"][q.level]??"",L=(G==="inn"||G==="storage")&&q.level===0?1:5,J=V.length?[{id:V,amount:L}]:[],K={level:q.level,name:G,pre:ee,requirements:J};x.push(K)});const M=w(x),U=_(M);return i(()=>U),U},E=()=>{const x=Array.from(r.abilities,G=>{var ge;const q=cN(G.id)??{},ee=(ge=q.unlocks)==null?void 0:ge.req,F=Math.floor(G.level/20),V=Math.min(F,ee.length-1),L=ee[V].id,J=Math.max(G.level%20,1),K=[{id:L,amount:J}];return K[0].amount<0&&(K[0].amount=1),{level:G.level,name:(q==null?void 0:q.name)??"",requirements:K??[],pre:q==null?void 0:q.unlocks.pre,id:q==null?void 0:q.id}}),M=w(x),U=_(M,!0);i(()=>U)},p=()=>{i(()=>[])},f=()=>{if(t)return s.map((x,M)=>m.jsx("div",{className:"tree_group",children:y(x,M)},`group-${M}`))},y=(x,M)=>x.map((U,G)=>m.jsx(aN,{category:U,selected:o.name===U.name,index:G,groupIndex:M,hasTooltip:l!=="town",click:()=>{a({name:U.name,level:U.level,requirements:U.requirements,id:U.id??"",pre:U.pre}),c(`${dN(Math.min(G*2,7))}`)}},`building-${M}-${G}`)),C=x=>{const M=x.match(/(\d)/);if(M){const U=M.index;return[x.slice(0,U),x.slice(U)]}return[x,""]},T=x=>{switch(x){case"P":return"plants";case"I":return"insects";case"W":return"weather";case"OH":return"overheat";case"OL":return"overload";case"SH":return"shield";case"SP":return"spirits";case"D":return"divinity";case"A":return"abyssal"}return""},N=(x,M)=>{if(["002","003","004","005","006"].includes(M))return x;const G=T(C((o==null?void 0:o.id)??"")[0]);return G===r.order[0]?x:G===r.order[1]?x*2:x*3},D=()=>{if(o.name)return o.requirements.map((x,M)=>{const U=lN(x),G=uN(r.inventory,x).state;if(U)return x.id.length?m.jsx(xo,{item:U,amount:(G==null?void 0:G.amount)??0,requiredAmount:N(x.amount,x.id),selected:!1},`req-${M}`):m.jsx("p",{children:"MAX!"},`req-${M}`)})},B=()=>{var M;let x=!0;if(!r.inventory||!((M=r.inventory)!=null&&M.length))return x;for(const U of o.requirements)for(const G of r.inventory){const q=N(U.amount,U.id);U.id===G.id&&G.amount>=q&&(x=!1)}return x},te=()=>{if(B())return;const x=hN(o);a(x);let M={...r};for(const U of o.requirements)M=Bm(M,U);e(M),n(`${r.name} has leveled up the town skill ${o.name}`)},R=()=>{if(B()||ha(r.stats.rank)<ha(d))return;const x=zm(r,(o==null?void 0:o.id)??""),M=zm(r,(o==null?void 0:o.pre)??"");if(M.index>=0&&M.state.level<=x.state.level||(x.state.level++,x.index<0))return;let U={...r};U.abilities[x.index]=x.state;for(const G of o.requirements)G.amount=N(G.amount,G.id),U=Bm(U,G);e(U),n(`${r.name} has leveled up the skill ${o.name}`),a(()=>({}))};return b.useEffect(()=>{l==="town"&&v()},[t]),b.useEffect(()=>{l==="ability"&&E()},[r]),m.jsxs("div",{className:"menu inventory tree_menu center_abs_hor",children:[m.jsx("div",{className:"skill_tree",children:f()}),m.jsxs("div",{className:"cen-flex tree_reqs",children:[d&&m.jsxs("p",{className:`${ha(r.stats.rank)<ha(d)?"red_text":"uncommon_text"}`,children:["Rank: ",r.stats.rank," / ",d]}),D()]}),(P=o==null?void 0:o.requirements)!=null&&P.length?m.jsx("button",{className:"menu_btn",onClick:()=>{switch(l){case"town":te();break;case"ability":R();break}},disabled:B(),children:"Level Up"}):m.jsx("p",{children:"MAX!"}),m.jsxs("div",{className:"tree_btn_bar",children:[m.jsx("button",{className:"menu_btn",onClick:()=>{v(),h("town")},disabled:l==="town",children:"Town"}),m.jsx("button",{className:"menu_btn",onClick:()=>{E(),h("ability")},disabled:l==="ability",children:"Abilities"}),m.jsx("button",{className:"menu_btn",onClick:()=>{p(),h("exploration")},disabled:l==="exploration",children:"Exploration"})]})]})}const{getLevelUpReq:pN}=Pt;function H_({character:t}){const e=()=>{if(!t.status)return"N/A";if(t.status.length)return t.status.map((n,r)=>m.jsx("div",{children:m.jsx("p",{children:n.name})},`profile-status-${r}`))};return m.jsxs("div",{className:"menu inventory center_abs_hor character_profile",children:[m.jsxs("h1",{style:{display:"flex",gap:"2rem",alignItems:"baseline"},children:[t.name,m.jsxs("span",{className:"small_title_font",children:[" Lvl.",t.stats.level]}),m.jsxs("span",{className:"small_title_font",children:[" ",t.stats.rank.length?t.stats.rank:"Unranked"]})]}),m.jsxs("h3",{children:[t.role," ",m.jsxs("span",{className:"small_title_font",children:["[ ",(t==null?void 0:t.order[0])??"",", ",(t==null?void 0:t.order[1])??""," ]"]})]}),m.jsxs("div",{className:"profile_menu_bars",children:[m.jsxs("div",{className:"profile_w_bar border_red",children:["Health",m.jsx(He,{max:t.stats.combat.health.max,cur:t.stats.combat.health.cur,type:"health",index:1})]}),t.role==="naturalist"&&m.jsxs("div",{className:"profile_w_bar border_blue",children:["Mana",m.jsx(He,{max:t.stats.combat.resources.mana.max,cur:t.stats.combat.resources.mana.cur,type:"mana",index:1})]}),t.role==="technologist"&&m.jsxs("div",{className:"profile_w_bar border_blue",children:["HSP | ESP",m.jsx(He,{max:t.stats.combat.resources.psp.max,cur:t.stats.combat.resources.psp.cur,type:"overheat",index:1}),m.jsx(He,{max:t.stats.combat.resources.msp.max,cur:t.stats.combat.resources.msp.cur,type:"overload",index:1})]}),t.role==="spiritualist"&&m.jsxs("div",{className:"profile_w_bar border_blue",children:["Soul",m.jsx(He,{max:t.stats.combat.resources.soul.max,cur:t.stats.combat.resources.soul.cur,type:"soul",index:1})]}),m.jsxs("div",{className:"profile_w_bar border_aqua",children:["Xp",m.jsx(He,{max:pN(t.stats.level,t.stats.rank),cur:t.stats.xp,type:"xp",index:1})]})]}),m.jsxs("div",{className:"cen-flex",style:{justifyContent:"space-between"},children:[m.jsxs("div",{children:[m.jsxs("p",{children:["Attack: ",t.stats.combat.attack]}),m.jsxs("p",{children:["Defence: ",t.stats.combat.defence]}),m.jsxs("p",{children:["Speed: ",t.stats.combat.speed]}),m.jsx("div",{className:`${t.role} front player`})]}),m.jsxs("div",{className:"profile_status",children:[m.jsx("h3",{children:"Status"}),e()]})]})]})}function V_({showInventory:t,showProfile:e,showTree:n}){return m.jsxs("div",{className:"ui_btn_bar",children:[m.jsx("button",{className:"menu_btn",onClick:t,children:"Inventory"}),m.jsx("button",{className:"menu_btn",onClick:e,children:"Profile"}),m.jsx("button",{className:"menu_btn",onClick:n,children:"Skills"})]})}const{getShopStock:mN}=di;function gN({town:t,logMessage:e}){const{character:n}=b.useContext(vt);return m.jsxs("div",{children:[m.jsx(Nr,{inventory:n.inventory,position:"left",buttons:["sell"],limit:10,logMessage:e}),m.jsx(Nr,{inventory:mN(t.shop.level)??[],position:"right",buttons:["buy"],limit:1e3,logMessage:e})]})}const{populateItem:Wm,getItem:yN,getRank:vN,removeItem:_N,assignItem:wN}=Pt,{uploadTown:fa,createQuestCompletion:SN,assignQuestCompleted:kN}=di;function CN({quests:t,questsCompleted:e,generateQuest:n,uploadCharacterTown:r,cancelCd:s,guildLevel:i}){const{character:o}=b.useContext(vt),a=()=>t.map((d,c)=>{const h=Wm(d.item),w=Wm(d.reward),_=yN(o.inventory,d.item);if(!(!h||!w))return m.jsxs("div",{className:"quest",children:[m.jsxs("p",{className:"text_shadow",children:["Difficulty: ",vN(d.rank)]}),m.jsxs("div",{children:["Collect",m.jsx(xo,{item:h,amount:_.state.amount,requiredAmount:d.item.amount,selected:!1})]}),m.jsxs("div",{children:["Reward",m.jsx(xo,{item:w,amount:d.reward.amount,selected:!0})]}),m.jsxs("div",{children:[m.jsx("button",{className:"menu_btn",onClick:()=>{if(_.state.amount<d.item.amount)return;let v={...o};v=_N(v,d.item),v=wN(v,d.reward),r(v);const E=SN(v.pid,v.name,1,d.rank),p=kN(E,[...e],d.rank);fa("questsCompleted",{questsCompleted:p});const f=[...t];f.splice(c,1),fa("quests",{quests:f})},children:"Submit"}),m.jsx("button",{className:"menu_btn",onClick:()=>{if(Date.now()<s)return;const v=[...t];v.splice(c,1),fa("quests",{quests:v}),fa("cancelCd",{cancelCd:Date.now()+18e5})},children:"Cancel"})]})]},`quest-${c}`)}),l=()=>e.map((d,c)=>m.jsx("div",{children:m.jsxs("p",{className:"text_shadow",children:[c+1," ). ",d.name," | ",d.amount," Quests | ",d.score," Difficulty Score"]})},`quest-completed-player-${c}`)),u=d=>{let c=Math.floor(d/1e3);const h=Math.floor(c/60);return c-=h*60,s<Date.now()?"Ready":`${h}m ${c}s`};return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"quest_board left_abs_hor",children:[m.jsxs("h1",{className:"menu_title",children:["Quest Board ",m.jsxs("span",{className:"small_title_font",children:[u(s-Date.now())," ",t.length," / ",i*2+1," "]})]}),m.jsx("button",{className:"menu_btn cen-flex",onClick:()=>{n()},children:"New Quest"}),a()]}),m.jsxs("div",{className:"quest_board right_abs_hor",children:[m.jsx("h1",{className:"menu_title",children:"Quests Completions"}),l()]})]})}const Hm=[{type:"pitfall",biomes:["any"],disarmType:"random",disarmSkill:"",minFloor:3},{type:"monster_house",biomes:["any"],disarmType:"fight",disarmSkill:"speed",minFloor:5},{type:"poison_thorns",biomes:["forest"],disarmType:"random",disarmSkill:"",minFloor:0},{type:"thorns",biomes:["any"],disarmType:"random",disarmSkill:"",minFloor:0}],EN=[{type:"locked_door",biomes:["downstairs"],minFloor:3},{type:"chest",biomes:["forest","scrapyard","crypt"],minFloor:0}],{db:Pi}=cs,q_=(()=>{const t=(R,P)=>{for(let x=0;x<R.length;x++){if(P.XY&&R[x].XY[0]===P.XY[0]&&R[x].XY[1]===P.XY[1])return{state:R[x],index:x};if(P.type&&R[x].type===P.type)return{state:R[x],index:x};if(R[x].event&&P.event&&R[x].event===P.event)return{state:R[x],index:x}}},e=R=>{const P=[];for(let x=0;x<R.length;x++)R[x].type===""&&P.push({state:R[x],index:x});return P},n=async R=>{const P=le(Pi,`/dungeon/${R}/`);let x;return await mn(P).then(async M=>{const U=await M.val();U&&(x=U)}),x},r=R=>{for(const P of Hm)if(P.type===R)return P},s=(R,P)=>{const x=[];for(const M of Hm)for(const U of M.biomes)(R===U||U==="any")&&M.minFloor<=P&&x.push(M);return x},i=(R,P,x)=>{const M=[];for(const U of Gr)for(const G of U.biomes)if(R===G&&U.minFloor<=P){if(U.chestOnly&&!x)continue;M.push(U)}else if(G==="any"&&U.minFloor<=P){if(U.chestOnly&&!x)continue;M.push(U)}return M},o=(R,P)=>{const x=[];for(const M of EN)for(const U of M.biomes)R===U&&M.minFloor<=P&&x.push(M);return x},a=R=>{let P=["forest","scrapyard","crypt"];const x=["hive","factory","abyss"],M=["cataclysmic_desert","simulation","realm_of_divinity"];return R>24&&(P=P.concat(x)),R>49&&(P=P.concat(M)),P},l=R=>{const P=a(R),x=Math.floor(Math.random()*P.length);return P[x]},u=(R,P)=>{const x=i(R,P,!0),M=[],U=Math.floor(Math.random()*3)+1;for(let G=0;G<U;G++){const q=Math.floor(Math.random()*x.length),ee=x[q],F=ee.id==="000"?20*P+1:Math.floor(Math.random()*2)+1,V={id:ee.id,amount:F};let L=-1;for(let J=0;J<M.length;J++)M[J].id===ee.id&&(L=J);L>-1?M[L].amount+=F:M.push(V)}return M},d=(R,P,x,M)=>{const U=[];for(const q of vd.all)for(const ee of q.biomes)ee===P&&R>=q.minFloor&&(M&&q.isGuardian||!M&&!q.isGuardian)&&U.push(q);const G=[];for(let q=0;q<x;q++){const ee=Math.floor(Math.random()*U.length);G.push(U[ee])}return G.length?Array.from(G,q=>q.id):[]},c=(R,P,x)=>x==="north"?R:R.map(M=>{const[U,G]=[M[0],M[1]],q=U-P[0],ee=G-P[1];let F,V;return x==="west"?(F=ee,V=-q):x==="east"?(F=-ee,V=q):x==="south"&&(F=-q,V=-ee),F===void 0||V===void 0?[-1,-1]:[F+P[0],V+P[1]]}),h=(R,P,x)=>{const M=[[P[0]+1,P[1]+1],[P[0],P[1]+1],[P[0]-1,P[1]+1],[P[0]+1,P[1]],[P[0],P[1]],[P[0]-1,P[1]],[P[0]+1,P[1]-1],[P[0],P[1]-1],[P[0]-1,P[1]-1]],U=c(M,P,x),G=[];for(const q of U){const ee=t(R,{XY:q});if(!ee){G.push({type:"wall"});continue}G.push(ee.state)}return G},w=async(R,P)=>{const x={...R};x.trap="",await N("tile",{tile:x,floor:P})},_=async(R,P)=>{const x=t(R.tiles,{type:"downstairs"});if(!(x!=null&&x.state))return;const M={...x.state};M.event="",await N("tile",{floor:R,tile:M}),await v(R,P)},v=async(R,P)=>{const x={...P};x.event="",await N("tile",{floor:R,tile:x})},E=(R,P,x)=>{const U=Math.floor(Math.random()*100)>79?l(P+10):x;R.type=U;const G=s(U,P),q=Math.floor(Math.random()*100),ee=Math.floor(Math.random()*G.length);return q>=75&&P>2&&(R.trap=G[ee].type??""),R},p=R=>`${R[0]}x${R[1]}`,f=(R,P,x,M,U)=>{if(!P||!x)return;console.log(P,x);const G=[],q={},ee=p(P),F=p(x);for(q[ee]={key:p(P),position:{x:-1,y:-1}},G.push({x:P[0],y:P[1]});G.length>0;){const K=G.shift();if(!K)break;const{x:ue,y:ge}=K,be=p([ue,ge]);if(be===F)break;const Ee=[{x:ue,y:ge-1},{x:ue-1,y:ge},{x:ue,y:ge+1},{x:ue+1,y:ge}];for(let Ke=0;Ke<Ee.length;Ke++){const nt=Ee[Ke];if(!t(R,{XY:[nt.x,nt.y]}))continue;const Vn=p([nt.x,nt.y]);Vn in q||(q[Vn]={key:be,position:{x:ue,y:ge}},G.push(nt))}}const V=[];let L=F,J=q[F].position;for(;L!==ee;){const K=J;V.push(K);const{key:ue,position:ge}=q[L];L=ue,J=ge}for(const K of V){const ue=t(R,{XY:[K.x,K.y]});ue&&(ue.state.type.length||(R[ue.index]=E(ue.state,U,M)))}return R},y=(R,P)=>{const x=[],M=[],U=l(P),G=10+Math.floor(P/5),q=10+Math.floor(P/5);for(let K=G;K>0;K--)for(let ue=q;ue>0;ue--){const be=Math.floor(Math.random()*40)===1&&M.length<=3;be&&M.push([ue,K]);const Ee={XY:[ue,K],type:be?"room":""};if(be){const Ke=Math.floor(Math.random()*3),nt=o(U,P),$t=Math.floor(Math.random()*nt.length);Ke===1?(Ee.event=nt[$t].type,Ee.type=U):Ee.type=""}x.push(Ee)}const ee=Math.floor(Math.random()*x.length),F=Math.floor(Math.random()*3),V=t(x,{XY:R}),L=(V==null?void 0:V.index)??Math.floor(Math.random()*x.length);x[L].type="upstairs",x[ee].type="downstairs";const J=o("downstairs",P);if(F>1&&J.length){const K=Math.floor(Math.random()*J.length);if(x[ee].event=J[K].type,J[K].type==="locked_door"){const ue=e([...x]),ge=Math.floor(Math.random()*ue.length),be=ue[ge],Ee={...be.state};Ee.type=l(P);const Ke=Math.floor(Math.random()*2);Ee.event=Ke===0?"key":"floor_guardian",x[be.index]=Ee,M.push([...Ee.XY])}}f([...x],x[L].XY,x[ee].XY,U,P);for(const K of M){f([...x],x[L].XY,K,U,P);const ue=[[K[0],K[1]-1],[K[0]-1,K[1]],[K[0],K[1]+1],[K[0]+1,K[1]],[K[0]-1,K[1]-1],[K[0]+1,K[1]+1],[K[0]-1,K[1]+1],[K[0]+1,K[1]-1]];for(const ge of ue){const be=t(x,{XY:ge});be&&be.state.type===""&&(x[be.index]=E(be.state,P,U))}}return{tiles:x,number:P,biome:U}},C=async(R,P)=>{try{const x=le(Pi,`/dungeon/${R}`);await qr(x,async M=>{const U=await M.val();if(!U)return U;R===U.number&&P(()=>U)})}catch(x){return console.error(x)}},T=async R=>{try{const P=le(Pi,`/dungeon/${R}`);VT(P)}catch(P){return console.error(P)}},N=async(R,P)=>{const{floor:x,tile:M}=P;switch(R){case"floor":if(!x)return;D(x);break;case"tile":if(!M||!x)return;B(x,M);break}},D=async R=>{const P=le(Pi,`/dungeon/${R.number}`);await ke(P,R)},B=async(R,P)=>{var U;const x=((U=t(R.tiles,{XY:P.XY}))==null?void 0:U.index)??-1,M=le(Pi,`/dungeon/${R.number}/tiles/${x}`);await ke(M,P)};return{getTile:t,getFloor:n,getTrap:r,getPossibleItems:i,getRandomBiome:l,getTileNeighbours:h,getChestLoot:u,getEnemies:d,disarmTrap:w,removeLock:_,removeEvent:v,createFloor:y,createUIEnemy:R=>R,connectFloor:C,disconnectFloor:T,uploadDungeon:N}})(),{getRankValue:Dr,getItem:Vm,populateItem:IN,getLevelUpReq:TN,getRank:xN,removeItem:bN,assignRankStatUpsByRole:PN}=Pt,{getQuestItem:NN,uploadTown:RN,getQuestScore:qm}=di,{getChestLoot:AN,getRandomBiome:ON}=q_;function MN({town:t,logMessage:e,uploadCharacterTown:n}){const{character:r}=b.useContext(vt),s=(u,d,c)=>{const h=[u];for(let w=1;w<c;w++)h.push(Math.ceil(h[w-1]*d));return h},i=()=>{if(t.guild.level*2<t.guild.quests.length)return;const u=NN(t.guild.level),d=u.rank*10,c=AN(ON(d),d)[0];u.reward=c;const h=[...t.guild.quests];h.push(u),RN("quests",{quests:h})},o=()=>{const u=Dr(r.stats.rank),d={id:"",amount:0};switch(u){case 0:d.id="002",d.amount=1;break;case 1:d.id="002",d.amount=5;break;case 2:d.id="003",d.amount=1;break;case 3:d.id="003",d.amount=5;break;case 4:d.id="004",d.amount=3;break;case 5:d.id="004",d.amount=10;break;case 6:d.id="005",d.amount=5;break;case 7:d.id="005",d.amount=20;break;case 8:d.id="006",d.amount=20;break}return d},a=()=>{const u=Dr(r.stats.rank),d=TN(r.stats.level,r.stats.rank),c=u>0?u*10:5;return{xp:d,level:c}},l=()=>{const u=Dr(r.stats.rank),c=s(1,Math.pow(1e3,1/6.75),10)[u+1];return c<1?1:c};return m.jsxs("div",{children:[m.jsx(CN,{quests:t.guild.quests,questsCompleted:t.guild.questsCompleted,generateQuest:i,uploadCharacterTown:n,cancelCd:t.guild.cancelCd,guildLevel:t.guild.level}),Dr(r.stats.rank)<9&&m.jsxs("div",{className:"rankup_box center_abs_hor",children:[m.jsxs("p",{children:["Guild Level: ",t.guild.level," / ",Math.floor(Dr(r.stats.rank)/2)+1]}),m.jsxs("p",{children:["Level: ",r.stats.level," / ",a().level]}),m.jsxs("p",{children:["Quest Score: ",qm(t.guild.questsCompleted,r.pid,r.name)," / ",l()]}),m.jsx(xo,{item:IN(o())??{},amount:Vm(r.inventory,o()).state.amount,requiredAmount:o().amount,selected:!0}),m.jsx("button",{className:"menu_btn",onClick:()=>{const{xp:u,level:d,rank:c}=r.stats,h=a(),w=o();if(h.xp>u||d<h.level||Vm(r.inventory,w).state.amount<o().amount||Math.floor(Dr(c)/2)+1>t.guild.level)return;if(l()>qm(t.guild.questsCompleted,r.pid,r.name))return console.error("wrong");const _=xN(Dr(c)+1);let v={...r};v=PN(v),v=bN(v,w),v.stats.rank=_,v.stats.level=1,v.stats.xp=0,n(v),e(`${r.name} has reached the new rank of ${_}`)},children:"Rank Up"})]})]})}const{getParties:Gm,createParty:LN,joinParty:DN,leaveParty:FN,destroyRoom:jN,uploadParty:Qm,syncPartyMemberToAccount:UN}=au,{connectTown:$N}=di,{assignHeal:BN,assignResource:Xu,getPlayer:Km,getItem:zN,removeItem:WN}=Pt;function HN(){var ee,F,V;const{user:t,character:e,setCharacter:n,party:r,setParty:s}=b.useContext(vt),i=ri(),[o,a]=b.useState({}),[l,u]=b.useState(!1),[d,c]=b.useState([]),[h,w]=b.useState([]),_=L=>{const J=[...h];J.push(L),J.length>101&&J.shift(),w(()=>J)},[v,E]=b.useState(!1),[p,f]=b.useState(!1),[y,C]=b.useState(!1),[T,N]=b.useState(!1),[D,B]=b.useState(!1),[te,R]=b.useState(!1),[P,x]=b.useState({}),M=L=>{L!=="partyMenu"&&E(()=>!1),L!=="inventoryMenu"&&f(()=>!1),L!=="innMenu"&&C(()=>!1),L!=="characterProfileMenu"&&x(()=>({})),L!=="treeMenu"&&N(()=>!1),L!=="shopMenu"&&B(()=>!1),L!=="guildMenu"&&R(()=>!1)},U=()=>d.map((L,J)=>L.players.length?m.jsx("div",{onClick:()=>{DN(e,L.players[0].pid,s)},children:m.jsx("p",{children:L.players[0].name})},`party-${J}`):null),G=L=>{if(r.players){const J=Km(r.players,e.pid).index,K=[...r.players];K[J]=L,Qm("players",{partyId:r.players[0].pid,players:K})}UN(L),n(()=>L)},q=()=>{let L={...e};const J=zN(L.inventory,{id:"000",amount:100});if(!(J.state.amount<100)){if(L=BN(L,e.stats.combat.health.max,!0),o.inn.level>=2){L=Xu(L,e.stats.combat.resources.mana.max);const K=Math.floor(L.stats.combat.resources.msp.max/2)-L.stats.combat.resources.msp.cur,ue=Math.floor(L.stats.combat.resources.psp.max/2)-L.stats.combat.resources.psp.cur;L=Xu(L,K,"msp"),L=Xu(L,ue,"psp")}o.inn.level>=3&&(L.status=[]),L.stats.combat.shield.cur=0,L=WN(L,J.state),G(L)}};return b.useEffect(()=>{if(!(r!=null&&r.players))console.log("getting party"),Gm(e.pid,e.name,c,s,u),E(!1);else{const L=Km(r.players,e.pid);n(()=>L.state)}},[r]),b.useEffect(()=>{r!=null&&r.players&&Number(r.location.map)>-1&&i("../dungeon")},[r.location]),b.useEffect(()=>{if(!(t!=null&&t.uid))return i("/");$N(a),e.dead&&e.stats.combat.health.cur>0&&n(L=>({...L,dead:!1}))},[]),m.jsxs("div",{children:[r.players&&m.jsx(W_,{toggleCharacterProfile:L=>{x(J=>J.pid?{}:{...L}),M("characterProfileMenu")}}),r.players?m.jsx("button",{className:"menu_btn",disabled:l,onClick:()=>r.players[0].pid===e.pid?jN(r.players[0].pid,s):FN(r.players[0].pid,e,s),children:"Leave Party"}):m.jsxs("div",{children:[m.jsx("button",{className:"menu_btn",onClick:()=>LN(e,s),disabled:l,children:"Create Party"}),m.jsx("button",{className:"menu_btn",disabled:l,onClick:()=>{v||Gm(e.pid,e.name,c,s,u),E(()=>!v)},children:"Join Party"})]}),m.jsx("div",{children:v?U():null}),m.jsxs("div",{children:[m.jsx("button",{className:"menu_btn",onClick:()=>{C(L=>!L),M("innMenu")},disabled:((ee=o==null?void 0:o.inn)==null?void 0:ee.level)<1,children:"Inn"}),m.jsx("button",{className:"menu_btn",onClick:()=>{B(L=>!L),M("shopMenu")},disabled:((F=o==null?void 0:o.shop)==null?void 0:F.level)<1,children:"Shop"}),m.jsx("button",{className:"menu_btn",onClick:()=>{R(L=>!L),M("guildMenu")},disabled:((V=o==null?void 0:o.guild)==null?void 0:V.level)<1,children:"Guild"}),m.jsx("button",{className:"menu_btn",onClick:()=>Qm("location",{partyId:r.players[0].pid,location:{...r.location,map:"0"}}),disabled:!r.players,children:"Dungeon"})]}),m.jsx(V_,{showInventory:()=>{f(L=>!L),M("inventoryMenu")},showProfile:()=>{x(L=>L.pid?{}:{...e}),M("characterProfileMenu")},showTree:()=>{N(L=>!L),M("treeMenu")}}),m.jsx(af,{messages:h}),y&&m.jsx(iN,{town:o,applyRest:q,logMessage:_}),p&&m.jsx(Nr,{inventory:e.inventory,position:"center",buttons:["use","destroy"],limit:10,logMessage:_}),P.pid&&m.jsx(H_,{character:P}),T&&m.jsx(fN,{town:o,uploadCharacter:G,logMessage:_}),D&&m.jsx(gN,{town:o,logMessage:_}),te&&m.jsx(MN,{town:o,uploadCharacterTown:G,logMessage:_})]})}const{connectParty:VN,uploadParty:Rt,syncPartyMemberToAccount:Ym}=au,{getTile:At,getTileNeighbours:qN,getFloor:Ju,createFloor:Xm,connectFloor:Zu,uploadDungeon:ec,getTrap:GN,disarmTrap:tc,getEnemies:QN,getPossibleItems:KN,disconnectFloor:YN,removeLock:Jm,getChestLoot:Zm,removeEvent:XN}=q_,{assignItem:eg,getPlayer:nc,respawn:JN,assignStatus:ZN,assignDamage:eR,getStatus:tR}=Pt;function nR(){var S;const{character:t,enemies:e,setEnemies:n,setParty:r,party:s,user:i,setCharacter:o}=b.useContext(vt),a=ri(),[l,u]=b.useState(!1),[d,c]=b.useState({}),[h,w]=b.useState([]),[_,v]=b.useState(t.location??{map:"1",XY:[1,1]}),[E,p]=b.useState("north"),[f,y]=b.useState([]),C=g=>{const k=[...f];k.push(g),k.length>101&&k.shift(),y(()=>k)},[T,N]=b.useState(!1),[D,B]=b.useState({}),[te,R]=b.useState([]),[P,x]=b.useState(""),M=g=>{g!=="inventoryMenu"&&N(()=>!1),g!=="characterProfileMenu"&&B(()=>({})),g!=="lootMenu"&&R(()=>[])},U=()=>h==null?void 0:h.map((g,k)=>g.type!=="wall"?m.jsx("div",{className:`${g.type!==""?g.type:"wall"}`,children:k===4&&m.jsx("div",{className:`back ${t.role} minimap_player`})},`tile-${k}`):m.jsx("div",{className:"wall"},`tile-${k}`)),G=async g=>{const{index:k}=nc(s.players,t.pid),j={...s.players};j[k]=g,await Rt("players",{partyId:s.players[0].pid,players:j}),o(()=>g)},q=()=>{let g=0;for(const k of s.players)k.dead&&g++;return g>=s.players.length},ee=g=>{var Y;if(q())return;const k=(Y=At(d.tiles,{XY:_.XY}))==null?void 0:Y.state;if(!k)return;let j=k.XY[0],$=k.XY[1];g==="up"?$+=1:g==="down"?$-=1:g==="left"?j-=1:g==="right"&&(j+=1);const Z=At(d.tiles,{XY:[j,$]});Z&&Z.state.type!==""&&(Rt("location",{partyId:s.players[0].pid,location:{map:s.location.map,XY:[j,$]}}),$t())},F=(g,k,j)=>{w(()=>{const $=[],Z=qN(g,k,j);for(const Y of Z)$.push(Y);return $})},V=g=>{const k=["north","east","south","west"];p(j=>{var Y;const Z=(k.indexOf(j)+(g==="left"?-1:1)+k.length)%4;return F(d.tiles,((Y=At(d.tiles,{XY:_.XY}))==null?void 0:Y.state.XY)??[0,0],k[Z]),k[Z]})},L=g=>E==="north"?g?"down":"up":E==="east"?g?"right":"left":E==="west"?g?"left":"right":E==="south"?g?"up":"down":"",J=async()=>{const g=Zm(d.biome,d.number);let k={...t};for(let j=0;j<g.length;j++)k=eg(k,g[j]);await G(k),R(()=>g??[])},K=async(g,k)=>{const j=k==="type"?g.type:k==="trap"?g.trap:g.event;let $={...t};switch(j){case"upstairs":Ke();break;case"downstairs":if(g.event&&(g==null?void 0:g.event)==="locked_door")return C("At the top of the stairs you find a locked door.");nt("up",1);break;case"pitfall":nt("down",2),x(()=>"");break;case"poison_thorns":$=ZN($,tR(Mt.all,"poison").state,"poison"),G($);break;case"thorns":$=eR($,d.number+1),G($);break;case"key":await Jm(d,g);break;case"floor_guardian":$t(!0,!0);break;case"monster_house":await $t(!0,!1,5),await ge();break;case"chest":await J(),await XN(d,g);break}},ue=g=>{const k=GN(g.trap??""),j=Math.floor(Math.random()*101);k&&(k.disarmType==="random"?j>50?(C(`${k.type} has been disarmed.`),tc(g,d),x(()=>"")):(C("you failed to disarm the trap and fell for it instead"),K(g,"trap")):k.disarmType==="fight"&&(j+t.stats.combat.speed>100?(C(`${k.type} has been disarmed.`),tc(g,d),x(()=>"")):(C("you failed to escape the trap"),K(g,"trap"))))},ge=async()=>{await Rt("wasInCombat",{partyId:s.players[0].pid,isInCombat:!0}),await Rt("inCombat",{partyId:s.players[0].pid,isInCombat:!0})},be=()=>{Math.floor(Math.random()*100)>51?(C("You successfully avoided the enemies."),Rt("enemies",{partyId:s.players[0].pid,enemyIds:[]})):ge()},Ee=async()=>{var j;const g=(j=At(d.tiles,{XY:s.location.XY}))==null?void 0:j.state;if(!g||g.checked)return;if(g.event)return C(`After looking around you notice a ${g.event}.`);const k=Math.floor(Math.random()*100);if(k>79){const $=KN(g.type,d.number),Z=Math.floor(Math.random()*$.length),Y=$[Z],he={id:Y.id,amount:Y.id==="000"?3*d.number+1:1},{state:pe}=nc(s.players,t.pid),rt=eg(pe,he);G(rt),C(`${t.name} inspected their surroundings and found ${Y.name} x${he.amount}`)}else k>59?$t(!0):C(`You see nothing around other than the ${g.type} scenery`);g.checked=!0,await ec("tile",{floor:d,tile:g})},Ke=async()=>{if(d.number<=0){for(const g of s.players)await Ym(g);Rt("location",{partyId:s.players[0].pid,location:{...s.location,map:"-1"}})}else nt("down",1)},nt=async(g,k)=>{var Y;const j=g==="up"?Number(s.location.map)+k:Number(s.location.map)-k;let $;$=await Ju(j),$||($=Xm(s.location.XY,j)),$.number=j,c(()=>$),ec("floor",{floor:$});const Z=(Y=At($.tiles,{type:g==="up"?"upstairs":"downstairs"}))==null?void 0:Y.state;return Z&&(Rt("location",{partyId:s.players[0].pid,location:{map:`${j}`,XY:Z.XY}}),await YN(d.number),await Zu(j,c)),$},$t=async(g,k,j)=>{if((g?1:Math.floor(Math.random()*10))===1){const Z=k?1:Math.ceil(Math.random()*3),Y=QN(d.number,d.biome,j??Z,k??!1);await Rt("enemies",{partyId:s.players[0].pid,enemyIds:Y}),C(`${t.name} ran into ${Z} enemies.`)}else n(()=>[])},Vn=g=>{C(`You have encountered a ${g} trap!`),x(()=>g)},hi=async()=>{const g=await VN(s.players[0].pid,r);if(!g)return;let k;k=await Ju(Number(s.location.map)),k||(k=Xm(s.location.XY,Number(s.location.map)),k.number=Number(s.location.map),ec("floor",{floor:k}));const j=At(k.tiles,{type:"upstairs"});if(j){if(c(()=>k),!g.wasInCombat)await Rt("location",{partyId:s.players[0].pid,location:{map:s.location.map,XY:j.state.XY}}),F(k.tiles,j.state.XY,E);else{await Rt("wasInCombat",{partyId:s.players[0].pid,isInCombat:!1}),F(k.tiles,s.location.XY,"north");const $=At(k.tiles,{XY:s.location.XY});($==null?void 0:$.state.event)==="floor_guardian"&&await Jm(k,$.state)}await Zu(Number(s.location.map),c)}};b.useEffect(()=>{if(!(i!=null&&i.uid))return a("/");t.pid===s.players[0].pid&&u(()=>!0),hi()},[]);const fi=async()=>{const g=await Ju(Number(s.location.map))??{};console.log(g),g.biome&&(c(()=>g),await Zu(g.number,c))};b.useEffect(()=>{if(!(i!=null&&i.uid))return a("/");if(Number(s.location.map)<0)return a("/town");v(()=>{if(`${d.number}`!==s.location.map&&fi(),d.tiles){const g=At(d.tiles,{XY:s.location.XY});g!=null&&g.state.trap&&Vn(g.state.trap),F(d.tiles,s.location.XY,E)}return s.location})},[s.location]),b.useEffect(()=>{if(s!=null&&s.inCombat)return a("/combat")},[s.inCombat]);const pi=async()=>{if(!l)return;const g=[];for(const k of s.players){const j=await JN(k);g.push(j),k.pid===t.pid&&o(()=>j)}await Rt("players",{partyId:s.players[0].pid,players:g});for(const k of g)await Ym(k);await Rt("location",{partyId:s.players[0].pid,location:{...s.location,map:"-1"}})},qn=()=>{var k;if(!d.tiles)return;const g=(k=At(d.tiles,{XY:s.location.XY}))==null?void 0:k.state;return!(g!=null&&g.trap||s!=null&&s.enemies)},mi=()=>{var k;if(!d.tiles)return;const g=(k=At(d.tiles,{XY:s.location.XY}))==null?void 0:k.state;return!(g!=null&&g.checked)},I=()=>{if(!s||!s.players||!s.players.length||nc(s.players,t.pid).state.dead||t.dead)return!0};return m.jsxs("div",{className:`${t.dead?"screen_dead":""} dungeon`,tabIndex:0,onKeyDown:g=>{g.key==="w"?ee(L()):g.key==="a"?V("left"):g.key==="d"?V("right"):g.key==="s"&&ee(L(!0))},children:[m.jsx("div",{className:"dungeon_info",children:m.jsxs("p",{children:["Floor: ",d.number]})}),m.jsxs("div",{className:"minimap_group",children:[P&&m.jsx("div",{children:m.jsx("h2",{children:P})}),((S=s==null?void 0:s.enemies)==null?void 0:S.length)&&m.jsxs("div",{className:"btn_group",children:[m.jsx("button",{className:"menu_btn",onClick:ge,children:"Fight"}),m.jsx("button",{className:"menu_btn",onClick:be,children:"Avoid"})]}),m.jsxs("div",{className:"btn_group",children:[m.jsx("button",{className:"menu_btn",onClick:()=>Ee(),disabled:!mi(),children:"inspect"}),m.jsx("button",{className:"menu_btn",onClick:()=>{var j;const g=((j=At(d.tiles,{XY:s.location.XY}))==null?void 0:j.state)??{};let k="type";g.event&&(g==null?void 0:g.event)!=="locked_door"&&(k="event"),g.trap&&(k="trap"),K(g,k)},children:"use"}),m.jsx("button",{className:"menu_btn",onClick:()=>{var k;const g=((k=At(d.tiles,{XY:s.location.XY}))==null?void 0:k.state)??{};ue(g)},disabled:!P,children:"disarm"}),m.jsx("button",{className:"menu_btn",onClick:()=>{console.log(Zm(d.biome,d.number))},children:"event"})]}),m.jsx("div",{className:"minimap",children:U()}),m.jsxs("div",{className:"btn_group",children:[m.jsx("button",{className:"menu_btn",onClick:()=>V("left"),disabled:!qn(),children:"turn left"}),m.jsx("button",{className:"menu_btn",onClick:()=>ee(L()),disabled:!qn(),children:"move forward"}),m.jsx("button",{className:"menu_btn",onClick:()=>V("right"),disabled:!qn(),children:"turn right"})]})]}),e.length&&m.jsx("button",{onClick:async()=>{await Rt("inCombat",{partyId:s.players[0].pid,isInCombat:!0}),a("../combat")},children:"Enter Combat"}),m.jsx(af,{messages:f}),m.jsx(V_,{showInventory:()=>{N(g=>!g),M("inventoryMenu")},showProfile:()=>{B(g=>g.pid?{}:{...t}),M("characterProfileMenu")},showTree:()=>{M("treeMenu")}}),T&&m.jsx(Nr,{inventory:t.inventory??[],position:"left",buttons:["use","destroy"],limit:10,logMessage:C,disarmTrap:async()=>{const g=At(d.tiles,{XY:s.location.XY});g!=null&&g.state&&await tc(g.state,d)}}),te.length&&m.jsx(Nr,{inventory:te,position:"center",buttons:[],limit:100,logMessage:C,toggleOff:()=>{R(()=>[]),M("lootMenu")}}),D.pid&&m.jsx(H_,{character:D}),s.players&&m.jsx(W_,{toggleCharacterProfile:g=>{B(k=>k.pid?{}:{...g}),M("characterProfileMenu")}}),I()&&m.jsx("button",{className:"menu_btn center_abs_hor",style:{bottom:"50px",position:"absolute"},onClick:()=>pi(),disabled:!l,children:"Respawn"})]})}function rR(){const[t,e]=b.useState(),[n,r]=b.useState({}),[s,i]=b.useState({}),[o,a]=b.useState([]);return m.jsx(fk,{basename:"threekey",children:m.jsx(vt.Provider,{value:{user:t,setUser:e,character:n,setCharacter:r,party:s,setParty:i,enemies:o,setEnemies:a},children:m.jsxs(ck,{children:[m.jsx(ps,{path:"/",element:m.jsx(aP,{})}),m.jsx(ps,{path:"/combat",element:m.jsx(JP,{})}),m.jsx(ps,{path:"/characters",element:m.jsx(rN,{})}),m.jsx(ps,{path:"/town",element:m.jsx(HN,{})}),m.jsx(ps,{path:"/dungeon",element:m.jsx(nR,{})})]})})})}rc.createRoot(document.getElementById("root")).render(m.jsx(rR,{}));
